grf {
	grfid: "TB\01\01";
	name: string(STR_GRF_NAME);
	desc: string(STR_GRF_DESCRIPTION);
	url : string(STR_GRF_URL);
	version: 13;
	min_compatible_version: 0;
	param {
		param_company {
			type: int;
			name: string(STR_PARAM_COMPANY_NAME);
			desc: string(STR_PARAM_COMPANY_DESC);
			min_value: 0;
			max_value: 2;
			def_value: 2;
			names: {
				0: string(STR_PARAM_COMPANY_KEISEI);
				1: string(STR_PARAM_COMPANY_KEIKYU);
				2: string(STR_PARAM_COMPANY_BOTH);
			};
		}
	}
	param {
		param_sound_effect {
			type: int;
			name: string(STR_PARAM_SOUND_NAME);
			desc: string(STR_PARAM_SOUND_DESC);
			min_value: 0;
			max_value: 2;
			def_value: 1;
			names: {
				0: string(STR_PARAM_SOUND_OFF);
				1: string(STR_PARAM_SOUND_START);
				2: string(STR_PARAM_SOUND_ON);
			};
		}
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


railtypetable {
	ELRL
}

// TTD check //
if (ttd_platform != PLATFORM_OPENTTD || openttd_version < version_openttd(1, 2, 0, 22723)) {
	error(FATAL, REQUIRES_OPENTTD, string(STR_MIN_OPENTTD_VERSION));
}

// Warn if "JapanSet3: Trains isn't optimal" //
if (((grf_current_status("SZ\0D\00") == 0) && (grf_current_status("DP\30\00") == 0)) || ((grf_future_status("SZ\0D\00") == 0) && (grf_future_status("DP\30\00") == 0))) {
	error(FATAL, string(STR_REQUIRES_JAPAN));
}


//-----------------------------------------------------------------------------------------------------------------------------

// Balancing block for running costs //

if (param["SZ\0D\00", 2]  < 0) {
	error(FATAL, string(STR_PARAM));
}
if (param["SZ\0D\00", 3]  < 0) {
	error(FATAL, string(STR_PARAM));
}


//-----------------------------------------------------------------------------------------------------------------------------

/*
for future use, use block below
remove blocks above if: (JapanSet3)

if (grf_future_status("SZ\0D\00") == 1) {
    PURCHASE_COST_MOD = param["SZ\0D\00", 2] * 2;
    RUNNING_COST_MOD = param["SZ\0D\00", 3] * 2;
}

basecost{
	PR_BUILD_VEHICLE_TRAIN: PURCHASE_COST_MOD;
	PR_RUNNING_TRAIN_ELECTRIC: RUNNING_COST_MOD;
}
*/


//-----------------------------------------------------------------------------------------------------------------------------

// Balancing block for capacities and loading times !!DON'T FORGET TO CHANGE AFTER JPSet3 RELEASE!! //

if (grf_future_status("SZ\0D\00") == 1) {
	RUNNING_COST_MOD = param["SZ\0D\00", 2] * 2; 
}

basecost {
	PR_RUNNING_TRAIN_ELECTRIC: RUNNING_COST_MOD;
}

if (param["SZ\0D\00", 3]  == 0 || 1 || 2) {
	param_capacities_1 = 50; // old car //
	param_capacities_2 = 65; // 16m car //
	param_capacities_3 = 75; // normal car //
	param_capacities_4 = 30; // express car //
}

if (param["SZ\0D\00", 3]  == 10 || 11 || 12) {
	param_capacities_1 = 60; // old car //
	param_capacities_2 = 75; // 16m car //
	param_capacities_3 = 90; // normal car //
	param_capacities_4 = 40; // express car //
}

if (param["SZ\0D\00", 3]  == 20 || 21 || 22) {
	param_capacities_1 = 70; // old car //
	param_capacities_2 = 85; // 16m car //
	param_capacities_3 = 105; // normal car //
	param_capacities_4 = 50; // express car //
}

if (param["SZ\0D\00", 3]  == 30 || 31 || 32) {
	param_capacities_1 = 80; // old car //
	param_capacities_2 = 100; // 16m car //
	param_capacities_3 = 120; // normal car //
	param_capacities_4 = 60; // express car //
}

if (param["SZ\0D\00", 3]  == 0 || 10 || 20 || 30) {
	param_loading_1D = 5; // 1 door //
	param_loading_2D = 10; // 2 doors //
	param_loading_3D = 20; // 3 doors //
	param_loading_4D = 40; // 4 doors //
}

if (param["SZ\0D\00", 3]  == 1 || 11 || 21 || 31) {
	param_loading_1D = 10; // 1 door //
	param_loading_2D = 20; // 2 doors //
	param_loading_3D = 30; // 3 doors //
	param_loading_4D = 50; // 4 doors //
}

if (param["SZ\0D\00", 3]  == 2 || 12 || 22 || 32) {
	param_loading_1D = 20; // 1 door //
	param_loading_2D = 30; // 2 doors //
	param_loading_3D = 40; // 3 doors //
	param_loading_4D = 60; // 4 doors //
}

//-----------------------------------------------------------------------------------------------------------------------------

// TEMPLATES //

template tmpl_vehicle_6_length(x, y) {
// 6/8 trainlength
	[x + 128,	y,	8,	24,	-3,		-12]
    [x + 144,	y,	20,	20,	-15,	-12]
    [x + 176,	y,	28,	16,	-18,	-12]
    [x + 224,	y,	20,	20,	-7,		-14]
	[x,			y,	8,	24,	-3,		-16]
    [x + 16,	y,	20,	20,	-11,	-14]
    [x + 48,	y,	28,	16,	-10,	-12]
    [x + 96,	y,	20,	20,	-3,		-12]
}

template tmpl_vehicle_7_length(x, y) {
// 7/8 trainlength
    [x + 128,	y,	8,	26,	-3,		-14]
    [x + 144,	y,	20,	20,	-14,	-12]
    [x + 176,	y,	28,	16,	-16,	-12]
    [x + 224,	y,	20,	20,	-6,		-13]
	[x,			y,	8,	26,	-3,		-16]
    [x + 16,	y,	20,	20,	-12,	-13]
    [x + 48,	y,	28,	16,	-12,	-12]
    [x + 96,	y,	20,	20,	-4,		-12]
}

template tmpl_vehicle_7r_length(x, y) {
// 7/8 trainlength
	[x,			y + 30,	8,	26,	-3,		-16]
    [x + 16,	y + 30,	20,	20,	-12,	-13]
    [x + 48,	y + 30,	28,	16,	-12,	-12]
    [x + 96,	y + 30,	20,	20,	-4,		-12]
    [x + 128,	y + 30,	8,	26,	-3,		-14]
    [x + 144,	y + 30,	20,	20,	-14,	-12]
    [x + 176,	y + 30,	28,	16,	-16,	-12]
    [x + 224,	y + 30,	20,	20,	-6,		-13]
}

template tmpl_vehicle_7_14_length(x, y) {
	tmpl_vehicle_7_length(0,0)
	tmpl_vehicle_7r_length(0,0)
}

template tmpl_vehicle_14_7_length(x, y) {
	tmpl_vehicle_7r_length(0,0)
	tmpl_vehicle_7_length(0,0)
}

template tmpl_vehicle_8_length(x, y) {
// 8/8 trainlength
    [x + 128,	y,	8,	28,	-3,		-16]
    [x + 144,	y,	22,	21,	-14,	-13]
    [x + 176,	y,	32,	16,	-16,	-12]
    [x + 224,	y,	22,	21,	-6,		-13]
	[x,			y,	8,	28,	-3,		-16]
    [x + 16,	y,	22,	21,	-14,	-13]
    [x + 48,	y,	32,	16,	-16,	-12]
    [x + 96,	y,	22,	21,	-6,		-13]
}

template tmpl_vehicle_8r_length(x, y) {
// 8/8 trainlength
	[x,			y + 30,	8,	28,	-3,		-16]
    [x + 16,	y + 30,	22,	21,	-14,	-13]
    [x + 48,	y + 30,	32,	16,	-16,	-12]
    [x + 96,	y + 30,	22,	21,	-6,		-13]
    [x + 128,	y + 30,	8,	28,	-3,		-16]
    [x + 144,	y + 30,	22,	21,	-14,	-13]
    [x + 176,	y + 30,	32,	16,	-16,	-12]
    [x + 224,	y + 30,	22,	21,	-6,		-13]
}

template tmpl_vehicle_8_16_length(x, y) {
	tmpl_vehicle_8_length(0,0)
	tmpl_vehicle_8r_length(0,0)
}

template tmpl_vehicle_16_8_length(x, y) {
	tmpl_vehicle_8r_length(0,0)
	tmpl_vehicle_8_length(0,0)
}

template tmpl_empty(num, xsize, ysize, xoff, yoff) {
    [1, 1 * num, xsize, ysize, xoff, yoff]
}

template tmpl_purchase(x, y) {
	[x, y, 54, 16, -27, -10]
}

//-----------------------------------------------------------------------------------------------------------------------------


// KEIKYU CONSIST GROUP 1A1 (1-car for 1 car trains) //

switch(FEAT_TRAINS, SELF, sw_KQ_GROUP_1A1, vehicle_type_id) { 
	item_KQ51:		return CB_RESULT_ATTACH_ALLOW;
	item_KQDE1:		return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1A1_CANNOT_ATTACH_OTHER);
}

// KEIKYU CONSIST GROUP 1A2 (2-cars for 2 car trains) //

switch(FEAT_TRAINS, SELF, sw_KQ_GROUP_1A2, vehicle_type_id) { 
	item_KQ51:		return CB_RESULT_ATTACH_ALLOW;
	item_KQDE1:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ300_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ5002_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ5004:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ400_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KS_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQ_2:		return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1A2_CANNOT_ATTACH_OTHER);
}

// KEIKYU CONSIST GROUP 1A4 (2, 3 and 4-cars; for 3, 4 and 6 car trains) //

switch(FEAT_TRAINS, SELF, sw_KQ_GROUP_1A4, vehicle_type_id) { 
	item_KQ51:			return CB_RESULT_ATTACH_ALLOW;
	item_KQDE1:			return CB_RESULT_ATTACH_ALLOW;
	item_KQ300_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ300_3:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ300_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ5002_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ5002_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ5004:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ400_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ400_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ700_3:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ700_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KS_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQ_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSa_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQa_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSb_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQb_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ800_3:			return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1A4_CANNOT_ATTACH_OTHER);
}

// KEIKYU CONSIST GROUP 2 (2, 3 and 4-cars; for 3, 4, 6 and 8 car trains) //

switch(FEAT_TRAINS, SELF, sw_KQ_GROUP_2, vehicle_type_id) { 
	item_KQ700_4:			return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KS_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQ_2:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSa_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQa_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSb_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQb_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ800_3:			return CB_RESULT_ATTACH_ALLOW;
	item_KQ1500KS_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1500KQ_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ20003_4:			return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_3KS_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_3KQ_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_2KS_4:		return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_2KQ_4:		return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ2_CANNOT_ATTACH_OTHER);
}

//-----------------------------------------------------------------------------------------------------------------------------


// TRAINS //

// Keikyu Type 1 //

// Keikyu Type 1, graphics //

spriteset (KQ1, "gfx/Keikyu/1/KQ1.png") { tmpl_vehicle_6_length(0,0) }
spriteset (KQ1_purchase, "gfx/Keikyu/1/KQ1.png") { tmpl_purchase(0, 30) }

switch(FEAT_TRAINS, SELF, sw_KQ1, position_in_consist) {
	KQ1;
}

// Keikyu Type 1, callbacks //

switch(FEAT_TRAINS, SELF, sw_KQ1_start_stop, num_vehs_in_consist) {
	1: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 1, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ1_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1_start_sound, param_sound_effect) {
	1: sw_KQ1_start_sound_1;
	2: sw_KQ1_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 1, 1 car item //

item(FEAT_TRAINS, item_KQ1) {
	property {
		name:							string(STR_KQ1_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1904, 1, 1);
		model_life:						29;
		retire_early:					12;
		vehicle_life:					16;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					13;
		running_cost_factor:			13;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		cargo_capacity:					param_capacities_1;
		weight:							25 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							6;
	}
	graphics {
		default:						sw_KQ1;
		purchase:						KQ1_purchase;
		start_stop:						sw_KQ1_start_stop;
		purchase_running_cost_factor:	return (60 + ((param_capacities_1 * 1)/10));
		can_attach_wagon:				return string(STR_KQ_CANNOT_ATTACH_OTHER);
		additional_text:				return string(STR_KQ1_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1_effect;
		sound_effect:					sw_KQ1_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 26 //

// Keikyu Type 26, graphics //

spriteset (KQ26, "gfx/Keikyu/26/KQ26.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KQ26_purchase, "gfx/Keikyu/26/KQ26.png") { tmpl_purchase(0,30) }

switch(FEAT_TRAINS, SELF, sw_KQ26, position_in_consist) {
	KQ26;
}

// Keikyu Type 26, callbacks //

switch(FEAT_TRAINS, SELF, sw_KQ26_start_stop, num_vehs_in_consist) {
	1: return CB_RESULT_NO_TEXT;	
	return string(STR_KQ1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ26_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 26, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ26_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ26_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ26_start_sound, param_sound_effect) {
	1: sw_KQ26_start_sound_1;
	2: sw_KQ26_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 26, item //

item(FEAT_TRAINS, item_KQ26) {
	property {
		name:							string(STR_KQ26_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1911, 1, 1);
		model_life:						36;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					14;
		running_cost_factor:			14;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							60 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		cargo_capacity:					param_capacities_2;
		weight:							29 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}
	graphics {
		default:						sw_KQ26;
		purchase:						KQ26_purchase;
		start_stop:						sw_KQ26_start_stop;
		purchase_running_cost_factor:	return (60 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				return string(STR_KQ_CANNOT_ATTACH_OTHER);
		additional_text:				return string(STR_KQ26_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ26_effect;
		sound_effect:					sw_KQ26_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 29 //

// Keikyu Type 29, graphics //

spriteset (KQ29, "gfx/Keikyu/29/KQ29.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KQ29_purchase, "gfx/Keikyu/29/KQ29.png") { tmpl_purchase(0,30) }

switch(FEAT_TRAINS, SELF, sw_KQ29, position_in_consist) {
	KQ29;
}

// Keikyu Type 29, callbacks //

switch(FEAT_TRAINS, SELF, sw_KQ29_start_stop, num_vehs_in_consist) {
	1: return CB_RESULT_NO_TEXT;
	return string(STR_KQ29_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ29_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 29, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ29_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ29_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ29_start_sound, param_sound_effect) {
	1: sw_KQ29_start_sound_1;
	2: sw_KQ29_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 29, item //

item(FEAT_TRAINS, item_KQ29) {
	property {
		name:							string(STR_KQ29_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1913, 1, 1);
		model_life:						38;
		retire_early:					18;
		vehicle_life:					22;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					16;
		running_cost_factor:			16;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		cargo_capacity:					param_capacities_2;
		weight:							32 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}	
	graphics {
		default:						sw_KQ29;
		purchase:						KQ29_purchase;
		start_stop:						sw_KQ29_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				return string(STR_KQ_CANNOT_ATTACH_OTHER);
		additional_text:				return string(STR_KQ29_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ29_effect;
		sound_effect:					sw_KQ29_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 41/51 //

// Keikyu Type 41/51, graphics //

spriteset (KQ51_1_front, "gfx/Keikyu/51/KQ51-1.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KQ51_1_purchase, "gfx/Keikyu/51/KQ51-1.png") { tmpl_purchase(0,30) }
spriteset (KQ51_2_front_white, "gfx/Keikyu/51/KQ51-2.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KQ51_2_front_red, "gfx/Keikyu/51/KQ51-2.png") { tmpl_vehicle_7_length(0,30) }
spriteset (KQ51_2_back_white, "gfx/Keikyu/51/KQ51-2.png") { tmpl_vehicle_7_length(0,60) }
spriteset (KQ51_2_back_red, "gfx/Keikyu/51/KQ51-2.png") { tmpl_vehicle_7_length(0,90) }
spriteset (KQ51_2_purchase, "gfx/Keikyu/51/KQ51-2.png") { tmpl_purchase(0,120) }
spriteset (KQ51_3_front_white, "gfx/Keikyu/51/KQ51-3.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KQ51_3_front_red, "gfx/Keikyu/51/KQ51-3.png") { tmpl_vehicle_7_length(0,30) }
spriteset (KQ51_3_back_white, "gfx/Keikyu/51/KQ51-3.png") { tmpl_vehicle_7_length(0,60) }
spriteset (KQ51_3_back_red, "gfx/Keikyu/51/KQ51-3.png") { tmpl_vehicle_7_length(0,90) }
spriteset (KQ51_3_purchase, "gfx/Keikyu/51/KQ51-3.png") { tmpl_purchase(0,120) }

switch(FEAT_TRAINS, SELF, KQ51_1, position_in_consist) {
	KQ51_1_front;
}

switch(FEAT_TRAINS, SELF, KQ51_2, position_in_consist % 4) {
	0:	KQ51_2_front_white;
	1:	KQ51_2_back_red;
	2:	KQ51_2_back_white;
	KQ51_2_front_red;
}

switch(FEAT_TRAINS, SELF, KQ51_3, position_in_consist % 4) {
	0:	KQ51_3_front_white;
	1:	KQ51_3_back_red;
	2:	KQ51_3_back_white;
	KQ51_3_front_red;
}

switch(FEAT_TRAINS, PARENT, sw_KQ51, date_of_last_service) {
	0 .. date (1948, 1, 1): KQ51_1;
	date (1948, 1, 2) .. date (1962, 1, 1): KQ51_2;
	KQ51_3;
}

switch(FEAT_TRAINS, PARENT, KQ51_purchase, date_of_last_service) {
	0 .. date (1948, 1, 1): KQ51_1_purchase;
	date (1948, 1, 2) .. date (1962, 1, 1): KQ51_2_purchase;
	KQ51_3_purchase;
}

// Keikyu Type 41/51, callbacks //

switch(FEAT_TRAINS, SELF, sw_KQ51_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ51_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ51_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 41/51, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ51_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ51_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ51_start_sound, param_sound_effect) {
	1: sw_KQ51_start_sound_1;
	2: sw_KQ51_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 41/51, item //

item(FEAT_TRAINS, item_KQ51) {
	property {
		name:							string(STR_KQ51_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1922, 1, 1);
		model_life:						44;
		retire_early:					24;
		vehicle_life:					28;
		reliability_decay:				70;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					16;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		cargo_capacity:					param_capacities_2;
		weight:							33 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}	
	graphics {
		default:						sw_KQ51;
		purchase:						KQ51_purchase;
		start_stop:						sw_KQ51_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A1;
		additional_text:				return string(STR_KQ51_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ51_effect;
		sound_effect:					sw_KQ51_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type DE1 //

// Keikyu Type DE1, graphics //

spriteset (KQDE1_1_front_1_white, "gfx/Keikyu/DE1/KQDE1-1.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQDE1_1_front_1_red, "gfx/Keikyu/DE1/KQDE1-1.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQDE1_1_front_2_white, "gfx/Keikyu/DE1/KQDE1-1.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQDE1_1_front_2_red, "gfx/Keikyu/DE1/KQDE1-1.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQDE1_1_purchase, "gfx/Keikyu/DE1/KQDE1-1.png") { tmpl_purchase(0,120) }
spriteset (KQDE1_2_front_1_white, "gfx/Keikyu/DE1/KQDE1-2.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQDE1_2_front_1_red, "gfx/Keikyu/DE1/KQDE1-2.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQDE1_2_front_2_white, "gfx/Keikyu/DE1/KQDE1-2.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQDE1_2_front_2_red, "gfx/Keikyu/DE1/KQDE1-2.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQDE1_2_purchase, "gfx/Keikyu/DE1/KQDE1-2.png") { tmpl_purchase(0,120) }
spriteset (KQDE1_3_front_1_white, "gfx/Keikyu/DE1/KQDE1-3.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQDE1_3_front_1_red, "gfx/Keikyu/DE1/KQDE1-3.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQDE1_3_front_2_white, "gfx/Keikyu/DE1/KQDE1-3.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQDE1_3_front_2_red, "gfx/Keikyu/DE1/KQDE1-3.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQDE1_3_purchase, "gfx/Keikyu/DE1/KQDE1-3.png") { tmpl_purchase(0,120) }

switch(FEAT_TRAINS, SELF, KQDE1_1_forward, position_in_consist % 2) {
	0:	KQDE1_1_front_1_white;
	KQDE1_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_1_reverse, position_in_consist % 2) {
	0:	KQDE1_1_front_2_white;
	KQDE1_1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_1, extra_callback_info1) {
	1: KQDE1_1_reverse;
	KQDE1_1_forward;
}

switch(FEAT_TRAINS, SELF, KQDE1_2_forward, position_in_consist % 2) {
	0:	KQDE1_2_front_1_white;
	KQDE1_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_2_reverse, position_in_consist % 2) {
	0:	KQDE1_2_front_2_white;
	KQDE1_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_2, extra_callback_info1) {
	1: KQDE1_2_reverse;
	KQDE1_2_forward;
}

switch(FEAT_TRAINS, SELF, KQDE1_3_forward, position_in_consist % 2) {
	0:	KQDE1_3_front_1_white;
	KQDE1_3_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_3_reverse, position_in_consist % 2) {
	0:	KQDE1_3_front_2_white;
	KQDE1_3_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQDE1_3, extra_callback_info1) {
	1: KQDE1_3_reverse;
	KQDE1_3_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQDE1, date_of_last_service) {
	0 .. date (1948, 1, 1): KQDE1_1;
	date (1948, 1, 2) .. date (1962, 1, 1): KQDE1_2;
	KQDE1_3;
}

switch(FEAT_TRAINS, PARENT, KQDE1_purchase, date_of_last_service) {
	0 .. date (1948, 1, 1): KQDE1_1_purchase;
	date (1948, 1, 2) .. date (1962, 1, 1): KQDE1_2_purchase;
	KQDE1_3_purchase;
}

// Keikyu Type DE1, callbacks //

switch(FEAT_TRAINS, SELF, sw_KQDE1_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;	
	return string(STR_KQ1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQDE1_effect, position_in_consist % 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type DE1, sounds //

switch(FEAT_TRAINS, SELF, sw_KQDE1_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQDE1_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQDE1_start_sound, param_sound_effect) {
	1: sw_KQDE1_start_sound_1;
	2: sw_KQDE1_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type DE1, item //

item(FEAT_TRAINS, item_KQDE1) {
	property {
		name:							string(STR_KQDE1_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1930, 1, 1);
		model_life:						48;
		retire_early:					30;
		vehicle_life:					34;
		reliability_decay:				90;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					18;
		running_cost_factor:			35;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							80 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		cargo_capacity:					param_capacities_2;
		weight:							30 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}
	graphics {
		default:						sw_KQDE1;
		purchase:						KQDE1_purchase;
		start_stop:						sw_KQDE1_start_stop;
		purchase_running_cost_factor:	return (80 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A1;
		additional_text:				return string(STR_KQDE1_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQDE1_effect;
		sound_effect:					sw_KQDE1_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu m/400 Type, 1st Series //

// Keikyu 300/400 Type, 1st Series, graphics //

spriteset (KQ300_0_middle_1, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQ300_0_middle_2a, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQ300_0_middle_2b, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQ300_0_front_1_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQ300_0_front_1_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,120) }
spriteset (KQ300_0_front_2_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,150) }
spriteset (KQ300_0_front_2_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,180) }
spriteset (KQ300_0_front_3_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,210) }
spriteset (KQ300_0_front_3_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,240) }
spriteset (KQ300_0_front_4_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,270) }
spriteset (KQ300_0_front_4_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,300) }
spriteset (KQ300_0_front_5_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,330) }
spriteset (KQ300_0_front_5_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,360) }
spriteset (KQ300_0_front_6_white, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,390) }
spriteset (KQ300_0_front_6_red, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_vehicle_8_length(0,420) }
spriteset (KQ300_0_purchase, "gfx/Keikyu/300-400/KQ300-0.png") { tmpl_purchase(0,450) }
spriteset (KQ300_1_middle_1, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQ300_1_middle_2a, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQ300_1_middle_2b, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQ300_1_front_1_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQ300_1_front_1_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,120) }
spriteset (KQ300_1_front_2_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,150) }
spriteset (KQ300_1_front_2_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,180) }
spriteset (KQ300_1_front_3_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,210) }
spriteset (KQ300_1_front_3_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,240) }
spriteset (KQ300_1_front_4_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,270) }
spriteset (KQ300_1_front_4_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,300) }
spriteset (KQ300_1_front_5_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,330) }
spriteset (KQ300_1_front_5_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,360) }
spriteset (KQ300_1_front_6_white, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,390) }
spriteset (KQ300_1_front_6_red, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_vehicle_8_length(0,420) }
spriteset (KQ300_1_purchase, "gfx/Keikyu/300-400/KQ300-1.png") { tmpl_purchase(0,450) }
spriteset (KQ300_2_middle_1, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQ300_2_middle_2a, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQ300_2_middle_2b, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQ300_2_front_1_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQ300_2_front_1_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,120) }
spriteset (KQ300_2_front_2_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,150) }
spriteset (KQ300_2_front_2_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,180) }
spriteset (KQ300_2_front_3_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,210) }
spriteset (KQ300_2_front_3_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,240) }
spriteset (KQ300_2_front_4_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,270) }
spriteset (KQ300_2_front_4_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,300) }
spriteset (KQ300_2_front_5_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,330) }
spriteset (KQ300_2_front_5_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,360) }
spriteset (KQ300_2_front_6_white, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,390) }
spriteset (KQ300_2_front_6_red, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_vehicle_8_length(0,420) }
spriteset (KQ300_2_purchase, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_purchase(0,450) }
spriteset (KQ300_invisible, "gfx/Keikyu/300-400/KQ300-2.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KQ300_0_2_1_forward, position_in_consist % 2) {
	0:	KQ300_0_front_1_white;
	KQ300_0_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ300_0_2_1_reverse, position_in_consist % 2) {
	0:	KQ300_0_front_3_white;
	KQ300_0_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_0_2_1, extra_callback_info1) {
	1:	KQ300_0_2_1_reverse;
	KQ300_0_2_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_0_2_2_forward, position_in_consist % 2) {
	0:	KQ300_0_front_5_white;
	KQ300_0_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ300_0_2_2_reverse, position_in_consist % 2) {
	0:	KQ300_0_front_6_white;
	KQ300_0_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ300_0_2_2, extra_callback_info1) {
	1:	KQ300_0_2_2_reverse;
	KQ300_0_2_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ300_0_2) {
	1:	KQ300_0_2_1;
	1:	KQ300_0_2_2;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_1_forward, position_in_consist % 2) {
	0:	KQ300_1_front_1_white;
	KQ300_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_1_reverse, position_in_consist % 2) {
	0:	KQ300_1_front_3_white;
	KQ300_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_1, extra_callback_info1) {
	1:	KQ300_1_2_1_reverse;
	KQ300_1_2_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_2_forward, position_in_consist % 2) {
	0:	KQ300_1_front_5_white;
	KQ300_1_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_2_reverse, position_in_consist % 2) {
	0:	KQ300_1_front_6_white;
	KQ300_1_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_2_2, extra_callback_info1) {
	1:	KQ300_1_2_2_reverse;
	KQ300_1_2_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ300_1_2) {
	1:	KQ300_1_2_1;
	1:	KQ300_1_2_2;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_1_forward, position_in_consist % 2) {
	0:	KQ300_2_front_1_white;
	KQ300_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_1_reverse, position_in_consist % 2) {
	0:	KQ300_2_front_3_white;
	KQ300_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_1, extra_callback_info1) {
	1:	KQ300_2_2_1_reverse;
	KQ300_2_2_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_2_forward, position_in_consist % 2) {
	0:	KQ300_2_front_5_white;
	KQ300_2_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_2_reverse, position_in_consist % 2) {
	0:	KQ300_2_front_6_white;
	KQ300_2_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_2_2, extra_callback_info1) {
	1:	KQ300_2_2_2_reverse;
	KQ300_2_2_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ300_2_2) {
	1:	KQ300_2_2_1;
	1:	KQ300_2_2_2;
}

switch(FEAT_TRAINS, PARENT, sw_KQ300_2, date_of_last_service) {
	0 .. date (1948, 1, 1): KQ300_0_2;
	date (1948, 1, 2) .. date (1958, 1, 1): KQ300_1_2;
	KQ300_2_2;
}

switch(FEAT_TRAINS, SELF, KQ300_1_3_forward, position_in_consist % 4) {
	0:	KQ300_1_front_1_white;
	1:	KQ300_1_middle_2a;
	2:	KQ300_invisible;
	KQ300_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_3_reverse, position_in_consist % 4) {
	0:	KQ300_1_front_2_white;
	1:	KQ300_1_middle_2b;
	2:	KQ300_invisible;
	KQ300_1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_3, extra_callback_info1) {
	1:	KQ300_1_3_reverse;
	KQ300_1_3_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_2_3_forward, position_in_consist % 4) {
	0:	KQ300_2_front_1_white;
	1:	KQ300_2_middle_2a;
	2:	KQ300_invisible;
	KQ300_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_3_reverse, position_in_consist % 4) {
	0:	KQ300_1_front_2_white;
	1:	KQ300_2_middle_2b;
	2:	KQ300_invisible;
	KQ300_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_3, extra_callback_info1) {
	1:	KQ300_2_3_reverse;
	KQ300_2_3_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ300_3, date_of_last_service) {
	0 .. date (1958, 1, 1): KQ300_1_3;
	KQ300_2_3;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_3_shorten, position_in_consist % 4) {
	1:	return 7;
	2:	return 1;
	return 8;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_1_forward, position_in_consist % 4) {
	0:	KQ300_1_front_5_white;
	1:	KQ300_1_middle_1;
	2:	KQ300_1_middle_1;
	KQ300_1_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_1_reverse, position_in_consist % 4) {
	0:	KQ300_1_front_6_white;
	1:	KQ300_1_middle_1;
	2:	KQ300_1_middle_1;
	KQ300_1_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_1, extra_callback_info1) {
	1:	KQ300_1_4_1_reverse;
	KQ300_1_4_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_2_forward, position_in_consist % 4) {
	0:	KQ300_1_front_1_white;
	1:	KQ300_1_middle_2a;
	2:	KQ300_1_middle_2b;
	KQ300_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_2_reverse, position_in_consist % 4) {
	0:	KQ300_1_front_2_white;
	1:	KQ300_1_middle_2b;
	2:	KQ300_1_middle_2a;
	KQ300_1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ300_1_4_2, extra_callback_info1) {
	1:	KQ300_1_4_2_reverse;
	KQ300_1_4_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ300_1_4) {
	1:	KQ300_1_4_1;
	1:	KQ300_1_4_2;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_1_forward, position_in_consist % 4) {
	0:	KQ300_2_front_5_white;
	1:	KQ300_2_middle_1;
	2:	KQ300_2_middle_1;
	KQ300_2_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_1_reverse, position_in_consist % 4) {
	0:	KQ300_2_front_6_white;
	1:	KQ300_2_middle_1;
	2:	KQ300_2_middle_1;
	KQ300_2_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_1, extra_callback_info1) {
	1:	KQ300_2_4_1_reverse;
	KQ300_2_4_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_2_forward, position_in_consist % 4) {
	0:	KQ300_2_front_1_white;
	1:	KQ300_2_middle_2a;
	2:	KQ300_2_middle_2b;
	KQ300_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_2_reverse, position_in_consist % 4) {
	0:	KQ300_2_front_2_white;
	1:	KQ300_2_middle_2b;
	2:	KQ300_2_middle_2a;
	KQ300_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ300_2_4_2, extra_callback_info1) {
	1:	KQ300_2_4_2_reverse;
	KQ300_2_4_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ300_2_4) {
	1:	KQ300_2_4_1;
	1:	KQ300_2_4_2;
}

switch(FEAT_TRAINS, PARENT, sw_KQ300_4, date_of_last_service) {
	0 .. date (1958, 1, 1): KQ300_1_4;
	KQ300_2_4;
}

switch(FEAT_TRAINS, PARENT, KQ300_purchase, date_of_last_service) {
	0 .. date (1958, 1, 1): KQ300_1_purchase;
	KQ300_2_purchase;
}

// Keikyu 300/400 Type, 1st Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ300_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ300_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ300_3_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ300_3;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ300_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ300_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ300_3_start_stop, num_vehs_in_consist) {
	1 .. 16: return CB_RESULT_NO_TEXT;
	return string(STR_KQ300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ300_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_3_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu 300/400 Type, 1st Series, sound //

switch(FEAT_TRAINS, SELF, sw_KQ300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ300_start_sound, param_sound_effect) {
	1: sw_KQ300_start_sound_1;
	2: sw_KQ300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 300/400 Type, 1st Series, item //

item(FEAT_TRAINS, item_KQ300_2) {
	property {
		name:							string(STR_KQ300_2_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1942, 1, 1);
		model_life:						30;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					27;
		running_cost_factor:			33;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							300 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							31 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ300_2;
		purchase:						KQ300_purchase;
		articulated_part:				sw_KQ300_2_articulated_part;
		start_stop:						sw_KQ300_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A2;
		additional_text:				return string(STR_KQ300_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ300_2_effect;
		sound_effect:					sw_KQ300_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ300_3) {
	property {
		name:							string(STR_KQ300_3_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1948, 1, 1);
		model_life:						20;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					32;
		running_cost_factor:			33;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							450 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							31 * 3 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ300_3;
		purchase:						KQ300_purchase;
		articulated_part:				sw_KQ300_3_articulated_part;
		start_stop:						sw_KQ300_3_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 3)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		length:							sw_KQ300_3_shorten;
		additional_text:				return string(STR_KQ300_3_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ300_3_effect;
		sound_effect:					sw_KQ300_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ300_4) {
	property {
		name:							string(STR_KQ300_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1958, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					42;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							31 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ300_4;
		purchase:						KQ300_purchase;
		articulated_part:				sw_KQ300_4_articulated_part;
		start_stop:						sw_KQ300_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ300_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ300_4_effect;
		sound_effect:					sw_KQ300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 500 Type, 2 doors //

// Keikyu 500 Type, 2 doors, graphics //

spriteset (KQ5002_1_middle_1, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ5002_1_middle_2a, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ5002_1_middle_2b, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ5002_1_front_1_white, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ5002_1_front_1_red, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ5002_1_front_2_white, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ5002_1_front_2_red, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ5002_1_front_3_white, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ5002_1_front_3_red, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ5002_1_front_4_white, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ5002_1_front_4_red, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ5002_1_purchase, "gfx/Keikyu/500/KQ5002D-1.png") { tmpl_purchase(0, 330) }
spriteset (KQ5002_2_middle_1, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ5002_2_middle_2a, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ5002_2_middle_2b, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ5002_2_front_1_white, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ5002_2_front_1_red, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ5002_2_front_2_white, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ5002_2_front_2_red, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ5002_2_front_3_white, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ5002_2_front_3_red, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ5002_2_front_4_white, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ5002_2_front_4_red, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ5002_2_purchase, "gfx/Keikyu/500/KQ5002D-2.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, KQ5002_2_1_forward, position_in_consist % 2) {
	0:	KQ5002_1_front_3_white;
	KQ5002_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ5002_2_1_reverse, position_in_consist % 2) {
	0:	KQ5002_1_front_4_white;
	KQ5002_1_front_3_red;
}

switch(FEAT_TRAINS, SELF, KQ5002_2_1, extra_callback_info1) {
	1:	KQ5002_2_1_reverse;
	KQ5002_2_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ5002_2_2_forward, position_in_consist % 2) {
	0:	KQ5002_2_front_3_white;
	KQ5002_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ5002_2_2_reverse, position_in_consist % 2) {
	0:	KQ5002_2_front_4_white;
	KQ5002_2_front_3_red;
}

switch(FEAT_TRAINS, SELF, KQ5002_2_2, extra_callback_info1) {
	1:	KQ5002_2_2_reverse;
	KQ5002_2_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ5002_2, date_of_last_service) {
	0 .. date (1965, 1, 1): KQ5002_2_1;
	KQ5002_2_2;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_1_forward, position_in_consist % 4) {
	0:	KQ5002_1_front_3_white;
	3:	KQ5002_1_front_4_red;
	KQ5002_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_1_reverse, position_in_consist % 4) {
	0:	KQ5002_1_front_4_white;
	3:	KQ5002_1_front_3_red;
	KQ5002_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_1, extra_callback_info1) {
	1:	KQ5002_4_1_reverse;
	KQ5002_4_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_2_forward, position_in_consist % 4) {
	0:	KQ5002_2_front_3_white;
	3:	KQ5002_2_front_4_red;
	KQ5002_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_2_reverse, position_in_consist % 4) {
	0:	KQ5002_2_front_4_white;
	3:	KQ5002_2_front_3_red;
	KQ5002_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ5002_4_2, extra_callback_info1) {
	1:	KQ5002_4_2_reverse;
	KQ5002_4_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ5002_4, date_of_last_service) {
	0 .. date (1965, 1, 1): KQ5002_4_1;
	KQ5002_4_2;
}

switch(FEAT_TRAINS, PARENT, KQ5002_purchase, date_of_last_service) {
	0 .. date (1965, 1, 1): KQ5002_1_purchase;
	KQ5002_2_purchase;
}

// Keikyu 500 Type, 2 doors, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ5002_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ5002_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ5002_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ5002_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ5002_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ5002_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ5002_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ5002_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// 500 Type, 2 doors, sound //

switch(FEAT_TRAINS, SELF, sw_KQ5002_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ5002_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ5002_start_sound, param_sound_effect) {
	1: sw_KQ5002_start_sound_1;
	2: sw_KQ5002_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 500 Type, 2 doors, item //

item(FEAT_TRAINS, item_KQ5002_2) {
	property {
		name:							string(STR_KQ5002_2_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1951, 1, 1);
		model_life:						22;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					25;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							460 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							30 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ5002_2;
		purchase:						KQ5002_purchase;
		articulated_part:				sw_KQ5002_2_articulated_part;
		start_stop:						sw_KQ5002_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_4 * 2)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A2;
		additional_text:				return string(STR_KQ5002_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ5002_2_effect;
		sound_effect:					sw_KQ5002_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ5002_4) {
	property {
		name:							string(STR_KQ5002_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1956, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					45;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							920 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ5002_4;
		purchase:						KQ5002_purchase;
		articulated_part:				sw_KQ5002_4_articulated_part;
		start_stop:						sw_KQ5002_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_4 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ5002_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ5002_4_effect;
		sound_effect:					sw_KQ5002_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 600 Type 1st/2nd Series, 700 Type 1st Series //

// Keikyu 600 Type 1st/2nd Series, 700 Type 1st Series, graphics //

spriteset (KQ600_1_middle_1, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ600_1_middle_2a, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ600_1_middle_2b, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ600_1_front_1_white, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ600_1_front_1_red, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ600_1_front_2_white, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ600_1_front_2_red, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ600_1_front_3_white, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ600_1_front_3_red, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ600_1_front_4_white, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ600_1_front_4_red, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ600_1_purchase, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_purchase(0, 330) }
spriteset (KQ600_2_middle_1, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ600_2_middle_2a, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ600_2_middle_2b, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ600_2_front_1_white, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ600_2_front_1_red, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ600_2_front_2_white, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ600_2_front_2_red, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ600_2_front_3_white, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ600_2_front_3_red, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ600_2_front_4_white, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ600_2_front_4_red, "gfx/Keikyu/600-1&2/KQ600-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ600_2_purchase, "gfx/Keikyu/600-1&2/KQ600-1.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, KQ600_1_2_forward, position_in_consist % 2) {
	0:	KQ600_1_front_1_white;
	KQ600_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ600_1_2_reverse, position_in_consist % 2) {
	0:	KQ600_1_front_3_red;
	KQ600_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ600_1_2, extra_callback_info1) {
	1:	KQ600_1_2_reverse;
	KQ600_1_2_forward;
}

switch(FEAT_TRAINS, SELF, KQ600_2_2_forward, position_in_consist % 2) {
	0:	KQ600_2_front_1_white;
	KQ600_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ600_2_2_reverse, position_in_consist % 2) {
	0:	KQ600_2_front_3_red;
	KQ600_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ600_2_2, extra_callback_info1) {
	1:	KQ600_2_2_reverse;
	KQ600_2_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ600_2, date_of_last_service) {
	0 .. date (1971, 1, 1): KQ600_1_2;
	KQ600_2_2;
}

switch(FEAT_TRAINS, SELF, KQ600_1_4_forward, position_in_consist % 4) {
	0:	KQ600_1_front_1_white;
	1:	KQ600_1_middle_2a;
	2:	KQ600_1_middle_1;
	KQ600_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ600_1_4_reverse, position_in_consist % 4) {
	0:	KQ600_1_front_3_red;
	1:	KQ600_1_middle_1;
	2:	KQ600_1_middle_2b;
	KQ600_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ600_1_4, extra_callback_info1) {
	1:	KQ600_1_4_reverse;
	KQ600_1_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ600_2_4_forward, position_in_consist % 4) {
	0:	KQ600_2_front_1_white;
	1:	KQ600_2_middle_2a;
	2:	KQ600_2_middle_1;
	KQ600_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ600_2_4_reverse, position_in_consist % 4) {
	0:	KQ600_2_front_3_red;
	1:	KQ600_2_middle_1;
	2:	KQ600_2_middle_2b;
	KQ600_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ600_2_4, extra_callback_info1) {
	1:	KQ600_2_4_reverse;
	KQ600_2_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ600_4, date_of_last_service) {
	0 .. date (1971, 1, 1): KQ600_1_4;
	KQ600_2_4;
}

switch(FEAT_TRAINS, PARENT, KQ600_purchase, date_of_last_service) {
	0 .. date (1971, 1, 1): KQ600_1_purchase;
	KQ600_2_purchase;
}

// Keikyu 600 Type 1st/2nd Series, 700 Type 1st Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ600_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ600_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ600_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ600_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ600_effect, position_in_consist & 2) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu 600 Type 1st/2nd Series, 700 Type 1st Series, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ600_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_start_sound, param_sound_effect) {
	1: sw_KQ600_start_sound_1;
	2: sw_KQ600_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 600 Type 1st/2nd Series, 700 Type 1st Series, item //

item(FEAT_TRAINS, item_KQ600_2) {
	property {
		name:							string(STR_KQ600_2_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1956, 1, 1);
		model_life:						34;
		retire_early:					12;
		vehicle_life:					16;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					27;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ600_2;
		purchase:						KQ600_purchase;
		articulated_part:				sw_KQ600_2_articulated_part;
		start_stop:						sw_KQ600_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_4 * 2)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A2;
		additional_text:				return string(STR_KQ600_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_effect;
		sound_effect:					sw_KQ600_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ600_4) {
	property {
		name:							string(STR_KQ600_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1966, 1, 1);
		model_life:						24;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					37;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ600_4;
		purchase:						KQ600_purchase;
		articulated_part:				sw_KQ600_4_articulated_part;
		start_stop:						sw_KQ600_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_4 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ600_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_effect;
		sound_effect:					sw_KQ600_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 1000 Type, 1st Series (old) //

// Keikyu 1000 Type, 1st Series (old), graphics //

spriteset (KQ1000_1_original_middle_1, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_1_original_middle_2a, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_1_original_middle_2b, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_1_original_front_1_white, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_1_original_front_1_red, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_1_original_front_2_white, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_1_original_front_2_red, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_1_original_front_3_white, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1000_1_original_front_3_red, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1000_1_original_front_4_white, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1000_1_original_front_4_red, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1000_1_original_purchase, "gfx/Keikyu/1000-1/KQ1000-1-original.png") { tmpl_purchase(0, 330) }
spriteset (KQ1000_1_renewal_middle_1, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_1_renewal_middle_2a, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_1_renewal_middle_2b, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_1_renewal_front_1_white, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_1_renewal_front_1_red, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_1_renewal_front_2_white, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_1_renewal_front_2_red, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_1_renewal_front_3_white, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1000_1_renewal_front_3_red, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1000_1_renewal_front_4_white, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1000_1_renewal_front_4_red, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1000_1_renewal_purchase, "gfx/Keikyu/1000-1/KQ1000-1-renewal.png") { tmpl_purchase(0, 330) }
spriteset (KQ1000_1_aircon1_middle_1, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_1_aircon1_middle_2a, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_1_aircon1_middle_2b, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_1_aircon1_front_1_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_1_aircon1_front_1_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_1_aircon1_front_2_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_1_aircon1_front_2_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_1_aircon1_front_3_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1000_1_aircon1_front_3_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1000_1_aircon1_front_4_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1000_1_aircon1_front_4_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1000_1_aircon1_purchase, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_purchase(0, 330) }
spriteset (KQ1000_1_aircon2_middle_1, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_1_aircon2_middle_2a, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_1_aircon2_middle_2b, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_1_aircon2_front_1_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_1_aircon2_front_1_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_1_aircon2_front_2_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_1_aircon2_front_2_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_1_aircon2_front_3_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1000_1_aircon2_front_3_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1000_1_aircon2_front_4_white, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1000_1_aircon2_front_4_red, "gfx/Keikyu/1000-1/KQ1000-1-aircon2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1000_1_invisible, "gfx/Keikyu/1000-1/KQ1000-1-aircon1.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KQ1000_1_2_original_forward, position_in_consist % 2) {
	0: KQ1000_1_original_front_1_white;
	KQ1000_1_original_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_original_reverse, position_in_consist % 2) {
	0: KQ1000_1_original_front_2_white;
	KQ1000_1_original_front_3_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_original, extra_callback_info1) {
	1: KQ1000_1_2_original_reverse;
	KQ1000_1_2_original_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_renewal_forward, position_in_consist % 2) {
	0: KQ1000_1_renewal_front_1_white;
	KQ1000_1_renewal_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_renewal_reverse, position_in_consist % 2) {
	0: KQ1000_1_renewal_front_2_white;
	KQ1000_1_renewal_front_3_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_renewal, extra_callback_info1) {
	1: KQ1000_1_2_renewal_reverse;
	KQ1000_1_2_renewal_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_aircon1_forward, position_in_consist % 2) {
	0: KQ1000_1_aircon1_front_1_white;
	KQ1000_1_aircon1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_aircon1_reverse, position_in_consist % 2) {
	0: KQ1000_1_aircon1_front_2_white;
	KQ1000_1_aircon1_front_3_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_2_aircon1, extra_callback_info1) {
	1: KQ1000_1_2_aircon1_reverse;
	KQ1000_1_2_aircon1_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1000_1_2, date_of_last_service) {
	0 .. date (1973, 1, 1): KQ1000_1_2_original;
	date (1973, 1, 2) .. date (1982, 1, 1): KQ1000_1_2_renewal;
	KQ1000_1_2_aircon1;
}

switch(FEAT_TRAINS, PARENT, KQ1000_1_2_purchase, date_of_last_service) {
	0 .. date (1973, 1, 1): KQ1000_1_original_purchase;
	date (1973, 1, 2) .. date (1982, 1, 1): KQ1000_1_renewal_purchase;
	KQ1000_1_aircon1_purchase;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_original_forward, position_in_consist % 4) {
	0:	KQ1000_1_original_front_1_white;
	1:	KQ1000_1_original_middle_2a;
	2:	KQ1000_1_original_middle_2b;
	KQ1000_1_original_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_original_reverse, position_in_consist % 4) {
	0:	KQ1000_1_original_front_2_white;
	1:	KQ1000_1_original_middle_2b;
	2:	KQ1000_1_original_middle_2a;
	KQ1000_1_original_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_original, extra_callback_info1) {
	1: KQ1000_1_4_original_reverse;
	KQ1000_1_4_original_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_renewal_forward, position_in_consist % 4) {
	0:	KQ1000_1_renewal_front_1_white;
	1:	KQ1000_1_renewal_middle_2a;
	2:	KQ1000_1_renewal_middle_2b;
	KQ1000_1_renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_renewal_reverse, position_in_consist % 4) {
	0:	KQ1000_1_renewal_front_2_white;
	1:	KQ1000_1_renewal_middle_2b;
	2:	KQ1000_1_renewal_middle_2a;
	KQ1000_1_renewal_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_renewal, extra_callback_info1) {
	1: KQ1000_1_4_renewal_reverse;
	KQ1000_1_4_renewal_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon1_forward, position_in_consist % 4) {
	0:	KQ1000_1_aircon1_front_1_white;
	1:	KQ1000_1_aircon1_middle_2a;
	2:	KQ1000_1_aircon1_middle_2b;
	KQ1000_1_aircon1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon1_reverse, position_in_consist % 4) {
	0:	KQ1000_1_aircon1_front_2_white;
	1:	KQ1000_1_aircon1_middle_2b;
	2:	KQ1000_1_aircon1_middle_2a;
	KQ1000_1_aircon1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon1, extra_callback_info1) {
	1: KQ1000_1_4_aircon1_reverse;
	KQ1000_1_4_aircon1_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon2_forward, position_in_consist % 4) {
	0:	KQ1000_1_aircon2_front_1_white;
	1:	KQ1000_1_aircon2_middle_2a;
	2:	KQ1000_1_aircon2_middle_2b;
	KQ1000_1_aircon2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon2_reverse, position_in_consist % 4) {
	0:	KQ1000_1_aircon2_front_2_white;
	1:	KQ1000_1_aircon2_middle_2b;
	2:	KQ1000_1_aircon2_middle_2a;
	KQ1000_1_aircon2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_4_aircon2, extra_callback_info1) {
	1: KQ1000_1_4_aircon2_reverse;
	KQ1000_1_4_aircon2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ1000_1_4_aircon) {
	1: KQ1000_1_4_aircon1;
	1: KQ1000_1_4_aircon2;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1000_1a_4, date_of_last_service) {
	0 .. date (1973, 1, 1): KQ1000_1_4_original;
	date (1973, 1, 2) .. date (1982, 1, 1): KQ1000_1_4_renewal;
	KQ1000_1_4_aircon;
}

switch(FEAT_TRAINS, PARENT, KQ1000_1_4_purchase, date_of_last_service) {
	0 .. date (1973, 1, 1): KQ1000_1_original_purchase;
	date (1973, 1, 2) .. date (1982, 1, 1): KQ1000_1_renewal_purchase;
	KQ1000_1_aircon1_purchase;
}

random_switch(FEAT_TRAINS, PARENT, sw_KQ1000_1b_4) {
	1:	KQ1000_1_4_aircon1;
	1:	KQ1000_1_4_aircon2;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_original_forward, position_in_consist % 8) {
	0: KQ1000_1_original_front_1_white;
	1: KQ1000_1_original_middle_2a;
	2: KQ1000_1_original_middle_1;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_original_middle_2a;
	6: KQ1000_1_original_middle_1;
	KQ1000_1_original_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_original_reverse, position_in_consist % 8) {
	0: KQ1000_1_original_front_3_white;
	1: KQ1000_1_original_middle_1;
	2: KQ1000_1_original_middle_2b;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_original_middle_1;
	6: KQ1000_1_original_middle_2b;
	KQ1000_1_original_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_original, extra_callback_info1) {
	1: KQ1000_1_6_original_reverse;
	KQ1000_1_6_original_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_renewal_forward, position_in_consist % 8) {
	0: KQ1000_1_renewal_front_1_white;
	1: KQ1000_1_renewal_middle_2a;
	2: KQ1000_1_renewal_middle_1;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_renewal_middle_2a;
	6: KQ1000_1_renewal_middle_1;
	KQ1000_1_renewal_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_renewal_reverse, position_in_consist % 8) {
	0: KQ1000_1_renewal_front_3_white;
	1: KQ1000_1_renewal_middle_1;
	2: KQ1000_1_renewal_middle_2b;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_renewal_middle_1;
	6: KQ1000_1_renewal_middle_2b;
	KQ1000_1_renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_renewal, extra_callback_info1) {
	1: KQ1000_1_6_renewal_reverse;
	KQ1000_1_6_renewal_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_aircon1_forward, position_in_consist % 8) {
	0: KQ1000_1_aircon1_front_1_white;
	1: KQ1000_1_aircon1_middle_2a;
	2: KQ1000_1_aircon1_middle_1;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_aircon1_middle_2a;
	6: KQ1000_1_aircon1_middle_1;
	KQ1000_1_aircon1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_aircon1_reverse, position_in_consist % 8) {
	0: KQ1000_1_aircon1_front_3_white;
	1: KQ1000_1_aircon1_middle_1;
	2: KQ1000_1_aircon1_middle_2b;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_aircon1_middle_1;
	6: KQ1000_1_aircon1_middle_2b;
	KQ1000_1_aircon1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6a, extra_callback_info1) {
	1: KQ1000_1_6_aircon1_reverse;
	KQ1000_1_6_aircon1_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_aircon2_forward, position_in_consist % 8) {
	0: KQ1000_1_aircon2_front_1_white;
	1: KQ1000_1_aircon2_middle_2a;
	2: KQ1000_1_aircon2_middle_1;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_aircon2_middle_2a;
	6: KQ1000_1_aircon2_middle_1;
	KQ1000_1_aircon2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6_aircon2_reverse, position_in_consist % 8) {
	0: KQ1000_1_aircon2_front_3_white;
	1: KQ1000_1_aircon2_middle_1;
	2: KQ1000_1_aircon2_middle_2b;
	3: KQ1000_1_invisible;
	4: KQ1000_1_invisible;
	5: KQ1000_1_aircon2_middle_1;
	6: KQ1000_1_aircon2_middle_2b;
	KQ1000_1_aircon2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_6b, extra_callback_info1) {
	1: KQ1000_1_6_aircon2_reverse;
	KQ1000_1_6_aircon2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ1000_1_6_aircon) {
	1: KQ1000_1_6a;
	1: KQ1000_1_6b;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1000_1_6, date_of_last_service) {
	0 .. date (1975, 1, 1): KQ1000_1_6_original;
	date (1975, 1, 2) .. date (1988, 1, 1): KQ1000_1_6_renewal;
	KQ1000_1_6_aircon;
}

switch(FEAT_TRAINS, PARENT, KQ1000_1_6_purchase, date_of_last_service) {
	0 .. date (1975, 1, 1): KQ1000_1_original_purchase;
	date (1975, 1, 2) .. date (1988, 1, 1): KQ1000_1_renewal_purchase;
	KQ1000_1_aircon1_purchase;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_6_shorten, position_in_consist % 8) {
	2:	return 7;
	3:	return 1;
	4:	return 1;
	5:	return 7;
	return 8;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8_aircon1_forward, position_in_consist % 8) {
	0: KQ1000_1_aircon1_front_1_white;
	1: KQ1000_1_aircon1_middle_2a;
	2: KQ1000_1_aircon1_middle_1;
	3: KQ1000_1_aircon1_middle_2a;
	4: KQ1000_1_aircon1_middle_1;
	5: KQ1000_1_aircon1_middle_2a;
	6: KQ1000_1_aircon1_middle_1;
	KQ1000_1_aircon1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8_aircon1_reverse, position_in_consist % 8) {
	0: KQ1000_1_aircon1_front_3_white;
	1: KQ1000_1_aircon1_middle_1;
	2: KQ1000_1_aircon1_middle_2b;
	3: KQ1000_1_aircon1_middle_1;
	4: KQ1000_1_aircon1_middle_2b;
	5: KQ1000_1_aircon1_middle_1;
	6: KQ1000_1_aircon1_middle_2b;
	KQ1000_1_aircon1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8a, extra_callback_info1) {
	1: KQ1000_1_8_aircon1_reverse;
	KQ1000_1_8_aircon1_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8_aircon2_forward, position_in_consist % 8) {
	0: KQ1000_1_aircon2_front_1_white;
	1: KQ1000_1_aircon2_middle_2a;
	2: KQ1000_1_aircon2_middle_1;
	3: KQ1000_1_aircon2_middle_2a;
	4: KQ1000_1_aircon2_middle_1;
	5: KQ1000_1_aircon2_middle_2a;
	6: KQ1000_1_aircon2_middle_1;
	KQ1000_1_aircon2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8_aircon2_reverse, position_in_consist % 8) {
	0: KQ1000_1_aircon2_front_3_white;
	1: KQ1000_1_aircon2_middle_1;
	2: KQ1000_1_aircon2_middle_2b;
	3: KQ1000_1_aircon2_middle_1;
	4: KQ1000_1_aircon2_middle_2b;
	5: KQ1000_1_aircon2_middle_1;
	6: KQ1000_1_aircon2_middle_2b;
	KQ1000_1_aircon2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8b, extra_callback_info1) {
	1: KQ1000_1_8_aircon2_reverse;
	KQ1000_1_8_aircon2_forward;
}

random_switch(FEAT_TRAINS, PARENT, sw_KQ1000_1_8) {
	1: KQ1000_1_8a;
	1: KQ1000_1_8b;
}

switch(FEAT_TRAINS, SELF, KQ1000_1_8_purchase, extra_callback_info1) {
	KQ1000_1_aircon1_purchase;
}

// Keikyu 1000 Type, 1st Series (old), callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KS_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ1000_1KS_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQ_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ1000_1KQ_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSa_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_1KSa_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQa_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_1KQa_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSb_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_1KSb_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQb_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_1KQb_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSa_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KSa_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQa_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KQa_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSb_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KSb_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQb_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KQb_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSa_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KSa_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQa_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KQa_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KSb_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KSb_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_1KQb_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_1KQb_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1KS_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1000_1KS_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1KQ_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1000_1KQ_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_2_can_attach_wagon, vehicle_type_id) {
	item_KQ1000_1KS_2: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQ_2: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1000_1_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1KS_4_can_attach_wagon, vehicle_type_id) {
	item_KQ1000_1KS_2: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQ_2: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSa_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQa_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KSb_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_1KQb_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1000_1_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1KS_6_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ2_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1KS_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ2_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_2_effect, position_in_consist & 2) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_6_effect, position_in_consist & 8) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1_8_effect, position_in_consist & 8) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu 1000 Type, 1st Series (old), sound //

switch(FEAT_TRAINS, SELF, sw_KQ1000_1a_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1a_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1a_start_sound, param_sound_effect) {
	1: sw_KQ1000_1a_start_sound_1;
	2: sw_KQ1000_1a_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1b_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1b_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_1b_start_sound, param_sound_effect) {
	1: sw_KQ1000_1b_start_sound_1;
	2: sw_KQ1000_1b_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 1000 Type, 1st Series (old), item //

item(FEAT_TRAINS, item_KQ1000_1KS_2) {
	property {
		name:							string(STR_KQ1000_1KS_2_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1973, 1, 1);
		model_life:						36;
		retire_early:					16;
		vehicle_life:					20;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					31;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_2;
		purchase:						KQ1000_1_2_purchase;
		articulated_part:				sw_KQ1000_1KS_2_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KQ1000_1_2_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_1KSa_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_2_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQ_2) {
	property {
		name:							string(STR_KQ1000_1KQ_2_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1960, 1, 1);
		model_life:						44;
		retire_early:					21;
		vehicle_life:					25;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					31;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_2;
		purchase:						KQ1000_1_2_purchase;
		articulated_part:				sw_KQ1000_1KQ_2_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A2;
		additional_text:				return string(STR_KQ1000_1KQa_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_2_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KSa_4) {
	property {
		name:							string(STR_KQ1000_1KSa_4_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1972, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}

	graphics {
		default:						sw_KQ1000_1a_4;
		purchase:						KQ1000_1_4_purchase;
		articulated_part:				sw_KQ1000_1KSa_4_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ1000_1KS_4_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_1KSa_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_4_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}


item(FEAT_TRAINS, item_KQ1000_1KQa_4) {
	property {
		name:							string(STR_KQ1000_1KQa_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1960, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1a_4;
		purchase:						KQ1000_1_4_purchase;
		articulated_part:				sw_KQ1000_1KQa_4_articulated_part;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		start_stop:						sw_KQ1000_1KQ_start_stop;
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ1000_1KQa_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_4_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KSb_4) {
	property {
		name:							string(STR_KQ1000_1KSb_4_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1988, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1b_4;
		purchase:						KQ1000_1_4_purchase;
		articulated_part:				sw_KQ1000_1KSb_4_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ1000_1KS_4_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_1KSb_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_4_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQb_4) {
	property {
		name:							string(STR_KQ1000_1KQb_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1988, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1b_4;
		purchase:						KQ1000_1_4_purchase;
		articulated_part:				sw_KQ1000_1KQb_4_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1000_1KQb_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_4_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}
item(FEAT_TRAINS, item_KQ1000_1KSa_6) {
	property {
		name:							string(STR_KQ1000_1KSa_6_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1976, 1, 1);
		model_life:						12;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}

	graphics {
		default:						sw_KQ1000_1_6;
		purchase:						KQ1000_1_6_purchase;
		articulated_part:				sw_KQ1000_1KSa_6_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ1000_1KS_6_can_attach_wagon;
		length:							sw_KQ1000_1_6_shorten;
		additional_text:				return string(STR_KQ1000_1KSa_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_6_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQa_6) {
	property {
		name:							string(STR_KQ1000_1KQa_6_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1976, 1, 1);
		model_life:						12;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							33 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}

	graphics {
		default:						sw_KQ1000_1_6;
		purchase:						KQ1000_1_6_purchase;
		articulated_part:				sw_KQ1000_1KQa_6_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		length:							sw_KQ1000_1_6_shorten;
		additional_text:				return string(STR_KQ1000_1KQa_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_6_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KSb_6) {
	property {
		name:							string(STR_KQ1000_1KSb_6_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2280 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_6;
		purchase:						KQ1000_1_6_purchase;
		articulated_part:				sw_KQ1000_1KSb_6_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ1000_1KS_6_can_attach_wagon;
		length:							sw_KQ1000_1_6_shorten;
		additional_text:				return string(STR_KQ1000_1KSb_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_6_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQb_6) {
	property {
		name:							string(STR_KQ1000_1KQb_6_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2280 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_6;
		purchase:						KQ1000_1_6_purchase;
		articulated_part:				sw_KQ1000_1KQb_6_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		length:							sw_KQ1000_1_6_shorten;
		additional_text:				return string(STR_KQ1000_1KQb_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_6_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KSa_8) {
	property {
		name:							string(STR_KQ1000_1KSa_8_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1976, 1, 1);
		model_life:						12;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}

	graphics {
		default:						sw_KQ1000_1_8;
		purchase:						KQ1000_1_8_purchase;
		articulated_part:				sw_KQ1000_1KSa_8_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ1000_1KS_8_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_1KSa_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_8_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQa_8) {
	property {
		name:							string(STR_KQ1000_1KQa_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1976, 1, 1);
		model_life:						12;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_8;
		purchase:						KQ1000_1_8_purchase;
		articulated_part:				sw_KQ1000_1KQa_8_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ1000_1KQa_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_8_effect;
		sound_effect:					sw_KQ1000_1a_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KSb_8) {
	property {
		name:							string(STR_KQ1000_1KSb_8_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_8;
		purchase:						KQ1000_1_8_purchase;
		articulated_part:				sw_KQ1000_1KSb_8_articulated_part;
		start_stop:						sw_KQ1000_1KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ1000_1KS_8_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_1KSb_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_8_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_1KQb_8) {
	property {
		name:							string(STR_KQ1000_1KQb_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_1_8;
		purchase:						KQ1000_1_8_purchase;
		articulated_part:				sw_KQ1000_1KQb_8_articulated_part;
		start_stop:						sw_KQ1000_1KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1000_1KQb_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_1_8_effect;
		sound_effect:					sw_KQ1000_1b_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 400 Type, 2nd Series //

// Keikyu 400 Type, 2nd Series, graphics //

spriteset (KQ400_middle_1, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,0) }
spriteset (KQ400_middle_2a, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,30) }
spriteset (KQ400_middle_2b, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,60) }
spriteset (KQ400_front_1_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,90) }
spriteset (KQ400_front_1_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,120) }
spriteset (KQ400_front_2_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,150) }
spriteset (KQ400_front_2_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,180) }
spriteset (KQ400_front_3_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,210) }
spriteset (KQ400_front_3_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,240) }
spriteset (KQ400_front_4_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,270) }
spriteset (KQ400_front_4_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,300) }
spriteset (KQ400_front_5_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,330) }
spriteset (KQ400_front_5_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,360) }
spriteset (KQ400_front_6_white, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,390) }
spriteset (KQ400_front_6_red, "gfx/Keikyu/300-400/KQ400.png") { tmpl_vehicle_8_length(0,420) }
spriteset (KQ400_purchase, "gfx/Keikyu/300-400/KQ400.png") { tmpl_purchase(0,450) }

switch(FEAT_TRAINS, SELF, KQ400_2_1_forward, position_in_consist % 2) {
	0:	KQ400_front_1_white;
	KQ400_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ400_2_1_reverse, position_in_consist % 2) {
	0:	KQ400_front_3_white;
	KQ400_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ400_2_1, extra_callback_info1) {
	1:	KQ400_2_1_reverse;
	KQ400_2_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ400_2_2_forward, position_in_consist % 2) {
	0:	KQ400_front_5_white;
	KQ400_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ400_2_2_reverse, position_in_consist % 2) {
	0:	KQ400_front_6_white;
	KQ400_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ400_2_2, extra_callback_info1) {
	1:	KQ400_2_2_reverse;
	KQ400_2_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, sw_KQ400_2) {
	1:	KQ400_2_1;
	1:	KQ400_2_2;
}

switch(FEAT_TRAINS, SELF, KQ400_4_1_forward, position_in_consist % 4) {
	0:	KQ400_front_5_white;
	1:	KQ400_middle_1;
	2:	KQ400_middle_1;
	KQ400_front_6_red;
}

switch(FEAT_TRAINS, SELF, KQ400_4_1_reverse, position_in_consist % 4) {
	0:	KQ400_front_6_white;
	1:	KQ400_middle_1;
	2:	KQ400_middle_1;
	KQ400_front_5_red;
}

switch(FEAT_TRAINS, SELF, KQ400_4_1, extra_callback_info1) {
	1:	KQ400_4_1_reverse;
	KQ400_4_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ400_4_2_forward, position_in_consist % 4) {
	0:	KQ400_front_1_white;
	1:	KQ400_middle_2a;
	2:	KQ400_middle_2b;
	KQ400_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ400_4_2_reverse, position_in_consist % 4) {
	0:	KQ400_front_2_white;
	1:	KQ400_middle_2b;
	2:	KQ400_middle_2a;
	KQ400_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ400_4_2, extra_callback_info1) {
	1:	KQ400_4_2_reverse;
	KQ400_4_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, sw_KQ400_4) {
	1:	KQ400_4_1;
	1:	KQ400_4_2;
}

// Keikyu 400 Type, 2nd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ400_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KQ400_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ400_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ400_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ400_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ400_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ400_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ400_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu 400 Type, 2nd Series, sound //

switch(FEAT_TRAINS, SELF, sw_KQ400_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ400_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ400_start_sound, param_sound_effect) {
	1: sw_KQ400_start_sound_1;
	2: sw_KQ400_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 400 Type, 2nd Series, item //

item(FEAT_TRAINS, item_KQ400_2) {
	property {
		name:							string(STR_KQ400_2_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1965, 1, 1);
		model_life:						24;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					27;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							460 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ400_2;
		purchase:						KQ400_purchase;
		articulated_part:				sw_KQ400_2_articulated_part;
		start_stop:						sw_KQ400_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A2;
		additional_text:				return string(STR_KQ400_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ400_2_effect;
		sound_effect:					sw_KQ400_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ400_4) {
	property {
		name:							string(STR_KQ400_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1965, 1, 1);
		model_life:						24;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							920 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ400_4;
		purchase:						KQ400_purchase;
		articulated_part:				sw_KQ400_4_articulated_part;
		start_stop:						sw_KQ400_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ400_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ400_4_effect;
		sound_effect:					sw_KQ400_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 700 Type, 2nd Series //

// Keikyu 700 Type, 2nd Series, graphics //

spriteset (KQ700_1_middle_1, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ700_1_front_1_white, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ700_1_front_1_red, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ700_1_front_2_white, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ700_1_front_2_red, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ700_1_purchase, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_purchase(0, 150) }
spriteset (KQ700_2_middle_1, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ700_2_front_1_white, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ700_2_front_1_red, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ700_2_front_2_white, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ700_2_front_2_red, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ700_2_purchase, "gfx/Keikyu/700-2/KQ700-2-2.png") { tmpl_purchase(0, 150) }
spriteset (KQ700_invisible, "gfx/Keikyu/700-2/KQ700-2-1.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KQ700_1_3_forward, position_in_consist % 4) {
	0:	KQ700_1_front_1_white;
	2:	KQ700_invisible;
	3:	KQ700_1_front_2_red;
	KQ700_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_1_3_reverse, position_in_consist % 4) {
	0:	KQ700_1_front_2_white;
	2:	KQ700_invisible;
	3:	KQ700_1_front_1_red;
	KQ700_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_1_3, extra_callback_info1) {
	1:	KQ700_1_3_reverse;
	KQ700_1_3_forward;
}

switch(FEAT_TRAINS, SELF, KQ700_2_3_forward, position_in_consist % 4) {
	0:	KQ700_2_front_1_white;
	2:	KQ700_invisible;
	3:	KQ700_2_front_2_red;
	KQ700_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_2_3_reverse, position_in_consist % 4) {
	0:	KQ700_2_front_2_white;
	2:	KQ700_invisible;
	3:	KQ700_2_front_1_red;
	KQ700_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_2_3, extra_callback_info1) {
	1:	KQ700_2_3_reverse;
	KQ700_2_3_forward;
}

switch(FEAT_TRAINS, SELF, sw_KQ700_3_shorten, position_in_consist % 4) {
	1:	return 7;
	2:	return 1;
	return 8;
}

switch(FEAT_TRAINS, PARENT, sw_KQ700_3, date_of_last_service) {
	0 .. date (1980, 1, 1): KQ700_1_3;
	KQ700_2_3;
}

switch(FEAT_TRAINS, PARENT, KQ700_3_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KQ700_1_purchase;
	KQ700_2_purchase;
}

switch(FEAT_TRAINS, SELF, KQ700_1_4_forward, position_in_consist % 4) {
	0:	KQ700_1_front_1_white;
	3:	KQ700_1_front_2_red;
	KQ700_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_1_4_reverse, position_in_consist % 4) {
	0:	KQ700_1_front_2_white;
	3:	KQ700_1_front_1_red;
	KQ700_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_1_4, extra_callback_info1) {
	1:	KQ700_1_4_reverse;
	KQ700_1_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ700_2_4_forward, position_in_consist % 4) {
	0:	KQ700_2_front_1_white;
	3:	KQ700_2_front_2_red;
	KQ700_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_2_4_reverse, position_in_consist % 4) {
	0:	KQ700_2_front_2_white;
	3:	KQ700_2_front_1_red;
	KQ700_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ700_2_4, extra_callback_info1) {
	1:	KQ700_2_4_reverse;
	KQ700_2_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ700_4, date_of_last_service) {
	0 .. date (1980, 1, 1): KQ700_1_4;
	KQ700_2_4;
}

switch(FEAT_TRAINS, PARENT, KQ700_4_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KQ700_1_purchase;
	KQ700_2_purchase;
}


// Keikyu 700 Type, 2nd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ700_3_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ700_3;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ700_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ700_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ700_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ700_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ700_3_start_stop, num_vehs_in_consist) {
	1 .. 16: return CB_RESULT_NO_TEXT;
	return string(STR_KQ700_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ700_3_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ700_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu 700 Type, 2nd Series, sounds //

switch(FEAT_TRAINS, SELF, sw_KQ700_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ700_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ700_start_sound, param_sound_effect) {
	1: sw_KQ700_start_sound_1;
	2: sw_KQ700_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 700 Type, 2nd Series, item //

item(FEAT_TRAINS, item_KQ700_3) {
	property {
		name:							string(STR_KQ700_3_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1967, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					36;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							900 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							31 * 3 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ700_3;
		purchase:						KQ700_3_purchase;
		articulated_part:				sw_KQ700_3_articulated_part;
		start_stop:						sw_KQ700_3_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 3)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		length:							sw_KQ700_3_shorten;
		additional_text:				return string(STR_KQ700_3_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ700_3_effect;
		sound_effect:					sw_KQ700_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ700_4) {
	property {
		name:							string(STR_KQ700_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1971, 1, 1);
		model_life:						34;
		retire_early:					15;
		vehicle_life:					19;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							31 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ700_4;
		purchase:						KQ700_4_purchase;
		articulated_part:				sw_KQ700_4_articulated_part;
		start_stop:						sw_KQ700_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ700_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ700_4_effect;
		sound_effect:					sw_KQ700_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 500 Type, 4 doors //

// Keikyu 500 Type, 4 doors, graphics //

spriteset (KQ5004_middle_1, "gfx/Keikyu/500/KQ5004D.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ5004_front_1_white, "gfx/Keikyu/500/KQ5004D.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ5004_front_1_red, "gfx/Keikyu/500/KQ5004D.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ5004_front_2_white, "gfx/Keikyu/500/KQ5004D.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ5004_front_2_red, "gfx/Keikyu/500/KQ5004D.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ5004_purchase, "gfx/Keikyu/500/KQ5004D.png") { tmpl_purchase(0, 150) }

switch(FEAT_TRAINS, SELF, KQ5004_forward, position_in_consist % 4) {
	0:	KQ5004_front_1_white;
	3:	KQ5004_front_2_red;
	KQ5004_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ5004_reverse, position_in_consist % 4) {
	0:	KQ5004_front_2_white;
	3:	KQ5004_front_1_red;
	KQ5004_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_KQ5004, extra_callback_info1) {
	1:	KQ5004_reverse;
	KQ5004_forward;
}

// Keikyu 500 Type, 2 doors, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ5004_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ5004;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ5004_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ5004_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ5004_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// 500 Type, 2 doors, sound //

switch(FEAT_TRAINS, SELF, sw_KQ5004_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ5004_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ5004_start_sound, param_sound_effect) {
	1: sw_KQ5004_start_sound_1;
	2: sw_KQ5004_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 500 Type, 4 doors, item //

item(FEAT_TRAINS, item_KQ5004) {
	property {
		name:							string(STR_KQ5004_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1968, 1, 1);
		model_life:						18;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_4D; 
		cost_factor:					38;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							105 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ5004;
		purchase:						KQ5004_purchase;
		articulated_part:				sw_KQ5004_articulated_part;
		start_stop:						sw_KQ5004_start_stop;
		purchase_running_cost_factor:	return (105 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_1A4;
		additional_text:				return string(STR_KQ5004_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ5004_effect;
		sound_effect:					sw_KQ5004_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu 800 Type //

// Keikyu 800 Type, graphics //

spriteset (KQ800_1_middle_1, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ800_1_middle_2, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ800_1_front_1_white, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ800_1_front_1_red, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ800_1_front_2_white, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ800_1_front_2_red, "gfx/Keikyu/800/KQ800-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ800_1_purchase, "gfx/Keikyu/800/KQ800-1.png") { tmpl_purchase(0, 180) }
spriteset (KQ800_2_middle_1, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ800_2_middle_2, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ800_2_front_1_white, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ800_2_front_1_red, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ800_2_front_2_white, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ800_2_front_2_red, "gfx/Keikyu/800/KQ800-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ800_2_purchase, "gfx/Keikyu/800/KQ800-2.png") { tmpl_purchase(0, 180) }
spriteset (KQ800_invisible, "gfx/Keikyu/800/KQ800-1.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KQ800_1_3_forward, position_in_consist % 4) {
	0:	KQ800_1_front_1_white;
	1:	KQ800_1_middle_2;
	2:	KQ800_1_front_2_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_1_3_reverse, position_in_consist % 4) {
	0:	KQ800_1_front_2_white;
	1:	KQ800_1_middle_2;
	2:	KQ800_1_front_1_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_1_3, extra_callback_info1) {
	1:	KQ800_1_3_reverse;
	KQ800_1_3_forward;
}

switch(FEAT_TRAINS, SELF, KQ800_2_3_forward, position_in_consist % 4) {
	0:	KQ800_2_front_1_white;
	1:	KQ800_2_middle_2;
	2:	KQ800_2_front_2_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_2_3_reverse, position_in_consist % 4) {
	0:	KQ800_2_front_2_white;
	1:	KQ800_2_middle_2;
	2:	KQ800_2_front_1_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_2_3, extra_callback_info1) {
	1:	KQ800_2_3_reverse;
	KQ800_2_3_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ800_3, date_of_last_service) {
	0 .. date (1986, 1, 1): KQ800_1_3;
	KQ800_2_3;
}

switch(FEAT_TRAINS, PARENT, KQ800_3_purchase, date_of_last_service) {
	0 .. date (1986, 1, 1): KQ800_1_purchase;
	KQ800_2_purchase;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_3_shorten, position_in_consist % 4) {
	1:	return 7;
	2:	return 1;
	return 8;
}

switch(FEAT_TRAINS, SELF, KQ800_1_6_forward, position_in_consist % 8) {
	0:	KQ800_1_front_1_white;
	1:	KQ800_1_middle_2;
	3:	KQ800_1_middle_1;
	4:	KQ800_1_middle_1;
	5:	KQ800_1_middle_2;
	7:	KQ800_1_front_2_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_1_6_reverse, position_in_consist % 8) {
	0:	KQ800_1_front_2_white;
	1:	KQ800_1_middle_2;
	3:	KQ800_1_middle_1;
	4:	KQ800_1_middle_1;
	5:	KQ800_1_middle_2;
	7:	KQ800_1_front_1_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_1_6, extra_callback_info1) {
	1:	KQ800_1_6_reverse;
	KQ800_1_6_forward;
}

switch(FEAT_TRAINS, SELF, KQ800_2_6_forward, position_in_consist % 8) {
	0:	KQ800_2_front_1_white;
	1:	KQ800_2_middle_2;
	3:	KQ800_2_middle_1;
	4:	KQ800_2_middle_1;
	5:	KQ800_2_middle_2;
	7:	KQ800_2_front_2_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_2_6_reverse, position_in_consist % 8) {
	0:	KQ800_2_front_2_white;
	1:	KQ800_2_middle_2;
	3:	KQ800_2_middle_1;
	4:	KQ800_2_middle_1;
	5:	KQ800_2_middle_2;
	7:	KQ800_2_front_1_red;
	KQ800_invisible;
}

switch(FEAT_TRAINS, SELF, KQ800_2_6, extra_callback_info1) {
	1:	KQ800_2_6_reverse;
	KQ800_2_6_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ800_6, date_of_last_service) {
	0 .. date (1986, 1, 1): KQ800_1_6;
	KQ800_2_6;
}

switch(FEAT_TRAINS, PARENT, KQ800_6_purchase, date_of_last_service) {
	0 .. date (1986, 1, 1): KQ800_1_purchase;
	KQ800_2_purchase;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_6_shorten, position_in_consist % 8) {
	1:	return 7;
	2:	return 1;
	5:	return 7;
	6:	return 1;
	return 8;
}

// Keikyu 800 Type, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ800_3_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ800_3;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ800_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ800_6;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_start_stop, num_vehs_in_consist) {
	1 .. 16: return CB_RESULT_NO_TEXT;
	return string(STR_KQ800_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ800_3_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_6_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// 800 Type, sound //

switch(FEAT_TRAINS, SELF, sw_KQ800_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ800_start_sound, param_sound_effect) {
	1: sw_KQ800_start_sound_1;
	2: sw_KQ800_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu 800 Type, item //

item(FEAT_TRAINS, item_KQ800_3) {
	property {
		name:							string(STR_KQ800_3_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1978, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_4D; 
		cost_factor:					32;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 3 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ800_3;
		purchase:						KQ800_3_purchase;
		articulated_part:				sw_KQ800_3_articulated_part;
		start_stop:						sw_KQ800_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 3)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		length:							sw_KQ800_3_shorten;
		additional_text:				return string(STR_KQ800_3_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ800_3_effect;
		sound_effect:					sw_KQ800_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ800_6) {
	property {
		name:							string(STR_KQ800_6_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1982, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_4D; 
		cost_factor:					47;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ800_6;
		purchase:						KQ800_6_purchase;
		articulated_part:				sw_KQ800_6_articulated_part;
		start_stop:						sw_KQ800_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		length:							sw_KQ800_6_shorten;
		additional_text:				return string(STR_KQ800_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ800_6_effect;
		sound_effect:					sw_KQ800_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 2000, 2 doors //

// Keikyu Type 2000, 2 doors, graphics //

spriteset (KQ20002_middle_1, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ20002_middle_2, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ20002_front_1_white, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ20002_front_1_red, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ20002_front_2_white, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ20002_front_2_red, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ20002_purchase, "gfx/Keikyu/2000/KQ2000-1.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, KQ20002_forward, position_in_consist % 8) {
	0:	KQ20002_front_1_white;
	1:	KQ20002_middle_2;
	6:	KQ20002_middle_2;
	7:	KQ20002_front_2_red;
	KQ20002_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ20002_reverse, position_in_consist % 8) {
	0:	KQ20002_front_2_white;
	1:	KQ20002_middle_2;
	6:	KQ20002_middle_2;
	7:	KQ20002_front_1_red;
	KQ20002_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_KQ20002, extra_callback_info1) {
	1:	KQ20002_reverse;
	KQ20002_forward;
}

// Keikyu Type 2000, 2 doors, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ20002_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ20002;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ20002_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ20002_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ20002_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 2000, 2 doors, sound //

switch(FEAT_TRAINS, SELF, sw_KQ20002_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ20002_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ20002_start_sound, param_sound_effect) {
	1: sw_KQ20002_start_sound_1;
	2: sw_KQ20002_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 2000, 2 doors, item //

item(FEAT_TRAINS, item_KQ20002) {
	property {
		name:							string(STR_KQ20002_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1982, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					80;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ20002;
		purchase:						KQ20002_purchase;
		articulated_part:				sw_KQ20002_articulated_part;
		start_stop:						sw_KQ20002_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_4 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ20002_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ20002_effect;
		sound_effect:					sw_KQ20002_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 1500 //

// Keikyu Type 1500, graphics //

spriteset (KQ1500_1_middle_1, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1500_1_middle_2, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1500_1_middle_3a, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1500_1_middle_3b, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1500_1_front_1_white, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1500_1_front_1_red, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1500_1_front_2_white, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1500_1_front_2_red, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1500_1_front_3_white, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1500_1_front_3_red, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1500_1_front_4_white, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1500_1_front_4_red, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KQ1500_1_purchase, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_purchase(0, 360) }
spriteset (KQ1500_2_middle_1, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1500_2_middle_2, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1500_2_middle_3a, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1500_2_middle_3b, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1500_2_front_1_white, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1500_2_front_1_red, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1500_2_front_2_white, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1500_2_front_2_red, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1500_2_front_3_white, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ1500_2_front_3_red, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ1500_2_front_4_white, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ1500_2_front_4_red, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KQ1500_2_purchase, "gfx/Keikyu/1500/KQ1500-2.png") { tmpl_purchase(0, 360) }
spriteset (KQ1500_invisible, "gfx/Keikyu/1500/KQ1500-1.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KQ1500_1_4_forward, position_in_consist % 4) {
	0:	KQ1500_1_front_1_white;
	1:	KQ1500_1_middle_2;
	2:	KQ1500_1_middle_1;
	KQ1500_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_4_reverse, position_in_consist % 4) {
	0:	KQ1500_1_front_3_white;
	1:	KQ1500_1_middle_1;
	2:	KQ1500_1_middle_2;
	KQ1500_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_4, extra_callback_info1) {
	1:	KQ1500_1_4_reverse;
	KQ1500_1_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_4_forward, position_in_consist % 4) {
	0:	KQ1500_1_front_1_white;
	1:	KQ1500_1_middle_3a;
	2:	KQ1500_1_middle_1;
	KQ1500_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_4_reverse, position_in_consist % 4) {
	0:	KQ1500_1_front_3_white;
	1:	KQ1500_1_middle_1;
	2:	KQ1500_1_middle_3b;
	KQ1500_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_4, extra_callback_info1) {
	1:	KQ1500_2_4_reverse;
	KQ1500_2_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_4_forward, position_in_consist % 4) {
	0:	KQ1500_2_front_1_white;
	1:	KQ1500_2_middle_3a;
	2:	KQ1500_2_middle_1;
	KQ1500_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_4_reverse, position_in_consist % 4) {
	0:	KQ1500_2_front_3_white;
	1:	KQ1500_2_middle_1;
	2:	KQ1500_2_middle_3b;
	KQ1500_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_4, extra_callback_info1) {
	1:	KQ1500_3_4_reverse;
	KQ1500_3_4_forward;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_4, date_of_last_service) {
	0 .. date (1989, 1, 1): KQ1500_1_4;
	date (1989, 1, 2) .. date (2001, 1, 1): KQ1500_2_4;
	KQ1500_3_4;
}

switch(FEAT_TRAINS, SELF, KQ1500_4_purchase, date_of_last_service) {
	0 .. date (1989, 1, 1): KQ1500_1_purchase;
	KQ1500_2_purchase;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_6_forward, position_in_consist % 8) {
	0:	KQ1500_1_front_1_white;
	1:	KQ1500_1_middle_3a;
	2:	KQ1500_1_middle_1;
	3:	KQ1500_1_middle_3a;
	4:	KQ1500_invisible;
	5:	KQ1500_1_middle_1;
	6:	KQ1500_invisible;
	KQ1500_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_6_reverse, position_in_consist % 8) {
	0:	KQ1500_1_front_3_white;
	1:	KQ1500_1_middle_1;
	2:	KQ1500_1_middle_3b;
	3:	KQ1500_1_middle_1;
	4:	KQ1500_invisible;
	5:	KQ1500_1_middle_3b;
	6:	KQ1500_invisible;
	KQ1500_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_6, extra_callback_info1) {
	1:	KQ1500_1_6_reverse;
	KQ1500_1_6_forward;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_6_forward, position_in_consist % 8) {
	0:	KQ1500_2_front_1_white;
	1:	KQ1500_2_middle_3a;
	2:	KQ1500_2_middle_1;
	3:	KQ1500_2_middle_3a;
	4:	KQ1500_invisible;
	5:	KQ1500_2_middle_1;
	6:	KQ1500_invisible;
	KQ1500_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_6_reverse, position_in_consist % 8) {
	0:	KQ1500_2_front_3_white;
	1:	KQ1500_2_middle_1;
	2:	KQ1500_2_middle_3b;
	3:	KQ1500_2_middle_1;
	4:	KQ1500_invisible;
	5:	KQ1500_2_middle_3b;
	6:	KQ1500_invisible;
	KQ1500_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_6, extra_callback_info1) {
	1:	KQ1500_2_6_reverse;
	KQ1500_2_6_forward;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_6_forward, position_in_consist % 8) {
	0:	KQ1500_2_front_1_white;
	1:	KQ1500_2_middle_2;
	2:	KQ1500_2_middle_1;
	3:	KQ1500_2_middle_3a;
	4:	KQ1500_invisible;
	5:	KQ1500_2_middle_1;
	6:	KQ1500_invisible;
	KQ1500_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_6_reverse, position_in_consist % 8) {
	0:	KQ1500_2_front_3_white;
	1:	KQ1500_2_middle_1;
	2:	KQ1500_2_middle_3b;
	3:	KQ1500_2_middle_1;
	4:	KQ1500_invisible;
	5:	KQ1500_2_middle_2;
	6:	KQ1500_invisible;
	KQ1500_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_3_6, extra_callback_info1) {
	1:	KQ1500_3_6_reverse;
	KQ1500_3_6_forward;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_6_shorten, position_in_consist % 8) {
	3:	return	7;
	4:	return	1;
	5:	return	7;
	6:	return	1;
	return	8;
}	

switch(FEAT_TRAINS, PARENT, sw_KQ1500_6, date_of_last_service) {
	0 .. date (2002, 1, 1): KQ1500_1_6;
	date (2002, 1, 2) .. date (2010, 1, 1): KQ1500_2_6;
	KQ1500_3_6;
}

switch(FEAT_TRAINS, PARENT, KQ1500_6_purchase, date_of_last_service) {
	0 .. date (2002, 1, 1): KQ1500_1_purchase;
	KQ1500_2_purchase;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_8_forward, position_in_consist % 8) {
	0:	KQ1500_1_front_1_white;
	1:	KQ1500_1_middle_3a;
	2:	KQ1500_1_middle_1;
	3:	KQ1500_1_middle_2;
	4:	KQ1500_1_middle_1;
	5:	KQ1500_1_middle_1;	
	6:	KQ1500_1_middle_1;
	KQ1500_1_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_8_reverse, position_in_consist % 8) {
	0:	KQ1500_1_front_3_white;
	1:	KQ1500_1_middle_1;
	2:	KQ1500_1_middle_1;
	3:	KQ1500_1_middle_1;
	4:	KQ1500_1_middle_2;
	5:	KQ1500_1_middle_1;
	6:	KQ1500_1_middle_3b;
	KQ1500_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_1_8, extra_callback_info1) {
	1:	KQ1500_1_8_reverse;
	KQ1500_1_8_forward;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_8_forward, position_in_consist % 8) {
	0:	KQ1500_2_front_1_white;
	1:	KQ1500_2_middle_3a;
	2:	KQ1500_2_middle_1;
	3:	KQ1500_2_middle_2;
	4:	KQ1500_2_middle_1;
	5:	KQ1500_2_middle_1;	
	6:	KQ1500_2_middle_1;
	KQ1500_2_front_4_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_8_reverse, position_in_consist % 8) {
	0:	KQ1500_2_front_3_white;
	1:	KQ1500_2_middle_1;
	2:	KQ1500_2_middle_1;
	3:	KQ1500_2_middle_1;
	4:	KQ1500_2_middle_2;
	5:	KQ1500_2_middle_1;
	6:	KQ1500_2_middle_3b;
	KQ1500_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1500_2_8, extra_callback_info1) {
	1:	KQ1500_2_8_reverse;
	KQ1500_2_8_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1500_8, date_of_last_service) {
	0 .. date (1990, 1, 1): KQ1500_1_8;
	KQ1500_2_8;
}

switch(FEAT_TRAINS, PARENT, KQ1500_8_purchase, date_of_last_service) {
	0 .. date (1990, 1, 1): KQ1500_1_purchase;
	KQ1500_2_purchase;
}

// Keikyu Type 1500, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ1500KS_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1500KS_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1500KQ_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1500KQ_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1500KS_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1500KS_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1500KQ_6_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1500KQ_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1500KS_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1500KS_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1500KQ_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1500KQ_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KS_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1500KS_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KQ_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1500KQ_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KQ_6_start_stop, num_vehs_in_consist) {
	1 .. 16: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1500KQ_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KS_4_can_attach_wagon, vehicle_type_id) {
	item_KQ1500KS_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1500KQ_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1500KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KS_6_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ1500KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500KS_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ1500KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_6_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 1500, sound //

switch(FEAT_TRAINS, SELF, sw_KQ1500_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1500_start_sound, param_sound_effect) {
	1: sw_KQ1500_start_sound_1;
	2: sw_KQ1500_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 1500, item //

item(FEAT_TRAINS, item_KQ1500KS_4) {
	property {
		name:							string(STR_KQ1500KS_4_NAME);
		climates_available:				param_company == 1 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1985, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_4;
		purchase:						KQ1500_4_purchase;
		articulated_part:				sw_KQ1500KS_4_articulated_part;
		start_stop:						sw_KQ1500KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ1500KS_4_can_attach_wagon;
		additional_text:				return string(STR_KQ1500KS_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_4_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1500KQ_4) {
	property {
		name:							string(STR_KQ1500KQ_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1985, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1600 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_4;
		purchase:						KQ1500_4_purchase;
		articulated_part:				sw_KQ1500KQ_4_articulated_part;
		start_stop:						sw_KQ1500KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1500KQ_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_4_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1500KS_6) {
	property {
		name:							string(STR_KQ1500KS_6_NAME);
		climates_available:				param_company == 1 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1988, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_6;
		purchase:						KQ1500_6_purchase;
		articulated_part:				sw_KQ1500KS_6_articulated_part;
		start_stop:						sw_KQ1500KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ1500KS_6_can_attach_wagon;
		length:							sw_KQ1500_6_shorten;
		additional_text:				return string(STR_KQ1500KS_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_6_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1500KQ_6) {
	property {
		name:							string(STR_KQ1500KQ_6_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1988, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_6;
		purchase:						KQ1500_6_purchase;
		articulated_part:				sw_KQ1500KQ_6_articulated_part;
		start_stop:						sw_KQ1500KQ_6_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		length:							sw_KQ1500_6_shorten;
		additional_text:				return string(STR_KQ1500KQ_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_6_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1500KS_8) {
	property {
		name:							string(STR_KQ1500KS_8_NAME);
		climates_available:				param_company == 1 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_8;
		purchase:						KQ1500_8_purchase;
		articulated_part:				sw_KQ1500KS_8_articulated_part;
		start_stop:						sw_KQ1500KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ1500KS_8_can_attach_wagon;
		additional_text:				return string(STR_KQ1500KS_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_8_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1500KQ_8) {
	property {
		name:							string(STR_KQ1500KQ_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ1500_8;
		purchase:						KQ1500_8_purchase;
		articulated_part:				sw_KQ1500KQ_8_articulated_part;
		start_stop:						sw_KQ1500KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1500KQ_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1500_8_effect;
		sound_effect:					sw_KQ1500_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 600, 3rd Series //

// Keikyu Type 600, 3rd Series, graphics //

spriteset (KQ600_3_1_middle_1, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ600_3_1_middle_2, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ600_3_1_middle_3a, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ600_3_1_middle_3b, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ600_3_1_front_1_white, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ600_3_1_front_1_red, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ600_3_1_front_2_white, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ600_3_1_front_2_red, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ600_3_1_front_3_white, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ600_3_1_front_3_red, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ600_3_1_front_4_white, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ600_3_1_front_4_red, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KQ600_3_1_purchase, "gfx/Keikyu/600-3/KQ600-3-1.png") { tmpl_purchase(0, 360) }
spriteset (KQ600_3_2_middle_1, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ600_3_2_middle_2, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ600_3_2_middle_3a, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ600_3_2_middle_3b, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ600_3_2_front_1_white, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ600_3_2_front_1_red, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ600_3_2_front_2_white, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ600_3_2_front_2_red, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ600_3_2_front_3_white, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ600_3_2_front_3_red, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ600_3_2_front_4_white, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ600_3_2_front_4_red, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KQ600_3_2_middle_4, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_vehicle_8_length(0, 360) }
spriteset (KQ600_3_2_purchase, "gfx/Keikyu/600-3/KQ600-3-2.png") { tmpl_purchase(0, 390) }
spriteset (KQ600_3_3_middle_1, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ600_3_3_middle_2, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ600_3_3_middle_3a, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ600_3_3_middle_3b, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ600_3_3_front_1_white, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ600_3_3_front_1_red, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ600_3_3_front_2_white, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ600_3_3_front_2_red, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ600_3_3_front_3_white, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KQ600_3_3_front_3_red, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KQ600_3_3_front_4_white, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KQ600_3_3_front_4_red, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KQ600_3_3_purchase, "gfx/Keikyu/600-3/KQ600-3-3.png") { tmpl_purchase(0, 360) }

switch(FEAT_TRAINS, SELF, KQ600_3_4_forward, position_in_consist % 4) {
	0:	KQ600_3_2_front_1_white;
	1:	KQ600_3_2_middle_1;
	3:	KQ600_3_2_front_2_red;
	KQ600_3_2_middle_4;
}

switch(FEAT_TRAINS, SELF, KQ600_3_4_reverse, position_in_consist % 4) {
	0:	KQ600_3_2_front_2_white;
	2:	KQ600_3_2_middle_1;
	3:	KQ600_3_2_front_1_red;
	KQ600_3_2_middle_4;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3_4, extra_callback_info1) {
	1:	KQ600_3_4_reverse;
	KQ600_3_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ600_3_1_8_forward, position_in_consist % 8) {
	0:	KQ600_3_1_front_1_white;
	1:	KQ600_3_1_middle_3a;
	3:	KQ600_3_1_middle_2;
	7:	KQ600_3_1_front_4_red;
	KQ600_3_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_1_8_reverse, position_in_consist % 8) {
	0:	KQ600_3_1_front_3_white;
	4:	KQ600_3_1_middle_2;
	5:	KQ600_3_1_middle_3b;
	7:	KQ600_3_1_front_2_red;
	KQ600_3_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_1_8, extra_callback_info1) {
	1:	KQ600_3_1_8_reverse;
	KQ600_3_1_8_forward;
}

switch(FEAT_TRAINS, SELF, KQ600_3_2_8_forward, position_in_consist % 8) {
	0:	KQ600_3_2_front_1_white;
	1:	KQ600_3_2_middle_3a;
	3:	KQ600_3_2_middle_2;
	7:	KQ600_3_2_front_4_red;
	KQ600_3_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_2_8_reverse, position_in_consist % 8) {
	0:	KQ600_3_2_front_3_white;
	4:	KQ600_3_2_middle_2;
	5:	KQ600_3_2_middle_3b;
	7:	KQ600_3_2_front_2_red;
	KQ600_3_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_2_8, extra_callback_info1) {
	1:	KQ600_3_2_8_reverse;
	KQ600_3_2_8_forward;
}

switch(FEAT_TRAINS, SELF, KQ600_3_3_8_forward, position_in_consist % 8) {
	0:	KQ600_3_3_front_1_white;
	1:	KQ600_3_3_middle_3a;
	3:	KQ600_3_3_middle_2;
	7:	KQ600_3_3_front_4_red;
	KQ600_3_3_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_3_8_reverse, position_in_consist % 8) {
	0:	KQ600_3_3_front_3_white;
	4:	KQ600_3_3_middle_2;
	5:	KQ600_3_3_middle_3b;
	7:	KQ600_3_3_front_2_red;
	KQ600_3_3_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ600_3_sky, extra_callback_info1) {
	1:	KQ600_3_3_8_reverse;
	KQ600_3_3_8_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ600_3_3_8) {
	1:	KQ600_3_sky;
	2:	KQ600_3_2_8;
}

switch(FEAT_TRAINS, PARENT, sw_KQ600_3_8, date_of_last_service) {
	0 .. date (1995, 1, 1): KQ600_3_1_8;
	date (1995, 1, 2) .. date (2005, 1, 1): KQ600_3_2_8;
	KQ600_3_3_8;
}

switch(FEAT_TRAINS, PARENT, KQ600_3_8_purchase, date_of_last_service) {
	0 .. date (1995, 1, 1): KQ600_3_1_purchase;
	date (1995, 1, 2) .. date (2005, 1, 1): KQ600_3_2_purchase;
	KQ600_3_3_purchase;
}

// Keikyu Type 600, 3rd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ600_3KS_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ600_3KS_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ600_3KQ_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ600_3KQ_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ600_3KS_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ600_3KS_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ600_3KQ_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ600_3KQ_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3KS_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ600_3KS_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3KQ_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ600_3KQ_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3KS_4_can_attach_wagon, vehicle_type_id) {
	item_KQ600_3KS_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ600_3KQ_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ600_3KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3KS_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ600_3KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 600, 3rd Series, sound //

switch(FEAT_TRAINS, SELF, sw_KQ600_3_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ600_3_start_sound, param_sound_effect) {
	1: sw_KQ600_3_start_sound_1;
	2: sw_KQ600_3_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 600, 3rd Series, item //

item(FEAT_TRAINS, item_KQ600_3KS_4) {
	property {
		name:							string(STR_KQ600_3KS_4_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1996, 1, 1);
		model_life:						6;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					43;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ600_3_4;
		purchase:						KQ600_3_2_purchase;
		articulated_part:				sw_KQ600_3KS_4_articulated_part;
		start_stop:						sw_KQ600_3KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ600_3KS_4_can_attach_wagon;
		additional_text:				return string(STR_KQ600_3KS_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_3_4_effect;
		sound_effect:					sw_KQ600_3_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ600_3KQ_4) {
	property {
		name:							string(STR_KQ600_3KQ_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1996, 1, 1);
		model_life:						6;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					43;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ600_3_4;
		purchase:						KQ600_3_2_purchase;
		articulated_part:				sw_KQ600_3KQ_4_articulated_part;
		start_stop:						sw_KQ600_3KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ600_3KQ_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_3_4_effect;
		sound_effect:					sw_KQ600_3_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ600_3KS_8) {
	property {
		name:							string(STR_KQ600_3KS_8_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1994, 1, 1);
		model_life:						6;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					63;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ600_3_8;
		purchase:						KQ600_3_8_purchase;
		articulated_part:				sw_KQ600_3KS_8_articulated_part;
		start_stop:						sw_KQ600_3KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ600_3KS_8_can_attach_wagon;
		additional_text:				return string(STR_KQ600_3KS_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_3_8_effect;
		sound_effect:					sw_KQ600_3_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ600_3KQ_8) {
	property {
		name:							string(STR_KQ600_3KQ_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1994, 1, 1);
		model_life:						6;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					63;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ600_3_8;
		purchase:						KQ600_3_8_purchase;
		articulated_part:				sw_KQ600_3KQ_8_articulated_part;
		start_stop:						sw_KQ600_3KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ600_3KQ_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ600_3_8_effect;
		sound_effect:					sw_KQ600_3_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 2100 //

// Keikyu Type 2100, graphics //

spriteset (KQ2100_1_middle_1, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ2100_1_middle_2, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ2100_1_front_1_white, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ2100_1_front_1_red, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ2100_1_front_2_white, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ2100_1_front_2_red, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ2100_1_purchase, "gfx/Keikyu/2100/KQ2100-1.png") { tmpl_purchase(0, 180) }
spriteset (KQ2100_2_middle_1, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ2100_2_middle_2, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ2100_2_front_1_white, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ2100_2_front_1_red, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ2100_2_front_2_white, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ2100_2_front_2_red, "gfx/Keikyu/2100/KQ2100-2.png") { tmpl_vehicle_8_length(0, 150) }

switch(FEAT_TRAINS, SELF, KQ2100_1_forward, position_in_consist % 8) {
	0:	KQ2100_1_front_1_white;
	1:	KQ2100_1_middle_2;
	5:	KQ2100_1_middle_2;
	7:	KQ2100_1_front_2_red;
	KQ2100_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ2100_1_reverse, position_in_consist % 8) {
	0:	KQ2100_1_front_2_white;
	2:	KQ2100_1_middle_2;
	6:	KQ2100_1_middle_2;
	7:	KQ2100_1_front_1_red;
	KQ2100_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ2100_1, extra_callback_info1) {
	1:	KQ2100_1_reverse;
	KQ2100_1_forward;
}

switch(FEAT_TRAINS, SELF, KQ2100_2_forward, position_in_consist % 8) {
	0:	KQ2100_2_front_1_white;
	1:	KQ2100_2_middle_2;
	5:	KQ2100_2_middle_2;
	7:	KQ2100_2_front_2_red;
	KQ2100_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ2100_2_reverse, position_in_consist % 8) {
	0:	KQ2100_2_front_2_white;
	2:	KQ2100_2_middle_2;
	6:	KQ2100_2_middle_2;
	7:	KQ2100_2_front_1_red;
	KQ2100_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ2100_2, extra_callback_info1) {
	1:	KQ2100_2_reverse;
	KQ2100_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ2100_A) {
	2:	KQ2100_1;
	1:	KQ2100_2;
}

switch(FEAT_TRAINS, PARENT, sw_KQ2100, date_of_last_service) {
	0 .. date (1998, 1, 1): KQ2100_1;
	date (1998, 1, 1) .. date (2005, 1, 1): KQ2100_A;
	KQ2100_1;
}

// Keikyu Type 8900, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ2100_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ2100;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ2100_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ2100_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ2100_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 2100, sound //

switch(FEAT_TRAINS, SELF, sw_KQ2100_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ2100_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ2100_start_sound, param_sound_effect) {
	1: sw_KQ2100_start_sound_1;
	2: sw_KQ2100_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 2100, item //

item(FEAT_TRAINS, item_KQ2100) {
	property {
		name:							string(STR_KQ2100_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1998, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					90;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							29 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ2100;
		purchase:						KQ2100_1_purchase;
		articulated_part:				sw_KQ2100_articulated_part;
		start_stop:						sw_KQ2100_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_2 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ2100_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ2100_effect;
		sound_effect:					sw_KQ2100_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 2000, 4 doors //

// Keikyu Type 2000, 4 doors, graphics //

spriteset (KQ20003_middle_1, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ20003_middle_2, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ20003_front_1_white, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ20003_front_1_red, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ20003_front_2_white, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ20003_front_2_red, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ20003_purchase, "gfx/Keikyu/2000/KQ2000-2.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, KQ20003_4_forward, position_in_consist % 4) {
	0:	KQ20003_front_1_white;
	1:	KQ20003_middle_2;
	3:	KQ20003_front_2_red;
	KQ20003_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ20003_4_reverse, position_in_consist % 4) {
	0:	KQ20003_front_2_white;
	2:	KQ20003_middle_2;
	3:	KQ20003_front_1_red;
	KQ20003_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_4, extra_callback_info1) {
	1:	KQ20003_4_reverse;
	KQ20003_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ20003_8_forward, position_in_consist % 8) {
	0:	KQ20003_front_1_white;
	1:	KQ20003_middle_2;
	6:	KQ20003_middle_2;
	7:	KQ20003_front_2_red;
	KQ20003_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ20003_8_reverse, position_in_consist % 8) {
	0:	KQ20003_front_2_white;
	1:	KQ20003_middle_2;
	6:	KQ20003_middle_2;
	7:	KQ20003_front_1_red;
	KQ20003_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_8, extra_callback_info1) {
	1:	KQ20003_8_reverse;
	KQ20003_8_forward;
}

// Keikyu Type 2000, 4 doors, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ20003_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ20003_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ20003_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ20003_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ20003_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 2000, 4 doors, sound //

switch(FEAT_TRAINS, SELF, sw_KQ20003_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ20003_start_sound, param_sound_effect) {
	1: sw_KQ20003_start_sound_1;
	2: sw_KQ20003_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 2000, 4 doors, item //

item(FEAT_TRAINS, item_KQ20003_4) {
	property {
		name:							string(STR_KQ20003_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1998, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ20003_4;
		purchase:						KQ20003_purchase;
		articulated_part:				sw_KQ20003_4_articulated_part;
		start_stop:						sw_KQ20003_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ20003_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ20003_4_effect;
		sound_effect:					sw_KQ20003_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ20003_8) {
	property {
		name:							string(STR_KQ20003_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1998, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KQ20003_8;
		purchase:						KQ20003_purchase;
		articulated_part:				sw_KQ20003_8_articulated_part;
		start_stop:						sw_KQ20003_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ20003_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ20003_8_effect;
		sound_effect:					sw_KQ20003_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keikyu Type 1000, 2nd Series //

// Keikyu Type 1000, 2nd Series, graphics //

spriteset (KQ1000_2_1_middle_1, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_2_1_middle_2, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_2_1_middle_3a, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_2_1_middle_3b, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_2_1_front_1_white, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_2_1_front_1_red, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_2_1_front_2_white, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_2_1_front_2_red, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KQ1000_2_purchase, "gfx/Keikyu/1000-2/KQ1000-2-1.png") { tmpl_purchase(0, 240) }
spriteset (KQ1000_2_2_middle_1, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KQ1000_2_2_middle_2, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KQ1000_2_2_middle_3a, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KQ1000_2_2_middle_3b, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KQ1000_2_2_front_1_white, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KQ1000_2_2_front_1_red, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KQ1000_2_2_front_2_white, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KQ1000_2_2_front_2_red, "gfx/Keikyu/1000-2/KQ1000-2-2.png") { tmpl_vehicle_8_length(0, 210) }

switch(FEAT_TRAINS, SELF, KQ1000_2_1_4_forward, position_in_consist % 4) {
	0:	KQ1000_2_1_front_1_white;
	1:	KQ1000_2_1_middle_1;
	3:	KQ1000_2_1_front_2_red;
	KQ1000_2_1_middle_2;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_1_4_reverse, position_in_consist % 4) {
	0:	KQ1000_2_1_front_2_white;
	2:	KQ1000_2_1_middle_1;
	3:	KQ1000_2_1_front_1_red;
	KQ1000_2_1_middle_2;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_1_4, extra_callback_info1) {
	1:	KQ1000_2_1_4_reverse;
	KQ1000_2_1_4_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_4_forward, position_in_consist % 4) {
	0:	KQ1000_2_2_front_1_white;
	1:	KQ1000_2_2_middle_3a;
	2:	KQ1000_2_2_middle_3a;
	KQ1000_2_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_4_reverse, position_in_consist % 4) {
	0:	KQ1000_2_2_front_2_white;
	1:	KQ1000_2_2_middle_3b;
	2:	KQ1000_2_2_middle_3b;
	KQ1000_2_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_4a, extra_callback_info1) {
	1:	KQ1000_2_2_4_reverse;
	KQ1000_2_2_4_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ1000_2_2_4) {
	4:	KQ1000_2_2_4a;
	1:	KQ1000_2_1_4;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1000_2_4, date_of_last_service) {
	0 .. date(2008, 1, 1): KQ1000_2_1_4;
	KQ1000_2_2_4;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_1_8_forward, position_in_consist % 8) {
	0:	KQ1000_2_1_front_1_white;
	1:	KQ1000_2_1_middle_2;
	4:	KQ1000_2_1_middle_3a;
	6:	KQ1000_2_1_middle_2;
	7:	KQ1000_2_1_front_2_red;
	KQ1000_2_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_1_8_reverse, position_in_consist % 8) {
	0:	KQ1000_2_1_front_2_white;
	1:	KQ1000_2_1_middle_2;
	3:	KQ1000_2_1_middle_3b;
	6:	KQ1000_2_1_middle_2;
	7:	KQ1000_2_1_front_1_red;
	KQ1000_2_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_1_8, extra_callback_info1) {
	1:	KQ1000_2_1_8_reverse;
	KQ1000_2_1_8_forward;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_8_forward, position_in_consist % 8) {
	0:	KQ1000_2_2_front_1_white;
	1:	KQ1000_2_2_middle_2;
	4:	KQ1000_2_2_middle_3a;
	6:	KQ1000_2_2_middle_2;
	7:	KQ1000_2_2_front_2_red;
	KQ1000_2_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_8_reverse, position_in_consist % 8) {
	0:	KQ1000_2_2_front_2_white;
	1:	KQ1000_2_2_middle_2;
	3:	KQ1000_2_2_middle_3b;
	6:	KQ1000_2_2_middle_2;
	7:	KQ1000_2_2_front_1_red;
	KQ1000_2_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KQ1000_2_2_8a, extra_callback_info1) {
	1:	KQ1000_2_2_8_reverse;
	KQ1000_2_2_8_forward;
}

random_switch(FEAT_TRAINS, PARENT, KQ1000_2_2_8) {
	4:	KQ1000_2_2_8a;
	1:	KQ1000_2_1_8;
}

switch(FEAT_TRAINS, PARENT, sw_KQ1000_2_8, date_of_last_service) {
	0 .. date(2007, 1, 1): KQ1000_2_1_8;
	KQ1000_2_2_8;
}

// Keikyu Type 1000, 2nd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KQ1000_2KS_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_2KS_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_2KQ_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KQ1000_2KQ_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_2KS_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_2KS_8;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KQ1000_2KQ_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KQ1000_2KQ_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2KS_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1000_2KS_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2KQ_start_stop, num_vehs_in_consist) {
	1 .. 12: return CB_RESULT_NO_TEXT;
	return string(STR_KQ1000_2KQ_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2KS_4_can_attach_wagon, vehicle_type_id) {
	item_KQ1000_2KS_4: return CB_RESULT_ATTACH_ALLOW;
	item_KQ1000_2KQ_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KQ1000_2KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2KS_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_KQ1000_2KS_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keikyu Type 1000, 2nd Series, sound //

switch(FEAT_TRAINS, SELF, sw_KQ1000_2_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KQ1000_2_start_sound, param_sound_effect) {
	1: sw_KQ1000_2_start_sound_1;
	2: sw_KQ1000_2_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keikyu Type 1000, 2nd Series, item //

item(FEAT_TRAINS, item_KQ1000_2KS_4) {
	property {
		name:							string(STR_KQ1000_2KS_4_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2002, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					43;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_2_4;
		purchase:						KQ1000_2_purchase;
		articulated_part:				sw_KQ1000_2KS_4_articulated_part;
		start_stop:						sw_KQ1000_2KS_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KQ1000_2KS_4_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_2KS_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_2_4_effect;
		sound_effect:					sw_KQ1000_2_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_2KQ_4) {
	property {
		name:							string(STR_KQ1000_2KQ_4_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2002, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					43;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_2_4;
		purchase:						KQ1000_2_purchase;
		articulated_part:				sw_KQ1000_2KQ_4_articulated_part;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		start_stop:						sw_KQ1000_2KQ_start_stop;
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1000_2KQ_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_2_4_effect;
		sound_effect:					sw_KQ1000_2_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_2KS_8) {
	property {
		name:							string(STR_KQ1000_2KS_8_NAME);
		climates_available:				param_company == 0 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2002, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					63;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_2_8;
		purchase:						KQ1000_2_purchase;
		articulated_part:				sw_KQ1000_2KS_8_articulated_part;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		start_stop:						sw_KQ1000_2KS_start_stop;
		can_attach_wagon:				sw_KQ1000_2KS_8_can_attach_wagon;
		additional_text:				return string(STR_KQ1000_2KS_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_2_8_effect;
		sound_effect:					sw_KQ1000_2_start_sound;
	}
}

item(FEAT_TRAINS, item_KQ1000_2KQ_8) {
	property {
		name:							string(STR_KQ1000_2KQ_8_NAME);
		climates_available:				param_company == 1 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2002, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					63;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KQ1000_2_8;
		purchase:						KQ1000_2_purchase;
		articulated_part:				sw_KQ1000_2KQ_8_articulated_part;
		start_stop:						sw_KQ1000_2KQ_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KQ_GROUP_2;
		additional_text:				return string(STR_KQ1000_2KQ_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KQ1000_2_8_effect;
		sound_effect:					sw_KQ1000_2_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// KEISEI //

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 1 //

// Keisei Type 1 graphics //

spriteset (KS1, "gfx/Keisei/1/KS1.png") { tmpl_vehicle_7_length(0,0) }
spriteset (KS1w, "gfx/Keisei/1/KS1.png") { tmpl_vehicle_7_length(0,30)}
spriteset (KS1_purchase, "gfx/Keisei/1/KS1.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, sw_KS1_1, position_in_consist) {
	KS1;
}

switch(FEAT_TRAINS, SELF, sw_KS1_2, position_in_consist % 2) {
	0:	KS1;
	KS1w;
}

// Keisei Type 1 callbacks //

switch (FEAT_TRAINS, SELF, sw_KS1_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS1_2;
	return CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, sw_KS1_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS1_can_attach_wagon, vehicle_type_id) {
	item_KS1_1: return CB_RESULT_ATTACH_ALLOW;
	item_KS1_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS1_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS1_1_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS1_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 1, 2 car power, weight and te //

switch(FEAT_TRAINS, SELF, sw_KS1_2_power, cargo_subtype) {
	0:	return 100;
	return 0;
}

switch(FEAT_TRAINS, SELF, sw_KS1_2_weight, cargo_subtype) {
	0: return 31;
	return 55;
}

switch(FEAT_TRAINS, SELF, sw_KS1_2_te, cargo_subtype) {
    0: return 30;
    return 30;
}

// Keisei Type 1 sound //

switch(FEAT_TRAINS, SELF, sw_KS1_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1_start_sound, param_sound_effect) {
	1: sw_KS1_start_sound_1;
	2: sw_KS1_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 1, 1 car item //

item(FEAT_TRAINS, item_KS1_1) {
	property {
		name:							string(STR_KS1_1_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1912, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					16;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		refit_cost:						9; 
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							100 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_1;
		weight:							31 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}	
	graphics {
		default:						sw_KS1_1;
		purchase:						KS1_purchase;
		start_stop:						sw_KS1_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_1 * 1)/10));
		can_attach_wagon:				sw_KS1_can_attach_wagon;
		additional_text:				return string(STR_KS1_1_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS1_1_effect;
		sound_effect:					sw_KS1_start_sound;
	}
}

// Keisei Type 1, 2 car item //

item(FEAT_TRAINS, item_KS1_2) {
	property {
		name:							string(STR_KS1_2_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1918, 1, 1);
		model_life:						12;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					21;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		refit_cost:						9; 
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							100 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_1;
		weight:							31 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.06;
		length:							7;
	}	
	graphics {
		default:						sw_KS1_2;
		purchase:						KS1_purchase;
		articulated_part:				sw_KS1_articulated_part;
		start_stop:						sw_KS1_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_1 * (3/2))/10));
		can_attach_wagon:				sw_KS1_can_attach_wagon;
		power:							sw_KS1_2_power;
		weight:							sw_KS1_2_weight;
		tractive_effort_coefficient:	sw_KS1_2_te;
		additional_text:				return string(STR_KS1_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS1_2_effect;
		sound_effect:					sw_KS1_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 20 //

// Keisei Type 20 graphics //

spriteset (KS20wood, "gfx/Keisei/20/KS20-wood.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS20wood_purchase, "gfx/Keisei/20/KS20-wood.png") { tmpl_purchase(0,60) }
spriteset (KS20greenf, "gfx/Keisei/20/KS20-green.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS20greenr, "gfx/Keisei/20/KS20-green.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS20green_purchase, "gfx/Keisei/20/KS20-green.png") { tmpl_purchase(0,60) }
spriteset (KS20warf, "gfx/Keisei/20/KS20-war.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS20warr, "gfx/Keisei/20/KS20-war.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS20war_purchase, "gfx/Keisei/20/KS20-war.png") { tmpl_purchase(0,60) }
spriteset (KS20aodenf, "gfx/Keisei/20/KS20-aoden.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS20aodenr, "gfx/Keisei/20/KS20-aoden.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS20aoden_purchase, "gfx/Keisei/20/KS20-aoden.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, KS20green, vehicle_is_reversed) {
	1: KS20greenr;
	KS20greenf;
}

switch(FEAT_TRAINS, SELF, KS20war, vehicle_is_reversed) {
	1: KS20warr;
	KS20warf;
}

switch(FEAT_TRAINS, SELF, KS20aoden, vehicle_is_reversed) {
	1: KS20aodenr;
	KS20aodenf;
}

switch(FEAT_TRAINS, PARENT, sw_KS20, date_of_last_service) {
	0 .. date (1925, 1, 1): KS20wood;
	date (1925, 1, 2) .. date (1941, 1, 1): KS20green;
	date (1941, 1, 2) .. date (1950, 1, 1): KS20war;
	KS20aoden; 
}

switch(FEAT_TRAINS, PARENT, KS20_purchase, date_of_last_service) {
	0 .. date (1925, 1, 1): KS20wood_purchase;
	date (1925, 1, 2) .. date (1941, 1, 1): KS20green_purchase;
	date (1941, 1, 2) .. date (1950, 1, 1): KS20war_purchase;
	KS20aoden_purchase; 
}

// Keisei Type 20 callbacks //

switch(FEAT_TRAINS, SELF, sw_KS20_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS20_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS20_can_attach_wagon, vehicle_type_id) {
	item_KS1_1: return CB_RESULT_ATTACH_ALLOW;
	item_KS1_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS20_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS20_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 20 sound //

switch(FEAT_TRAINS, SELF, sw_KS20_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS20_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS20_start_sound, param_sound_effect) {
	1: sw_KS20_start_sound_1;
	2: sw_KS20_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 20 item //

item(FEAT_TRAINS, item_KS20) {
	property {
		name:							string(STR_KS20_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1921, 1, 1);
		model_life:						41;
		retire_early:					18;
		vehicle_life:					22;
		reliability_decay:				110;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					17;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							29 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS20;
		purchase:						KS20_purchase;
		start_stop:						sw_KS20_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KS20_can_attach_wagon;
		additional_text:				return string(STR_KS20_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS20_effect;
		sound_effect:					sw_KS20_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 33 //

// Keisei Type 33 graphics //

spriteset (KS33wood, "gfx/Keisei/33-39-45/KS33-39-45-wood.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS33wood_purchase, "gfx/Keisei/33-39-45/KS33-39-45-wood.png") { tmpl_purchase(0,60) }
spriteset (KS33greenf, "gfx/Keisei/33-39-45/KS33-39-45-green.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS33greenr, "gfx/Keisei/33-39-45/KS33-39-45-green.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (KS33green_purchase, "gfx/Keisei/33-39-45/KS33-39-45-green.png") { tmpl_purchase(0,60) }
spriteset (KS33warf, "gfx/Keisei/33-39-45/KS33-39-45-war.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS33warr, "gfx/Keisei/33-39-45/KS33-39-45-war.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (KS33war_purchase, "gfx/Keisei/33-39-45/KS33-39-45-war.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, KS33green, vehicle_is_reversed) {
	1: KS33greenr;
	KS33greenf;
}

switch(FEAT_TRAINS, SELF, KS33war, vehicle_is_reversed) {
	1: KS33warr;
	KS33warf;
}

switch(FEAT_TRAINS, PARENT, sw_KS33, date_of_last_service) {
	0 .. date (1925, 1, 1): KS33wood;
	date (1925, 1, 2) .. date (1943, 1, 1): KS33green;
	KS33war;
}

switch(FEAT_TRAINS, PARENT, KS33_purchase, date_of_last_service) {
	0 .. date (1925, 1, 1): KS33wood_purchase;
	date (1925, 1, 2) .. date (1943, 1, 1): KS33green_purchase;
	KS33war_purchase;
}

// Keisei Type 33 callbacks //

switch(FEAT_TRAINS, SELF, sw_KS33_start_stop, num_vehs_in_consist) {
	0 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS33_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS33_can_attach_wagon, vehicle_type_id) {
	item_KS1_1: return CB_RESULT_ATTACH_ALLOW;
	item_KS1_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS33_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS33_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 33 sound //

switch(FEAT_TRAINS, SELF, sw_KS33_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS33_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS33_start_sound, param_sound_effect) {
	1: sw_KS33_start_sound_1;
	2: sw_KS33_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 33 item //

item(FEAT_TRAINS, item_KS33) {
	property {
		name:							string(STR_KS33_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1922, 1, 1);
		model_life:						30;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				95;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					16;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							195 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							30 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
		length:							7;
	}
	graphics {
		default:						sw_KS33;
		purchase:						KS33_purchase;
		start_stop:						sw_KS33_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KS33_can_attach_wagon;
		additional_text:				return string(STR_KS33_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS33_effect;
		sound_effect:					sw_KS33_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 200 //

// Keisei Type 200 graphics //

spriteset (KS200greenf, "gfx/Keisei/200/KS200-green.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS200greenr, "gfx/Keisei/200/KS200-green.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS200green_purchase, "gfx/Keisei/200/KS200-green.png") { tmpl_purchase(0,60) }
spriteset (KS200warf, "gfx/Keisei/200/KS200-war.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS200warr, "gfx/Keisei/200/KS200-war.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS200war_purchase, "gfx/Keisei/200/KS200-war.png") { tmpl_purchase(0,60) }
spriteset (KS200bluef, "gfx/Keisei/200/KS200-blue.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS200bluer, "gfx/Keisei/200/KS200-blue.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS200blue_purchase, "gfx/Keisei/200/KS200-blue.png") { tmpl_purchase(0,60) }
spriteset (KS200aodenf, "gfx/Keisei/200/KS200-aoden.png") { tmpl_vehicle_8_16_length(0,0) }
spriteset (KS200aodenr, "gfx/Keisei/200/KS200-aoden.png") { tmpl_vehicle_16_8_length(0,0) }
spriteset (KS200aoden_purchase, "gfx/Keisei/200/KS200-aoden.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, KS200green, vehicle_is_reversed) {
	1: KS200greenr;
	KS200greenf;
}

switch(FEAT_TRAINS, SELF, KS200war, vehicle_is_reversed) {
	1: KS200warr;
	KS200warf;
}

switch(FEAT_TRAINS, SELF, KS200blue, vehicle_is_reversed) {
	1: KS200bluer;
	KS200bluef;
}

switch(FEAT_TRAINS, SELF, KS200aoden, vehicle_is_reversed) {
	1: KS200aodenr;
	KS200aodenf;
}

switch(FEAT_TRAINS, PARENT, sw_KS200, date_of_last_service) {
	0 .. date (1941, 1, 1): KS200green;
	date (1941, 1, 2) .. date (1946, 1, 1): KS200war;
	date (1946, 1, 2) .. date (1950, 1, 1): KS200blue;
	KS200aoden; 
}

switch(FEAT_TRAINS, PARENT, KS200_purchase, date_of_last_service) {
	0 .. date (1941, 1, 1): KS200green_purchase;
	date (1941, 1, 2) .. date (1946, 1, 1): KS200war_purchase;
	date (1946, 1, 2) .. date (1950, 1, 1): KS200blue_purchase;
	KS200aoden_purchase; 
}

// Keisei Type 200 callbacks //

switch(FEAT_TRAINS, SELF, sw_KS200_start_stop, num_vehs_in_consist) {
	0 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS200_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS200_can_attach_wagon, vehicle_type_id) {
	item_KS1_1: return CB_RESULT_ATTACH_ALLOW;
	item_KS1_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS200_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS200_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 200 sound //

switch(FEAT_TRAINS, SELF, sw_KS200_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS200_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS200_start_sound, param_sound_effect) {
	1: sw_KS200_start_sound_1;
	2: sw_KS200_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 200 item //

item(FEAT_TRAINS, item_KS200) {
	property {
		name:							string(STR_KS200_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1931, 1, 1);
		model_life:						36;
		retire_early:					12;
		vehicle_life:					16;
		reliability_decay:				90;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					22;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							224 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							33 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS200;
		purchase:						KS200_purchase;
		start_stop:						sw_KS200_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KS200_can_attach_wagon;
		additional_text:				return string(STR_KS200_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS200_effect;
		sound_effect:					sw_KS200_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 300 //

// Keisei Type 300 graphics //

spriteset (KS300greenf, "gfx/Keisei/300/KS300-green.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS300greenr, "gfx/Keisei/300/KS300-green.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (KS300green_purchase, "gfx/Keisei/300/KS300-green.png") { tmpl_purchase(0,60) }
spriteset (KS300warf, "gfx/Keisei/300/KS300-war.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS300warr, "gfx/Keisei/300/KS300-war.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (KS300war_purchase, "gfx/Keisei/300/KS300-war.png") { tmpl_purchase(0,60) }
spriteset (KS300aodenf, "gfx/Keisei/300/KS300-aoden.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (KS300aodenr, "gfx/Keisei/300/KS300-aoden.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (KS300aoden_purchase, "gfx/Keisei/300/KS300-aoden.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, KS300green, vehicle_is_reversed) {
	1: KS300greenr;
	KS300greenf;
}

switch(FEAT_TRAINS, SELF, KS300war, vehicle_is_reversed) {
	1: KS300warr;
	KS300warf;
}

switch(FEAT_TRAINS, SELF, KS300aoden, vehicle_is_reversed) {
	1: KS300aodenr;
	KS300aodenf;
}

switch(FEAT_TRAINS, PARENT, sw_KS300, date_of_last_service) {
	0 .. date (1941, 1, 1): KS300green;
	date (1941, 1, 2) .. date (1950, 1, 1): KS300war;
	KS300aoden;
}

switch(FEAT_TRAINS, PARENT, KS300_purchase, date_of_last_service) {
	0 .. date (1941, 1, 1): KS300green_purchase;
	date (1941, 1, 2) .. date (1950, 1, 1): KS300war_purchase;
	KS300aoden_purchase;
}

// Keisei Type 300 callbacks //

switch(FEAT_TRAINS, SELF, sw_KS300_start_stop, num_vehs_in_consist) {
	0 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS300_can_attach_wagon, vehicle_type_id) {
	item_KS1_1: return CB_RESULT_ATTACH_ALLOW;
	item_KS1_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS300_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 300 sound //

switch(FEAT_TRAINS, SELF, sw_KS300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS300_start_sound, param_sound_effect) {
	1: sw_KS300_start_sound_1;
	2: sw_KS300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 300 item //

item(FEAT_TRAINS, item_KS300) {
	property {
		name:							string(STR_KS300_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1938, 1, 1);
		model_life:						24;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					16;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							196 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							32 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
		length:							7;
	}
	graphics {
		default:						sw_KS300;
		purchase:						KS300_purchase;
		start_stop:						sw_KS300_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_KS300_can_attach_wagon;
		additional_text:				return string(STR_KS300_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS300_effect;
		sound_effect:					sw_KS300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 600 Type //

// Keisei Type 600 graphics //

spriteset (KS600blue_forward, "gfx/Keisei/600/KS600-blue.png") { tmpl_vehicle_8_16_length(0, 0) }
spriteset (KS600blue_reverse, "gfx/Keisei/600/KS600-blue.png") { tmpl_vehicle_16_8_length(0, 0) }
spriteset (KS600blue_purchase, "gfx/Keisei/600/KS600-blue.png") { tmpl_purchase(0, 60) }
spriteset (KS600express_forward, "gfx/Keisei/600/KS600-express.png") { tmpl_vehicle_8_16_length(0, 0) }
spriteset (KS600express_reverse, "gfx/Keisei/600/KS600-express.png") { tmpl_vehicle_16_8_length(0, 0) }
spriteset (KS600express_purchase, "gfx/Keisei/600/KS600-express.png") { tmpl_purchase(0, 60) }
spriteset (KS600aoden1_forward, "gfx/Keisei/600/KS600-aoden_1.png") { tmpl_vehicle_8_16_length(0, 0) }
spriteset (KS600aoden1_reverse, "gfx/Keisei/600/KS600-aoden_1.png") { tmpl_vehicle_16_8_length(0, 0) }
spriteset (KS600aoden1_purchase, "gfx/Keisei/600/KS600-aoden_1.png") { tmpl_purchase(0, 60) }
spriteset (KS600aoden2_1_white, "gfx/Keisei/600/KS600-aoden_2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS600aoden2_1_red, "gfx/Keisei/600/KS600-aoden_2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS600aoden2_2_white, "gfx/Keisei/600/KS600-aoden_2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS600aoden2_2_red, "gfx/Keisei/600/KS600-aoden_2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS600aoden2_purchase, "gfx/Keisei/600/KS600-aoden_2.png") { tmpl_purchase(0, 120) }

switch(FEAT_TRAINS, SELF, KS600blue, extra_callback_info1) {
	0: KS600blue_reverse;
	KS600blue_forward;
}

switch(FEAT_TRAINS, SELF, KS600express, extra_callback_info1) {
	0: KS600express_reverse;
	KS600express_forward;
}

switch(FEAT_TRAINS, SELF, KS600aoden1, extra_callback_info1) {
	0: KS600aoden1_reverse;
	KS600aoden1_forward;
}

switch(FEAT_TRAINS, SELF, KS600aoden2_forward, position_in_consist % 2) {
	0:	KS600aoden2_1_white;
	KS600aoden2_2_red;
}

switch(FEAT_TRAINS, SELF, KS600aoden2_reverse, position_in_consist % 2) {
	0: KS600aoden2_2_white;
	KS600aoden2_1_red;
}

switch(FEAT_TRAINS, SELF, KS600aoden2, extra_callback_info1) {
	1: KS600aoden2_reverse;
	KS600aoden2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS600, date_of_last_service) {
	0 .. date (1951, 1, 1): KS600blue;
	date (1951, 1, 2) .. date (1953, 1, 1): KS600express;
	date (1953, 1, 2) .. date (1961, 1, 1): KS600aoden1;
	KS600aoden2;
}

switch(FEAT_TRAINS, PARENT, KS600_purchase, date_of_last_service) {
	0 .. date (1951, 1, 1): KS600blue_purchase;
	date (1951, 1, 2) .. date (1953, 1, 1): KS600express_purchase;
	date (1953, 1, 2) .. date (1961, 1, 1): KS600aoden1_purchase;
	KS600aoden2_purchase;
}

// Keisei Type 600 callbacks //

switch (FEAT_TRAINS, SELF, sw_KS600_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS600;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS600_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS600_can_attach_wagon, vehicle_type_id) {
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	item_KS600: return CB_RESULT_ATTACH_ALLOW;
	item_KS700_2: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS600_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 600 sound //

switch(FEAT_TRAINS, SELF, sw_KS600_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS600_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS600_start_sound, param_sound_effect) {
	1: sw_KS600_start_sound_1;
	2: sw_KS600_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 600 item //

item(FEAT_TRAINS, item_KS600) {
	property {
		name:							string(STR_KS600_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1948, 1, 1);
		model_life:						35;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				90;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					22;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							224 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							31 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS600;
		purchase:						KS600_purchase;
		articulated_part:				sw_KS600_articulated_part;
		start_stop:						sw_KS600_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_2 * 2)/10));
		can_attach_wagon:				sw_KS600_can_attach_wagon;
		additional_text:				return string(STR_KS600_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS600_effect;
		sound_effect:					sw_KS600_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 1500 Type //

// Keisei Type 1500 graphics //

spriteset (KS1500express_1_white, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 0) }
spriteset (KS1500express_1_red, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 30) }
spriteset (KS1500express_2_white, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 60) }
spriteset (KS1500express_2_red, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 90) }
spriteset (KS1500express_3_red, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 120) }
spriteset (KS1500express_3_white, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 150) }
spriteset (KS1500express_4_red, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 180) }
spriteset (KS1500express_4_white, "gfx/Keisei/1500/KS1500-express.png") { tmpl_vehicle_7_length(0, 210) }
spriteset (KS1500express_purchase, "gfx/Keisei/1500/KS1500-express.png") { tmpl_purchase(0, 240) }
spriteset (KS1500kaiun_1_white, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 0) }
spriteset (KS1500kaiun_1_red, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 30) }
spriteset (KS1500kaiun_2_white, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 60) }
spriteset (KS1500kaiun_2_red, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 90) }
spriteset (KS1500kaiun_3_red, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 120) }
spriteset (KS1500kaiun_3_white, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 150) }
spriteset (KS1500kaiun_4_red, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 180) }
spriteset (KS1500kaiun_4_white, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_vehicle_7_length(0, 210) }
spriteset (KS1500kaiun_purchase, "gfx/Keisei/1500/KS1500-kaiun.png") { tmpl_purchase(0, 240) }

switch(FEAT_TRAINS, SELF, KS1500express4_forward, position_in_consist % 4) {
	0:	KS1500express_1_white;
	1:	KS1500express_3_red;
	2:	KS1500express_4_red;
	KS1500express_1_red;
}

switch(FEAT_TRAINS, SELF, KS1500express4_reverse, position_in_consist % 4) {
	0:	KS1500express_2_white;
	1:	KS1500express_4_red;
	2:	KS1500express_3_red;
	KS1500express_2_red;
}

switch(FEAT_TRAINS, SELF, KS1500express4, extra_callback_info1) {
	1: KS1500express4_reverse;
	KS1500express4_forward;
}

switch(FEAT_TRAINS, SELF, KS1500kaiun4_forward, position_in_consist % 4) {
	0:	KS1500kaiun_1_white;
	1:	KS1500kaiun_3_red;
	2:	KS1500kaiun_4_red;
	KS1500kaiun_1_red;
}

switch(FEAT_TRAINS, SELF, KS1500kaiun4_reverse, position_in_consist % 4) {
	0:	KS1500kaiun_2_white;
	1:	KS1500kaiun_4_red;
	2:	KS1500kaiun_3_red;
	KS1500kaiun_2_red;
}

switch(FEAT_TRAINS, SELF, KS1500kaiun4, extra_callback_info1) {
	1: KS1500kaiun4_reverse;
	KS1500kaiun4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS1500, date_of_last_service) {
	0 .. date (1955, 1, 1): KS1500express4;
	KS1500kaiun4;
}

switch(FEAT_TRAINS, PARENT, KS1500_purchase, date_of_last_service) {
	0 .. date (1955, 1, 1): KS1500express_purchase;
	KS1500kaiun_purchase;
}

// Keisei Type 1500 callbacks //

switch (FEAT_TRAINS, SELF, sw_KS1500_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS1500;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS1500_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS1500_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS1500_can_attach_wagon, vehicle_type_id) {
	item_KS1500: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS1500_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS1500_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 1500 sound //

switch(FEAT_TRAINS, SELF, sw_KS1500_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1500_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1500_start_sound, param_sound_effect) {
	1: sw_KS1500_start_sound_1;
	2: sw_KS1500_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 1500 item //

item(FEAT_TRAINS, item_KS1500) {
	property {
		name:							string(STR_KS1500_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1951, 1, 1);
		model_life:						14;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					33;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							220 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							32 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
		length:							7;

	}

	graphics {
		default:						sw_KS1500;
		purchase:						KS1500_purchase;
		articulated_part:				sw_KS1500_articulated_part;
		start_stop:						sw_KS1500_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_4 * 2)/10));
		can_attach_wagon:				sw_KS1500_can_attach_wagon;
		additional_text:				return string(STR_KS1500_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS1500_effect;
		sound_effect:					sw_KS1500_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 1600 Type //

// Keisei Type 1600 graphics //

spriteset (KS1600_1_white, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS1600_1_red, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS1600_2_white, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS1600_2_red, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS1600_3_white, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS1600_3_red, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS1600_middle, "gfx/Keisei/1600/KS1600.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS1600_purchase, "gfx/Keisei/1600/KS1600.png") { tmpl_purchase(0, 210) }
spriteset (KS1600_invisible, "gfx/Keisei/1600/KS1600.png") { tmpl_empty(1, 1, 1, 0, 0) }

switch(FEAT_TRAINS, SELF, KS1600_2_forward, position_in_consist % 3) {
	0:	KS1600_3_white;
	2:	KS1600_invisible;
	KS1600_2_red;
}

switch(FEAT_TRAINS, SELF, KS1600_2_reverse, position_in_consist % 3) {
	0:	KS1600_2_white;
	2:	KS1600_invisible;
	KS1600_3_red;
}

switch(FEAT_TRAINS, SELF, KS1600_2, extra_callback_info1) {
	1: KS1600_2_reverse;
	KS1600_2_forward;
}

switch(FEAT_TRAINS, SELF, KS1600_3_forward, position_in_consist % 3) {
	0:	KS1600_1_white;
	2:	KS1600_2_red;
	KS1600_middle;
}

switch(FEAT_TRAINS, SELF, KS1600_3_reverse, position_in_consist % 3) {
	0:	KS1600_1_white;
	2:	KS1600_2_red;
	KS1600_middle;
}

switch(FEAT_TRAINS, SELF, KS1600_3, extra_callback_info1) {
	1: KS1600_3_reverse;
	KS1600_3_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS1600, date_of_last_service) {
	0 .. date (1957, 1, 1): KS1600_2;
	KS1600_3;
}

// Keisei Type 1600 callbacks //

switch (FEAT_TRAINS, SELF, sw_KS1600_articulated_part_1, extra_callback_info1) {
	0 .. 1: return item_KS1600;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS1600_articulated_part_2, extra_callback_info1) {
	0 .. 2: return item_KS1600;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_articulated_part, date_of_last_service) {
	0 .. date (1957, 1, 1): sw_KS1600_articulated_part_1;
	sw_KS1600_articulated_part_2;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_shorten_1, position_in_consist % 3) {
	1: return 7;
	2: return 1;
	return 8;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_shorten, date_of_last_service) {
	0 .. date (1957, 1, 1): sw_KS1600_shorten_1;
	return 8;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_start_stop, num_vehs_in_consist) {
	1 .. 3: return CB_RESULT_NO_TEXT;
	return string(STR_KS1600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS1600_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS1600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS1600_effect, position_in_consist & 3) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 1600 sound //

switch(FEAT_TRAINS, SELF, sw_KS1600_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS1600_start_sound, param_sound_effect) {
	1: sw_KS1600_start_sound_1;
	2: sw_KS1600_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 1600 item //

item(FEAT_TRAINS, item_KS1600) {
	property {
		name:							string(STR_KS1600_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1954, 1, 1);
		model_life:						14;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				180;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_1D; 
		cost_factor:					50;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							448 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							33 * 3 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS1600;
		length:							sw_KS1600_shorten;
		purchase:						KS1600_purchase;
		articulated_part:				sw_KS1600_articulated_part;
		start_stop:						sw_KS1600_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_4 * 1)/10));
		can_attach_wagon:				sw_KS1600_can_attach_wagon;
		additional_text:				return string(STR_KS1600_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS1600_effect;
		sound_effect:					sw_KS1600_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 700, 2200 Type //

// Keisei 700, 2200 Type graphics //

spriteset (KS700aoden_middle, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS700aoden_1_white, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS700aoden_1_red, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS700aoden_2_white, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS700aoden_2_red, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS700aoden_3_white, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS700aoden_3_red, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS700aoden_4_white, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS700aoden_4_red, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS700_purchase, "gfx/Keisei/700-2200/KS700-2200-aoden.png") { tmpl_purchase(0, 270) }
spriteset (KS700stainless_middle, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS700stainless_middle_1, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS700stainless_middle_2, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS700stainless_1_white, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS700stainless_1_red, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS700stainless_2_white, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS700stainless_2_red, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS700stainless_3_white, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS700stainless_3_red, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS700stainless_4_white, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS700stainless_4_red, "gfx/Keisei/700-2200/KS700-2200-stainless.png") { tmpl_vehicle_8_length(0, 300) }

switch(FEAT_TRAINS, SELF, KS700aoden_2_forward, position_in_consist % 4) {
	0:	KS700aoden_3_white;
	1:	KS700aoden_2_red;
	2:	KS700aoden_1_red;
	KS700aoden_4_red;
}

switch(FEAT_TRAINS, SELF, KS700aoden_2_reverse, position_in_consist % 4) {
	0:	KS700aoden_4_white;
	1:	KS700aoden_1_red;
	2:	KS700aoden_2_red;
	KS700aoden_3_red;
}

switch(FEAT_TRAINS, SELF, sw_KS700_2, extra_callback_info1) {
	1: KS700aoden_2_reverse;
	KS700aoden_2_forward;
}

switch(FEAT_TRAINS, SELF, KS700aoden_4_forward, position_in_consist % 4) {
	0:	KS700aoden_3_white;
	3:	KS700aoden_4_red;
	KS700aoden_middle;
}

switch(FEAT_TRAINS, SELF, KS700aoden_4_reverse, position_in_consist % 4) {
	0:	KS700aoden_4_white;
	3:	KS700aoden_3_red;
	KS700aoden_middle;
}

switch(FEAT_TRAINS, SELF, KS700aoden_4, extra_callback_info1) {
	1: KS700aoden_4_reverse;
	KS700aoden_4_forward;
}

switch(FEAT_TRAINS, SELF, KS700stainless_4_forward, position_in_consist % 4) {
	0:	KS700stainless_3_white;
	2:	KS700stainless_middle_1;
	3:	KS700stainless_2_red;
	KS700stainless_middle;
}

switch(FEAT_TRAINS, SELF, KS700stainless_4_reverse, position_in_consist % 4) {
	0:	KS700stainless_4_white;
	2:	KS700stainless_middle_2;
	3:	KS700stainless_1_red;
	KS700stainless_middle;
}

switch(FEAT_TRAINS, SELF, KS700stainless_4, extra_callback_info1) {
	1: KS700stainless_4_reverse;
	KS700stainless_4_forward;
}

random_switch(FEAT_TRAINS, PARENT, sw_KS700_4) {
	1: KS700aoden_4;
	1: KS700stainless_4;
}


// Keisei 700, 2200 Type callbacks //

switch (FEAT_TRAINS, SELF, sw_KS700_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS700_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS700_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS700_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS700_start_stop, num_vehs_in_consist) {
	1 .. 6: return CB_RESULT_NO_TEXT;
	return string(STR_KS700_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS700_2_can_attach_wagon, vehicle_type_id) {
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	item_KS600: return CB_RESULT_ATTACH_ALLOW;
	item_KS700_2: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS700_4_can_attach_wagon, vehicle_type_id) {
	item_KS20: return CB_RESULT_ATTACH_ALLOW;
	item_KS33: return CB_RESULT_ATTACH_ALLOW;
	item_KS200: return CB_RESULT_ATTACH_ALLOW;
	item_KS300: return CB_RESULT_ATTACH_ALLOW;
	item_KS600: return CB_RESULT_ATTACH_ALLOW;
	item_KS700_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS700_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS700_2_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS700_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei 700, 2200 Type sound //

switch(FEAT_TRAINS, SELF, sw_KS700_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS700_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS700_start_sound, param_sound_effect) {
	1: sw_KS700_start_sound_1;
	2: sw_KS700_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei 700, 2200 Type, 2 car item //

item(FEAT_TRAINS, item_KS700_2) {
	property {
		name:							string(STR_KS700_2_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1954, 1, 1);
		model_life:						30;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				100;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					27;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							220 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS700_2;
		purchase:						KS700_purchase;
		articulated_part:				sw_KS700_2_articulated_part;
		start_stop:						sw_KS700_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KS700_2_can_attach_wagon;
		additional_text:				return string(STR_KS700_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS700_2_effect;
		sound_effect:					sw_KS700_start_sound;
	}
}

// Keisei Type 700, 2200 Type, 4 car item //

item(FEAT_TRAINS, item_KS700_4) {
	property {
		name:							string(STR_KS700_4_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1968, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							440 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS700_4;
		purchase:						KS700_purchase;
		articulated_part:				sw_KS700_4_articulated_part;
		start_stop:						sw_KS700_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS700_4_can_attach_wagon;
		additional_text:				return string(STR_KS700_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS700_4_effect;
		sound_effect:					sw_KS700_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 3000, 3050 Type 1st Series //

// Keisei 3000, 3050 Type 1st Series, graphics //

spriteset (KS3000_3050aoden_front_1_white, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_3050aoden_front_1_red, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_3050aoden_front_2_white, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_3050aoden_front_2_red, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_3050aoden_front_3_white, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_3050aoden_front_3_red, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_3050aoden_front_4_white, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_3050aoden_front_4_red, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050akaden_front_1_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_3050akaden_front_1_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_3050akaden_front_2_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_3050akaden_front_2_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_3050akaden_front_3_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_3050akaden_front_3_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_3050akaden_front_4_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_3050akaden_front_4_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050akaden_middle_1, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3000_3050akaden_middle_2, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3000_3050akaden_middle_3, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3000_3050orange_front_1_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_3050orange_front_1_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_3050orange_front_2_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_3050orange_front_2_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_3050orange_front_3_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_3050orange_front_3_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_3050orange_front_4_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_3050orange_front_4_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050orange_middle_1, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3000_3050orange_middle_2, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3000_3050orange_middle_3, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3000_3050orange_aircon_front_1_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_3050orange_aircon_front_1_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_3050orange_aircon_front_2_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_3050orange_aircon_front_2_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_3050orange_aircon_front_3_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_3050orange_aircon_front_3_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_3050orange_aircon_front_4_white, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_3050orange_aircon_front_4_red, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050orange_aircon_middle_1, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050orange_aircon_middle_2, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3000_3050orange_aircon_middle_3, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3000_3050akaden_aircon_front_1_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_3050akaden_aircon_front_1_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_3050akaden_aircon_front_2_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_3050akaden_aircon_front_2_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_3050akaden_aircon_front_3_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_3050akaden_aircon_front_3_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_3050akaden_aircon_front_4_white, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_3050akaden_aircon_front_4_red, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_3050akaden_aircon_middle_1, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3000_3050akaden_aircon_middle_2, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3000_3050akaden_aircon_middle_3, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3000_3050aoden_purchase, "gfx/Keisei/3000-3050-1/KS3000-1_aoden.png") { tmpl_purchase(0, 240) }
spriteset (KS3000_3050akaden_purchase, "gfx/Keisei/3000-3050-1/KS3000-1_akaden.png") { tmpl_purchase(0, 330) }
spriteset (KS3000_3050orange_purchase, "gfx/Keisei/3000-3050-1/KS3000-1_orange.png") { tmpl_purchase(0, 330) }
spriteset (KS3000_3050orange_aircon_purchase, "gfx/Keisei/3000-3050-1/KS3000-1_orange_aircon.png") { tmpl_purchase(0, 330) }
spriteset (KS3000_3050akaden_aircon_purchase, "gfx/Keisei/3000-3050-1/KS3000-1_akaden_aircon.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, KS3000_3050aoden_2_forward, position_in_consist % 2) {
	0: KS3000_3050aoden_front_1_white;
	KS3000_3050aoden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050aoden_2_reverse, position_in_consist % 2) {
	0: KS3000_3050aoden_front_4_white;
	KS3000_3050aoden_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050aoden_2, extra_callback_info1) {
	1: KS3000_3050aoden_2_reverse;
	KS3000_3050aoden_2_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_2_forward, position_in_consist % 2) {
	0: KS3000_3050akaden_front_1_white;
	KS3000_3050akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_2_reverse, position_in_consist % 2) {
	0: KS3000_3050akaden_front_2_white;
	KS3000_3050akaden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_2, extra_callback_info1) {
	1: KS3000_3050akaden_2_reverse;
	KS3000_3050akaden_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3000_3050_2, date_of_last_service) {
	0 .. date (1959, 1, 1): KS3000_3050aoden_2;
	KS3000_3050akaden_2;
}

switch(FEAT_TRAINS, PARENT, KS3000_3050_2_purchase, date_of_last_service) {
	0 .. date (1959, 1, 1): KS3000_3050aoden_purchase;
	KS3000_3050akaden_purchase;
}

switch(FEAT_TRAINS, SELF, KS3000_3050original_4_forward, position_in_consist % 4) {
	0: KS3000_3050akaden_front_1_white;
	1: KS3000_3050akaden_middle_1;
	2: KS3000_3050akaden_middle_2;
	KS3000_3050akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050original_4_reverse, position_in_consist % 4) {
	0: KS3000_3050akaden_front_4_white;
	1: KS3000_3050akaden_middle_1;
	2: KS3000_3050akaden_middle_3;
	KS3000_3050akaden_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050original_4, extra_callback_info1) {
	1: KS3000_3050original_4_reverse;
	KS3000_3050original_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_4_forward, position_in_consist % 4) {
	0: KS3000_3050orange_front_1_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_2;
	KS3000_3050orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_4_reverse, position_in_consist % 4) {
	0: KS3000_3050orange_front_4_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_3;
	KS3000_3050orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_4, extra_callback_info1) {
	1: KS3000_3050orange_4_reverse;
	KS3000_3050orange_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_aircon_4_forward, position_in_consist % 4) {
	0: KS3000_3050orange_aircon_front_1_white;
	1: KS3000_3050orange_aircon_middle_1;
	2: KS3000_3050orange_aircon_middle_2;
	KS3000_3050orange_aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_aircon_4_reverse, position_in_consist % 4) {
	0: KS3000_3050orange_aircon_front_4_white;
	1: KS3000_3050orange_aircon_middle_1;
	2: KS3000_3050orange_aircon_middle_3;
	KS3000_3050orange_aircon_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_aircon_4, extra_callback_info1) {
	1: KS3000_3050orange_aircon_4_reverse;
	KS3000_3050orange_aircon_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_aircon_4_forward, position_in_consist % 4) {
	0: KS3000_3050akaden_aircon_front_1_white;
	1: KS3000_3050akaden_aircon_middle_1;
	2: KS3000_3050akaden_aircon_middle_2;
	KS3000_3050akaden_aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_aircon_4_reverse, position_in_consist % 4) {
	0: KS3000_3050akaden_aircon_front_4_white;
	1: KS3000_3050akaden_aircon_middle_1;
	2: KS3000_3050akaden_aircon_middle_3;
	KS3000_3050akaden_aircon_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_aircon_4, extra_callback_info1) {
	1: KS3000_3050akaden_aircon_4_reverse;
	KS3000_3050akaden_aircon_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3000_3050_4, date_of_last_service) {
	0 .. date (1980, 1, 1): KS3000_3050original_4;
	date (1980, 1, 2) .. date (1989, 1, 1): KS3000_3050orange_4;
	date (1989, 1, 2) .. date (1994, 1, 1): KS3000_3050orange_aircon_4;
	KS3000_3050akaden_aircon_4;
}

switch(FEAT_TRAINS, PARENT, KS3000_3050_4_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KS3000_3050aoden_purchase;
	date (1980, 1, 2) .. date (1989, 1, 1): KS3000_3050orange_purchase;
	date (1989, 1, 2) .. date (1994, 1, 1): KS3000_3050orange_aircon_purchase;
	KS3000_3050akaden_aircon_purchase;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_6_forward, position_in_consist % 6) {
	0: KS3000_3050akaden_front_1_white;
	1: KS3000_3050akaden_middle_1;
	2: KS3000_3050akaden_middle_2;
	3: KS3000_3050akaden_middle_1;
	4: KS3000_3050akaden_middle_2;
	KS3000_3050akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_6_reverse, position_in_consist % 6) {
	0: KS3000_3050akaden_front_4_white;
	1: KS3000_3050akaden_middle_1;
	2: KS3000_3050akaden_middle_3;
	3: KS3000_3050akaden_middle_1;
	4: KS3000_3050akaden_middle_3;
	KS3000_3050akaden_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050akaden_6, extra_callback_info1) {
	1: KS3000_3050akaden_6_reverse;
	KS3000_3050akaden_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_6_forward, position_in_consist % 6) {
	0: KS3000_3050orange_front_1_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_2;
	3: KS3000_3050orange_middle_1;
	4: KS3000_3050orange_middle_2;
	KS3000_3050orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_6_reverse, position_in_consist % 6) {
	0: KS3000_3050orange_front_4_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_3;
	3: KS3000_3050orange_middle_1;
	4: KS3000_3050orange_middle_3;
	KS3000_3050orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_6, extra_callback_info1) {
	1: KS3000_3050orange_6_reverse;
	KS3000_3050orange_6_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3000_3050_6, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3000_3050akaden_6;
	KS3000_3050orange_6;
}

switch(FEAT_TRAINS, PARENT, KS3000_3050_6_purchase, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3000_3050akaden_purchase;
	KS3000_3050orange_purchase;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_8_forward, position_in_consist % 8) {
	0: KS3000_3050orange_front_1_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_2;
	3: KS3000_3050orange_middle_1;
	4: KS3000_3050orange_middle_2;
	5: KS3000_3050orange_middle_1;
	6: KS3000_3050orange_middle_2;
	KS3000_3050orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_8_reverse, position_in_consist % 8) {
	0: KS3000_3050orange_front_4_white;
	1: KS3000_3050orange_middle_1;
	2: KS3000_3050orange_middle_3;
	3: KS3000_3050orange_middle_1;
	4: KS3000_3050orange_middle_3;
	5: KS3000_3050orange_middle_1;
	6: KS3000_3050orange_middle_3;
	KS3000_3050orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3000_3050orange_8, extra_callback_info1) {
	1: KS3000_3050orange_8_reverse;
	KS3000_3050orange_8_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3000_3050_8, date_of_last_service) {
	KS3000_3050orange_8;
}

// Keisei Type 3000, 3050 Type, 1st Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3000_3050_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS3000_3050_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3000_3050_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3000_3050_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3000_3050_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3000_3050_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3000_3050_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3000_3050_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3000_3050_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_can_attach_wagon, vehicle_type_id) {
	item_KS3000_3050_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS3000_3050_4: return CB_RESULT_ATTACH_ALLOW;
	item_KS3000_3050_6: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3000_3050_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, sw_KS3000_3050_6_effect, position_in_consist & 6) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}
switch(FEAT_TRAINS, SELF, sw_KS3000_3050_8_effect, position_in_consist & 8) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3000, 3050 Type, 1st Series, sound //

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_3050_start_sound, param_sound_effect) {
	1: sw_KS3000_3050_start_sound_1;
	2: sw_KS3000_3050_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3000, 3050 Type, 1st Series, item //

item(FEAT_TRAINS, item_KS3000_3050_2) {
	property {
		name:							string(STR_KS3000_3050_2_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1958, 1, 1);
		model_life:						30;
		retire_early:					12;
		vehicle_life:					16;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					28;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							448 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3000_3050_2;
		purchase:						KS3000_3050_2_purchase;
		articulated_part:				sw_KS3000_3050_2_articulated_part;
		start_stop:						sw_KS3000_3050_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KS3000_3050_can_attach_wagon;
		additional_text:				return string(STR_KS3000_3050_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_3050_2_effect;
		sound_effect:					sw_KS3000_3050_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3000_3050_4) {
	property {
		name:							string(STR_KS3000_3050_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1976, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				140;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					38;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							896 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3000_3050_4;
		purchase:						KS3000_3050_4_purchase;
		articulated_part:				sw_KS3000_3050_4_articulated_part;
		start_stop:						sw_KS3000_3050_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3000_3050_can_attach_wagon;
		additional_text:				return string(STR_KS3000_3050_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_3050_4_effect;
		sound_effect:					sw_KS3000_3050_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3000_3050_6) {
	property {
		name:							string(STR_KS3000_3050_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1978, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					48;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1344 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3000_3050_6;
		purchase:						KS3000_3050_6_purchase;
		articulated_part:				sw_KS3000_3050_6_articulated_part;
		start_stop:						sw_KS3000_3050_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3000_3050_can_attach_wagon;
		additional_text:				return string(STR_KS3000_3050_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_3050_6_effect;
		sound_effect:					sw_KS3000_3050_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3000_3050_8) {
	property {
		name:							string(STR_KS3000_3050_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1990, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				150;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					58;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1792 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3000_3050_8;
		purchase:						KS3000_3050orange_purchase;
		articulated_part:				sw_KS3000_3050_8_articulated_part;
		start_stop:						sw_KS3000_3050_start_stop;
		can_attach_wagon:				sw_KS3000_3050_can_attach_wagon;
		additional_text:				return string(STR_KS3000_3050_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_3050_8_effect;
		sound_effect:					sw_KS3000_3050_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 3100 Type //

// Keisei 3100 Type, graphics //

spriteset (KS3100akaden_front_1_white, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3100akaden_front_1_red, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3100akaden_front_2_white, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3100akaden_front_2_red, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3100akaden_front_3_white, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3100akaden_front_3_red, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3100akaden_front_4_white, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3100akaden_front_4_red, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3100akaden_middle_1, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3100akaden_middle_2, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3100akaden_middle_3, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3100orange_front_1_white, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3100orange_front_1_red, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3100orange_front_2_white, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3100orange_front_2_red, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3100orange_front_3_white, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3100orange_front_3_red, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3100orange_front_4_white, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3100orange_front_4_red, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3100orange_middle_1, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3100orange_middle_2, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3100orange_middle_3, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3100orange_aircon_front_1_white, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3100orange_aircon_front_1_red, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3100orange_aircon_front_2_white, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3100orange_aircon_front_2_red, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3100orange_aircon_front_3_white, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3100orange_aircon_front_3_red, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3100orange_aircon_front_4_white, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3100orange_aircon_front_4_red, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3100orange_aircon_middle_1, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3100orange_aircon_middle_2, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3100orange_aircon_middle_3, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3100new_front_1_white, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3100new_front_1_red, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3100new_front_2_white, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3100new_front_2_red, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3100new_front_3_white, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3100new_front_3_red, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3100new_front_4_white, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3100new_front_4_red, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3100new_middle_1, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3100new_middle_2, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3100new_middle_3, "gfx/Keisei/3100/KS3100_new.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3100akaden_purchase, "gfx/Keisei/3100/KS3100_akaden.png") { tmpl_purchase(0, 330) }
spriteset (KS3100orange_purchase, "gfx/Keisei/3100/KS3100_orange.png") { tmpl_purchase(0, 330) }
spriteset (KS3100orange_aircon_purchase, "gfx/Keisei/3100/KS3100_orange_aircon.png") { tmpl_purchase(0, 330) }
spriteset (KS3100new_purchase, "gfx/Keisei/3100/KS3100_new.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, KS3100akaden_2_forward, position_in_consist % 2) {
	0: KS3100akaden_front_1_white;
	KS3100akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3100akaden_2_reverse, position_in_consist % 2) {
	0: KS3100akaden_front_4_white;
	KS3100akaden_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3100akaden_2, extra_callback_info1) {
	1: KS3100akaden_2_reverse;
	KS3100akaden_2_forward;
}

switch(FEAT_TRAINS, SELF, KS3100orange_2_forward, position_in_consist % 2) {
	0: KS3100orange_front_1_white;
	KS3100orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_2_reverse, position_in_consist % 2) {
	0: KS3100orange_front_4_white;
	KS3100orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_2, extra_callback_info1) {
	1: KS3100orange_2_reverse;
	KS3100orange_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3100_2, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3100akaden_2;
	KS3100orange_2;
}

switch(FEAT_TRAINS, PARENT, KS3100_2_purchase, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3100akaden_purchase;
	KS3100orange_purchase;
}

switch(FEAT_TRAINS, SELF, KS3100orange_4_forward, position_in_consist % 4) {
	0: KS3100orange_front_1_white;
	1: KS3100orange_middle_1;
	2: KS3100orange_middle_2;
	KS3100orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_4_reverse, position_in_consist % 4) {
	0: KS3100orange_front_4_white;
	1: KS3100orange_middle_1;
	2: KS3100orange_middle_3;
	KS3100orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_4, extra_callback_info1) {
	1: KS3100orange_4_reverse;
	KS3100orange_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3100orange_aircon_4_forward, position_in_consist % 4) {
	0: KS3100orange_aircon_front_1_white;
	1: KS3100orange_aircon_middle_1;
	2: KS3100orange_aircon_middle_2;
	KS3100orange_aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_aircon_4_reverse, position_in_consist % 4) {
	0: KS3100orange_aircon_front_4_white;
	1: KS3100orange_aircon_middle_1;
	2: KS3100orange_aircon_middle_3;
	KS3100orange_aircon_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3100orange_aircon_4, extra_callback_info1) {
	1: KS3100orange_aircon_4_reverse;
	KS3100orange_aircon_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3100new_4_forward, position_in_consist % 4) {
	0: KS3100new_front_1_white;
	1: KS3100new_middle_1;
	2: KS3100new_middle_2;
	KS3100new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3100new_4_reverse, position_in_consist % 4) {
	0: KS3100new_front_4_white;
	1: KS3100new_middle_1;
	2: KS3100new_middle_3;
	KS3100new_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3100new_4, extra_callback_info1) {
	1: KS3100new_4_reverse;
	KS3100new_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3100_4, date_of_last_service) {
	0 .. date (1987, 1, 1): KS3100orange_4;
	date (1987, 1, 2) .. date (1994, 1, 1): KS3100orange_aircon_4;
	KS3100new_4;
}

switch(FEAT_TRAINS, PARENT, KS3100_4_purchase, date_of_last_service) {
	0 .. date (1987, 1, 1): KS3100orange_purchase;
	date (1987, 1, 2) .. date (1994, 1, 1): KS3100orange_aircon_purchase;
	KS3100new_purchase;
}

// Keisei Type 3100, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3100_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS3100_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3100_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3100_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3100_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3100_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3100_can_attach_wagon, vehicle_type_id) {
	item_KS3100_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS3100_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3100_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3100_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3100_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3100, sound //

switch(FEAT_TRAINS, SELF, sw_KS3100_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3100_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3100_start_sound, param_sound_effect) {
	1: sw_KS3100_start_sound_1;
	2: sw_KS3100_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3100 Type, item //

item(FEAT_TRAINS, item_KS3100_2) {
	property {
		name:							string(STR_KS3100_2_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1960, 1, 1);
		model_life:						26;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					28;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							448 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3100_2;
		purchase:						KS3100_2_purchase;
		articulated_part:				sw_KS3100_2_articulated_part;
		start_stop:						sw_KS3100_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KS3100_can_attach_wagon;
		additional_text:				return string(STR_KS3100_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3100_2_effect;
		sound_effect:					sw_KS3100_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3100_4) {
	property {
		name:							string(STR_KS3100_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1981, 1, 1);
		model_life:						26;
		retire_early:					16;
		vehicle_life:					20;
		reliability_decay:				110;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			10;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							896 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3100_4;
		purchase:						KS3100_4_purchase;
		articulated_part:				sw_KS3100_4_articulated_part;
		start_stop:						sw_KS3100_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3100_can_attach_wagon;
		additional_text:				return string(STR_KS3100_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3100_4_effect;
		sound_effect:					sw_KS3100_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 3150 Type //

// Keisei 3150 Type, graphics //

spriteset (KS3150akaden_front_1_white, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3150akaden_front_1_red, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3150akaden_front_2_white, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3150akaden_front_2_red, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3150akaden_front_3_white, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3150akaden_front_3_red, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3150akaden_front_4_white, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3150akaden_front_4_red, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3150akaden_middle_1, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3150akaden_middle_2, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3150akaden_middle_3, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3150orange_front_1_white, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3150orange_front_1_red, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3150orange_front_2_white, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3150orange_front_2_red, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3150orange_front_3_white, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3150orange_front_3_red, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3150orange_front_4_white, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3150orange_front_4_red, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3150orange_middle_1, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3150orange_middle_2, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3150orange_middle_3, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3150orange_renewal_front_1_white, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3150orange_renewal_front_1_red, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3150orange_renewal_front_2_white, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3150orange_renewal_front_2_red, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3150orange_renewal_front_3_white, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3150orange_renewal_front_3_red, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3150orange_renewal_front_4_white, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3150orange_renewal_front_4_red, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3150orange_renewal_middle_1, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3150orange_renewal_middle_2, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3150orange_renewal_middle_3, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3150new_front_1_white, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3150new_front_1_red, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3150new_front_2_white, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3150new_front_2_red, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3150new_front_3_white, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3150new_front_3_red, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3150new_front_4_white, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3150new_front_4_red, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3150new_middle_1, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3150new_middle_2, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3150new_middle_3, "gfx/Keisei/3150/KS3150_new.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3150akaden_purchase, "gfx/Keisei/3150/KS3150_akaden.png") { tmpl_purchase(0, 330) }
spriteset (KS3150orange_purchase, "gfx/Keisei/3150/KS3150_orange.png") { tmpl_purchase(0, 330) }
spriteset (KS3150orange_renewal_purchase, "gfx/Keisei/3150/KS3150_orange_renewal.png") { tmpl_purchase(0, 330) }
spriteset (KS3150new_purchase, "gfx/Keisei/3150/KS3150_new.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, KS3150original_4_forward, position_in_consist % 4) {
	0: KS3150akaden_front_1_white;
	1: KS3150akaden_middle_1;
	2: KS3150akaden_middle_2;
	KS3150akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3150original_4_reverse, position_in_consist % 4) {
	0: KS3150akaden_front_4_white;
	1: KS3150akaden_middle_1;
	2: KS3150akaden_middle_3;
	KS3150akaden_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3150original_4, extra_callback_info1) {
	1: KS3150original_4_reverse;
	KS3150original_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3150orange_4_forward, position_in_consist % 4) {
	0: KS3150orange_front_1_white;
	1: KS3150orange_middle_1;
	2: KS3150orange_middle_2;
	KS3150orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3150orange_4_reverse, position_in_consist % 4) {
	0: KS3150orange_front_4_white;
	1: KS3150orange_middle_1;
	2: KS3150orange_middle_3;
	KS3150orange_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3150orange_4, extra_callback_info1) {
	1: KS3150orange_4_reverse;
	KS3150orange_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3150orange_renewal_4_forward, position_in_consist % 4) {
	0: KS3150orange_renewal_front_1_white;
	1: KS3150orange_renewal_middle_1;
	2: KS3150orange_renewal_middle_2;
	KS3150orange_renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3150orange_renewal_4_reverse, position_in_consist % 4) {
	0: KS3150orange_renewal_front_4_white;
	1: KS3150orange_renewal_middle_1;
	2: KS3150orange_renewal_middle_3;
	KS3150orange_renewal_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3150orange_renewal_4, extra_callback_info1) {
	1: KS3150orange_renewal_4_reverse;
	KS3150orange_renewal_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3150new_4_forward, position_in_consist % 4) {
	0: KS3150new_front_1_white;
	1: KS3150new_middle_1;
	2: KS3150new_middle_2;
	KS3150new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3150new_4_reverse, position_in_consist % 4) {
	0: KS3150new_front_4_white;
	1: KS3150new_middle_1;
	2: KS3150new_middle_3;
	KS3150new_front_3_red;
}

switch(FEAT_TRAINS, SELF, KS3150new_4, extra_callback_info1) {
	1: KS3150new_4_reverse;
	KS3150new_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3150_4, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3150original_4;
	date (1981, 1, 2) .. date (1986, 1, 1): KS3150orange_4;
	date (1986, 1, 2) .. date (1991, 1, 1): KS3150orange_renewal_4;
	KS3150new_4;
}

switch(FEAT_TRAINS, PARENT, KS3150_4_purchase, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3150akaden_purchase;
	date (1981, 1, 2) .. date (1986, 1, 1): KS3150orange_purchase;
	date (1986, 1, 2) .. date (1991, 1, 1): KS3150orange_renewal_purchase;
	KS3150new_purchase;
}

// Keisei Type 3150, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3150_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3150_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3150_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3150_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3150_can_attach_wagon, vehicle_type_id) {
	item_KS3100_2: return CB_RESULT_ATTACH_ALLOW;
	item_KS3150_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3150_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3150_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3150, sound //

switch(FEAT_TRAINS, SELF, sw_KS3150_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3150_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3150_start_sound, param_sound_effect) {
	1: sw_KS3150_start_sound_1;
	2: sw_KS3150_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei 3150 Type, item //

item(FEAT_TRAINS, item_KS3150_4) {
	property {
		name:							string(STR_KS3150_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1963, 1, 1);
		model_life:						42;
		retire_early:					24;
		vehicle_life:					28;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					36;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3150_4;
		purchase:						KS3150_4_purchase;
		articulated_part:				sw_KS3150_4_articulated_part;
		start_stop:						sw_KS3150_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3150_can_attach_wagon;
		additional_text:				return string(STR_KS3150_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3150_4_effect;
		sound_effect:					sw_KS3150_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei 200, 2000 Type renewal //

// Keisei 200, 2000 Type renewal, graphics //

spriteset (KS200_2000aoden_middle_1, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS200_2000aoden_middle_2, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS200_2000aoden_front_1_white, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS200_2000aoden_front_1_red, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS200_2000aoden_front_2_white, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS200_2000aoden_front_2_red, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS200_2000orange_middle_1, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS200_2000orange_middle_2, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS200_2000orange_front_1_white, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS200_2000orange_front_1_red, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS200_2000orange_front_2_white, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS200_2000orange_front_2_red, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS200_2000orange_purchase, "gfx/Keisei/200-2000new/KS200-2000-orange.png") { tmpl_purchase(0, 180) }
spriteset (KS200_2000aoden_purchase, "gfx/Keisei/200-2000new/KS200-2000-aoden.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, KS200_2000aoden_forward, position_in_consist % 4) {
	1:	KS200_2000aoden_middle_2;
	2:	KS200_2000aoden_middle_1;
	3:	KS200_2000aoden_front_2_red;
	KS200_2000aoden_front_1_white;
}

switch(FEAT_TRAINS, SELF, KS200_2000aoden_reverse, position_in_consist % 4) {
	1:	KS200_2000aoden_middle_2;
	2:	KS200_2000aoden_middle_1;
	3:	KS200_2000aoden_front_2_white;
	KS200_2000aoden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS200_2000aoden, extra_callback_info1) {
	1: KS200_2000aoden_reverse;
	KS200_2000aoden_forward;
}

switch(FEAT_TRAINS, SELF, KS200_2000orange_forward, position_in_consist % 4) {
	1:	KS200_2000orange_middle_2;
	2:	KS200_2000orange_middle_1;
	3:	KS200_2000orange_front_2_red;
	KS200_2000orange_front_1_white;
}

switch(FEAT_TRAINS, SELF, KS200_2000orange_reverse, position_in_consist % 4) {
	1:	KS200_2000orange_middle_2;
	2:	KS200_2000orange_middle_1;
	3:	KS200_2000orange_front_2_white;
	KS200_2000orange_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS200_2000orange, extra_callback_info1) {
	1: KS200_2000orange_reverse;
	KS200_2000orange_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS200_2000, date_of_last_service) {
	0 .. date (1980, 1, 1): KS200_2000aoden;
	date (1980, 1, 2) .. date (1988, 1, 1): KS200_2000orange;
	KS200_2000aoden;
}

switch(FEAT_TRAINS, PARENT, KS200_2000_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KS200_2000aoden_purchase;
	date (1980, 1, 2) .. date (1988, 1, 1): KS200_2000orange_purchase;
	KS200_2000aoden_purchase;
}

// Keisei 200, 2000 Type, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS200_2000_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS200_2000;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS200_2000_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_KS200_2000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS200_2000_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS200_2000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS200_2000_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei 200, 2000 Type, sound //

switch(FEAT_TRAINS, SELF, sw_KS200_2000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS200_2000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS200_2000_start_sound, param_sound_effect) {
	1: sw_KS200_2000_start_sound_1;
	2: sw_KS200_2000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 200, 2000 Type, item //

item(FEAT_TRAINS, item_KS200_2000) {
	property {
		name:							string(STR_KS200_2000_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1964, 1, 1);
		model_life:						30;
		retire_early:					10;
		vehicle_life:					14;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					36;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS200_2000;
		purchase:						KS200_2000_purchase;
		articulated_part:				sw_KS200_2000_articulated_part;
		start_stop:						sw_KS200_2000_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS200_2000_can_attach_wagon;
		additional_text:				return string(STR_KS200_2000_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS200_2000_effect;
		sound_effect:					sw_KS200_2000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3200 //

// Keisei Type 3200, graphics //

spriteset (KS3200akaden_middle_1, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200akaden_middle_2a, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200akaden_middle_2b, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200akaden_middle_3, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200akaden_front_1_white, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200akaden_front_2_red, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200akaden_front_2_white, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200akaden_front_1_red, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200orange_middle_1, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200orange_middle_2a, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200orange_middle_2b, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200orange_middle_3, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200orange_front_1_white, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200orange_front_2_red, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200orange_front_2_white, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200orange_front_1_red, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200orange_renewal_middle_1, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200orange_renewal_middle_2a, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200orange_renewal_middle_2b, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200orange_renewal_middle_3, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200orange_renewal_front_1_white, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200orange_renewal_front_2_red, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200orange_renewal_front_2_white, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200orange_renewal_front_1_red, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200test1_middle_1, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200test1_middle_2a, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200test1_middle_2b, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200test1_middle_3, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200test1_front_1_white, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200test1_front_2_red, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200test1_front_2_white, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200test1_front_1_red, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200test2_middle_1, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200test2_middle_2a, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200test2_middle_2b, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200test2_middle_3, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200test2_front_1_white, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200test2_front_2_red, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200test2_front_2_white, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200test2_front_1_red, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200new_middle_1, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200new_middle_2a, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200new_middle_2b, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200new_middle_3, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200new_front_1_white, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200new_front_2_red, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200new_front_2_white, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200new_front_1_red, "gfx/Keisei/3200/KS3200-new.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200akaden_revival_middle_1, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3200akaden_revival_middle_2a, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3200akaden_revival_middle_2b, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3200akaden_revival_middle_3, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3200akaden_revival_front_1_white, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3200akaden_revival_front_2_red, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3200akaden_revival_front_2_white, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3200akaden_revival_front_1_red, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3200akaden_purchase, "gfx/Keisei/3200/KS3200-akaden.png") { tmpl_purchase(0, 240) }
spriteset (KS3200orange_purchase, "gfx/Keisei/3200/KS3200-orange.png") { tmpl_purchase(0, 240) }
spriteset (KS3200orange_renewal_purchase, "gfx/Keisei/3200/KS3200-orange_renewal.png") { tmpl_purchase(0, 240) }
spriteset (KS3200test1_purchase, "gfx/Keisei/3200/KS3200-test1.png") { tmpl_purchase(0, 240) }
spriteset (KS3200test2_purchase, "gfx/Keisei/3200/KS3200-test2.png") { tmpl_purchase(0, 240) }
spriteset (KS3200new_purchase, "gfx/Keisei/3200/KS3200-new.png") { tmpl_purchase(0, 240) }
spriteset (KS3200akaden_revival_purchase, "gfx/Keisei/3200/KS3200-akaden_revival.png") { tmpl_purchase(0, 240) }

switch(FEAT_TRAINS, SELF, KS3200original_4_forward, position_in_consist % 4) {
	0:	KS3200akaden_front_1_white;
	1:	KS3200akaden_middle_2a;
	2:	KS3200akaden_middle_2b;
	KS3200akaden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200original_4_reverse, position_in_consist % 4) {
	0:	KS3200akaden_front_2_white;
	1:	KS3200akaden_middle_2b;
	2:	KS3200akaden_middle_2a;
	KS3200akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200original_4, extra_callback_info1) {
	1: KS3200original_4_reverse;
	KS3200original_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3200orange_4_forward, position_in_consist % 4) {
	0:	KS3200orange_front_1_white;
	1:	KS3200orange_middle_2a;
	2:	KS3200orange_middle_2b;
	KS3200orange_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_4_reverse, position_in_consist % 4) {
	0:	KS3200orange_front_2_white;
	1:	KS3200orange_middle_2b;
	2:	KS3200orange_middle_2a;
	KS3200orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_4, extra_callback_info1) {
	1: KS3200orange_4_reverse;
	KS3200orange_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_4_forward, position_in_consist % 4) {
	0:	KS3200orange_renewal_front_1_white;
	1:	KS3200orange_renewal_middle_2a;
	2:	KS3200orange_renewal_middle_2b;
	KS3200orange_renewal_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_4_reverse, position_in_consist % 4) {
	0:	KS3200orange_renewal_front_2_white;
	1:	KS3200orange_renewal_middle_2b;
	2:	KS3200orange_renewal_middle_2a;
	KS3200orange_renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_4, extra_callback_info1) {
	1: KS3200orange_renewal_4_reverse;
	KS3200orange_renewal_4_forward;
}	

switch(FEAT_TRAINS, SELF, KS3200test1_4_forward, position_in_consist % 4) {
	0:	KS3200test1_front_1_white;
	1:	KS3200test1_middle_2a;
	2:	KS3200test1_middle_2b;
	KS3200test1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200test1_4_reverse, position_in_consist % 4) {
	0:	KS3200test1_front_2_white;
	1:	KS3200test1_middle_2b;
	2:	KS3200test1_middle_2a;
	KS3200test1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200test1_4, extra_callback_info1) {
	1: KS3200test1_4_reverse;
	KS3200test1_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3200test2_4_forward, position_in_consist % 4) {
	0:	KS3200test2_front_1_white;
	1:	KS3200test2_middle_2a;
	2:	KS3200test2_middle_2b;
	KS3200test2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200test2_4_reverse, position_in_consist % 4) {
	0:	KS3200test2_front_2_white;
	1:	KS3200test2_middle_2b;
	2:	KS3200test2_middle_2a;
	KS3200test2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200test2_4, extra_callback_info1) {
	1: KS3200test2_4_reverse;
	KS3200test2_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3200new_4_forward, position_in_consist % 4) {
	0:	KS3200new_front_1_white;
	1:	KS3200new_middle_2a;
	2:	KS3200new_middle_2b;
	KS3200new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200new_4_reverse, position_in_consist % 4) {
	0:	KS3200new_front_2_white;
	1:	KS3200new_middle_2b;
	2:	KS3200new_middle_2a;
	KS3200new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200new_4, extra_callback_info1) {
	1: KS3200new_4_reverse;
	KS3200new_4_forward;
}	

switch(FEAT_TRAINS, SELF, KS3200akaden_revival_4_forward, position_in_consist % 4) {
	0:	KS3200akaden_revival_front_1_white;
	1:	KS3200akaden_revival_middle_2a;
	2:	KS3200akaden_revival_middle_2b;
	KS3200akaden_revival_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200akaden_revival_4_reverse, position_in_consist % 4) {
	0:	KS3200akaden_revival_front_2_white;
	1:	KS3200akaden_revival_middle_2b;
	2:	KS3200akaden_revival_middle_2a;
	KS3200akaden_revival_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200akaden_revival_4, extra_callback_info1) {
	1: KS3200akaden_revival_4_reverse;
	KS3200akaden_revival_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3200_4, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3200original_4;
	date (1981, 1, 2) .. date (1986, 1, 1): KS3200orange_4;
	date (1986, 1, 2) .. date (1991, 12, 1): KS3200orange_renewal_4;
	date (1991, 12, 2) .. date (1992, 4, 1): KS3200test1_4;
	date (1992, 4, 2) .. date (1993, 4, 1): KS3200test2_4;
	date (1993, 4, 2) .. date (2006, 12, 31): KS3200new_4;
	KS3200akaden_revival_4;
}

switch(FEAT_TRAINS, PARENT, KS3200_4_purchase, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3200akaden_purchase;
	date (1981, 1, 2) .. date (1986, 1, 1): KS3200orange_purchase;
	date (1986, 1, 2) .. date (1991, 12, 1): KS3200orange_renewal_purchase;
	date (1991, 12, 2) .. date (1992, 4, 1): KS3200test1_purchase;
	date (1992, 4, 2) .. date (1993, 4, 1): KS3200test2_purchase;
	date (1993, 4, 2) .. date (2006, 12, 31): KS3200new_purchase;
	KS3200akaden_revival_purchase;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_6_forward, position_in_consist % 6) {
	0:	KS3200orange_renewal_front_1_white;
	1:	KS3200orange_renewal_middle_2a;
	2:	KS3200orange_renewal_middle_1;
	3:	KS3200orange_renewal_middle_1;
	4:	KS3200orange_renewal_middle_3;
	KS3200orange_renewal_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_6_reverse, position_in_consist % 6) {
	0:	KS3200orange_renewal_front_2_white;
	1:	KS3200orange_renewal_middle_3;
	2:	KS3200orange_renewal_middle_1;
	3:	KS3200orange_renewal_middle_2a;
	KS3200orange_renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200orange_renewal_6, extra_callback_info1) {
	1: KS3200orange_renewal_6_reverse;
	KS3200orange_renewal_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3200new_6_forward, position_in_consist % 6) {
	0:	KS3200new_front_1_white;
	1:	KS3200new_middle_2a;
	2:	KS3200new_middle_1;
	3:	KS3200new_middle_1;
	4:	KS3200new_middle_3;
	KS3200new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3200new_6_reverse, position_in_consist % 6) {
	0:	KS3200new_front_2_white;
	1:	KS3200new_middle_3;
	2:	KS3200new_middle_1;
	3:	KS3200new_middle_2a;
	KS3200new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3200new_6, extra_callback_info1) {
	1: KS3200new_6_reverse;
	KS3200new_6_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3200_6, date_of_last_service) {
	0 .. date (2004, 1, 1): KS3200orange_renewal_6;
	KS3200new_6;
}

switch(FEAT_TRAINS, PARENT, KS3200_6_purchase, date_of_last_service) {
	0 .. date (2004, 1, 1): KS3200orange_renewal_purchase;
	KS3200new_purchase;
}

// Keisei Type 3200, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3200_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3200_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3200_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3200_6;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3200_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3200_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3200_4_can_attach_wagon, vehicle_type_id) {
	item_KS3200_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3200_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3200_6_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3200_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3200_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3200_6_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3200, sound //

switch(FEAT_TRAINS, SELF, sw_KS3200_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3200_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3200_start_sound, param_sound_effect) {
	1: sw_KS3200_start_sound_1;
	2: sw_KS3200_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei 3200 Type, item //

item(FEAT_TRAINS, item_KS3200_4) {
	property {
		name:							string(STR_KS3200_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1964, 1, 1);
		model_life:						43;
		retire_early:					24;
		vehicle_life:					28;
		reliability_decay:				70;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					40;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3200_4;
		purchase:						KS3200_4_purchase;
		articulated_part:				sw_KS3200_4_articulated_part;
		start_stop:						sw_KS3200_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3200_4_can_attach_wagon;
		additional_text:				return string(STR_KS3200_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3200_4_effect;
		sound_effect:					sw_KS3200_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3200_6) {
	property {
		name:							string(STR_KS3200_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1987, 1, 1);
		model_life:						25;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				30;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					50;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3200_6;
		purchase:						KS3200_6_purchase;
		articulated_part:				sw_KS3200_6_articulated_part;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		start_stop:						sw_KS3200_start_stop;
		can_attach_wagon:				sw_KS3200_6_can_attach_wagon;
		additional_text:				return string(STR_KS3200_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3200_6_effect;
		sound_effect:					sw_KS3200_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3300 //

// Keisei Type 3300, graphics //

spriteset (KS3300akaden_middle_1, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300akaden_middle_2a, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300akaden_middle_2b, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300akaden_front_1_white, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300akaden_front_1_red, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300akaden_front_2_white, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300akaden_front_2_red, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300orange_middle_1, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300orange_middle_2a, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300orange_middle_2b, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300orange_front_1_white, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300orange_front_1_red, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300orange_front_2_white, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300orange_front_2_red, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300orange_aircon_middle_1, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300orange_aircon_middle_2a, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300orange_aircon_middle_2b, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300orange_aircon_front_1_white, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300orange_aircon_front_1_red, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300orange_aircon_front_2_white, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300orange_aircon_front_2_red, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300orange_new_middle_1, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300orange_new_middle_2a, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300orange_new_middle_2b, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300orange_new_front_1_white, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300orange_new_front_1_red, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300orange_new_front_2_white, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300orange_new_front_2_red, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300new_middle_1, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300new_middle_2a, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300new_middle_2b, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300new_front_1_white, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300new_front_1_red, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300new_front_2_white, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300new_front_2_red, "gfx/Keisei/3300/KS3300-new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300akaden_new_middle_1, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300akaden_new_middle_2a, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300akaden_new_middle_2b, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300akaden_new_front_1_white, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300akaden_new_front_1_red, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300akaden_new_front_2_white, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300akaden_new_front_2_red, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300aoden_middle_1, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3300aoden_middle_2a, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3300aoden_middle_2b, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3300aoden_front_1_white, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3300aoden_front_1_red, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3300aoden_front_2_white, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3300aoden_front_2_red, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3300akaden_purchase, "gfx/Keisei/3300/KS3300-akaden.png") { tmpl_purchase(0, 210) }
spriteset (KS3300orange_purchase, "gfx/Keisei/3300/KS3300-orange.png") { tmpl_purchase(0, 210) }
spriteset (KS3300orange_aircon_purchase, "gfx/Keisei/3300/KS3300-orange_aircon.png") { tmpl_purchase(0, 210) }
spriteset (KS3300orange_new_purchase, "gfx/Keisei/3300/KS3300-orange_new.png") { tmpl_purchase(0, 210) }
spriteset (KS3300new_purchase, "gfx/Keisei/3300/KS3300-new.png") { tmpl_purchase(0, 210) }
spriteset (KS3300akaden_new_purchase, "gfx/Keisei/3300/KS3300-akaden_new.png") { tmpl_purchase(0, 210) }
spriteset (KS3300aoden_purchase, "gfx/Keisei/3300/KS3300-aoden.png") { tmpl_purchase(0, 210) }

switch(FEAT_TRAINS, SELF, KS3300original_4_forward, position_in_consist % 4) {
	0:	KS3300akaden_front_1_white;
	1:	KS3300akaden_middle_2a;
	2:	KS3300akaden_middle_2b;
	KS3300akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300original_4_reverse, position_in_consist % 4) {
	0:	KS3300akaden_front_2_white;
	1:	KS3300akaden_middle_2b;
	2:	KS3300akaden_middle_2a;
	KS3300akaden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300original_4, extra_callback_info1) {
	1: KS3300original_4_reverse;
	KS3300original_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_4_forward, position_in_consist % 4) {
	0:	KS3300orange_front_1_white;
	1:	KS3300orange_middle_2a;
	2:	KS3300orange_middle_2b;
	KS3300orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_4_reverse, position_in_consist % 4) {
	0:	KS3300orange_front_2_white;
	1:	KS3300orange_middle_2b;
	2:	KS3300orange_middle_2a;
	KS3300orange_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_4, extra_callback_info1) {
	1: KS3300orange_4_reverse;
	KS3300orange_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_4_forward, position_in_consist % 4) {
	0:	KS3300orange_aircon_front_1_white;
	1:	KS3300orange_aircon_middle_2a;
	2:	KS3300orange_aircon_middle_2b;
	KS3300orange_aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_4_reverse, position_in_consist % 4) {
	0:	KS3300orange_aircon_front_2_white;
	1:	KS3300orange_aircon_middle_2b;
	2:	KS3300orange_aircon_middle_2a;
	KS3300orange_aircon_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_4, extra_callback_info1) {
	1: KS3300orange_aircon_4_reverse;
	KS3300orange_aircon_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_4_forward, position_in_consist % 4) {
	0:	KS3300orange_new_front_1_white;
	1:	KS3300orange_new_middle_2a;
	2:	KS3300orange_new_middle_2b;
	KS3300orange_new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_4_reverse, position_in_consist % 4) {
	0:	KS3300orange_new_front_2_white;
	1:	KS3300orange_new_middle_2b;
	2:	KS3300orange_new_middle_2a;
	KS3300orange_new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_4, extra_callback_info1) {
	1: KS3300orange_new_4_reverse;
	KS3300orange_new_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300new_4_forward, position_in_consist % 4) {
	0:	KS3300new_front_1_white;
	1:	KS3300new_middle_2a;
	2:	KS3300new_middle_2b;
	KS3300new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300new_4_reverse, position_in_consist % 4) {
	0:	KS3300new_front_2_white;
	1:	KS3300new_middle_2b;
	2:	KS3300new_middle_2a;
	KS3300new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300new_4, extra_callback_info1) {
	1: KS3300new_4_reverse;
	KS3300new_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_new_4_forward, position_in_consist % 4) {
	0:	KS3300akaden_new_front_1_white;
	1:	KS3300akaden_new_middle_2a;
	2:	KS3300akaden_new_middle_2b;
	KS3300akaden_new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_new_4_reverse, position_in_consist % 4) {
	0:	KS3300akaden_new_front_2_white;
	1:	KS3300akaden_new_middle_2b;
	2:	KS3300akaden_new_middle_2a;
	KS3300akaden_new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_new_4, extra_callback_info1) {
	1: KS3300akaden_new_4_reverse;
	KS3300akaden_new_4_forward;
}

switch(FEAT_TRAINS, SELF, KS3300aoden_4_forward, position_in_consist % 4) {
	0:	KS3300aoden_front_1_white;
	1:	KS3300aoden_middle_2a;
	2:	KS3300aoden_middle_2b;
	KS3300aoden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300aoden_4_reverse, position_in_consist % 4) {
	0:	KS3300aoden_front_2_white;
	1:	KS3300aoden_middle_2b;
	2:	KS3300aoden_middle_2a;
	KS3300aoden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300aoden_4, extra_callback_info1) {
	1: KS3300aoden_4_reverse;
	KS3300aoden_4_forward;
}

random_switch(FEAT_TRAINS, PARENT, KS3300akaden_aoden_4) {
	1:	KS3300aoden_4;
	1:	KS3300akaden_new_4;
}

random_switch(FEAT_TRAINS, PARENT, KS3300akaden_aoden_purchase) {
	1:	KS3300aoden_purchase;
	1:	KS3300akaden_new_purchase;
}

switch(FEAT_TRAINS, PARENT, sw_KS3300_4, date_of_last_service) {
	0 .. date (1980, 1, 1): KS3300original_4;
	date (1980, 1, 2) .. date (1987, 1, 1): KS3300orange_4;
	date (1987, 1, 2) .. date (1989, 1, 1): KS3300orange_aircon_4;
	date (1989, 1, 2) .. date (1995, 1, 1): KS3300orange_new_4;
	date (1995, 1, 2) .. date (2009, 1, 1): KS3300new_4;
	KS3300akaden_aoden_4;
}

switch(FEAT_TRAINS, PARENT, KS3300_4_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KS3300akaden_purchase;
	date (1980, 1, 2) .. date (1987, 1, 1): KS3300orange_purchase;
	date (1987, 1, 2) .. date (1989, 1, 1): KS3300orange_aircon_purchase;
	date (1989, 1, 2) .. date (1995, 1, 1): KS3300orange_new_purchase;
	date (1995, 1, 2) .. date (2009, 1, 1): KS3300new_purchase;
	KS3300akaden_aoden_purchase;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_6_forward, position_in_consist % 6) {
	0:	KS3300akaden_front_1_white;
	1:	KS3300akaden_middle_2a;
	2:	KS3300akaden_middle_2b;
	3:	KS3300akaden_front_2_red;
	4:	KS3300akaden_middle_2b;
	KS3300akaden_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_6_reverse, position_in_consist % 6) {
	0:	KS3300akaden_front_2_white;
	1:	KS3300akaden_middle_2b;
	2:	KS3300akaden_front_2_red;
	3:	KS3300akaden_middle_2b;
	4:	KS3300akaden_middle_2a;
	KS3300akaden_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300akaden_6, extra_callback_info1) {
	1: KS3300akaden_6_reverse;
	KS3300akaden_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_6_forward, position_in_consist % 6) {
	0:	KS3300orange_front_1_white;
	1:	KS3300orange_middle_2a;
	2:	KS3300orange_middle_2b;
	3:	KS3300orange_front_2_red;
	4:	KS3300orange_middle_2b;
	KS3300orange_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_6_reverse, position_in_consist % 6) {
	0:	KS3300orange_front_2_white;
	1:	KS3300orange_middle_2b;
	2:	KS3300orange_front_2_red;
	3:	KS3300orange_middle_2b;
	4:	KS3300orange_middle_2a;
	KS3300orange_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_6, extra_callback_info1) {
	1: KS3300orange_6_reverse;
	KS3300orange_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_6_forward, position_in_consist % 6) {
	0:	KS3300orange_aircon_front_1_white;
	1:	KS3300orange_aircon_middle_2a;
	2:	KS3300orange_aircon_middle_2b;
	3:	KS3300orange_aircon_front_2_red;
	4:	KS3300orange_aircon_middle_2b;
	KS3300orange_aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_6_reverse, position_in_consist % 6) {
	0:	KS3300orange_aircon_front_2_white;
	1:	KS3300orange_aircon_middle_2b;
	2:	KS3300orange_aircon_middle_1;
	3:	KS3300orange_aircon_middle_2b;
	4:	KS3300orange_aircon_middle_2a;
	KS3300orange_aircon_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_aircon_6, extra_callback_info1) {
	1: KS3300orange_aircon_6_reverse;
	KS3300orange_aircon_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_6_forward, position_in_consist % 6) {
	0:	KS3300orange_new_front_1_white;
	1:	KS3300orange_new_middle_2a;
	2:	KS3300orange_new_middle_2b;
	3:	KS3300orange_new_middle_1;
	4:	KS3300orange_new_middle_2b;
	KS3300orange_new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_6_reverse, position_in_consist % 6) {
	0:	KS3300orange_new_front_2_white;
	1:	KS3300orange_new_middle_2b;
	2:	KS3300orange_new_middle_1;
	3:	KS3300orange_new_middle_2b;
	4:	KS3300orange_new_middle_2a;
	KS3300orange_new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300orange_new_6, extra_callback_info1) {
	1: KS3300orange_new_6_reverse;
	KS3300orange_new_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3300new_6_forward, position_in_consist % 6) {
	0:	KS3300new_front_1_white;
	1:	KS3300new_middle_2a;
	2:	KS3300new_middle_2b;
	3:	KS3300new_middle_1;
	4:	KS3300new_middle_2b;
	KS3300new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300new_6_reverse, position_in_consist % 6) {
	0:	KS3300new_front_2_white;
	1:	KS3300new_middle_2b;
	2:	KS3300new_middle_1;
	3:	KS3300new_middle_2b;
	4:	KS3300new_middle_2a;
	KS3300new_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3300new_6, extra_callback_info1) {
	1: KS3300new_6_reverse;
	KS3300new_6_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3300_6, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3300akaden_6;
	date (1981, 1, 2) .. date (1985, 1, 1): KS3300orange_6;
	date (1985, 1, 2) .. date (1991, 1, 1): KS3300orange_aircon_6;
	date (1991, 1, 2) .. date (1995, 1, 1): KS3300orange_new_6;
	KS3300new_6;
}

switch(FEAT_TRAINS, PARENT, KS3300_6_purchase, date_of_last_service) {
	0 .. date (1981, 1, 1): KS3300akaden_purchase;
	date (1981, 1, 2) .. date (1985, 1, 1): KS3300orange_purchase;
	date (1985, 1, 2) .. date (1991, 1, 1): KS3300orange_aircon_purchase;
	date (1991, 1, 2) .. date (1995, 1, 1): KS3300orange_new_purchase;
	KS3300new_purchase;
}

switch(FEAT_TRAINS, SELF, KS3300new_8_forward, position_in_consist % 8) {
	0:	KS3300new_front_1_white;
	1:	KS3300new_middle_2a;
	2:	KS3300new_middle_2b;
	3:	KS3300new_middle_1;
	4:	KS3300new_middle_1;
	5:	KS3300new_middle_2a;
	6:	KS3300new_middle_2b;
	KS3300new_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3300new_8_reverse, position_in_consist % 8) {
	0:	KS3300new_front_2_white;
	1:	KS3300new_middle_2b;
	2:	KS3300new_middle_2a;
	3:	KS3300new_middle_1;
	4:	KS3300new_middle_1;
	5:	KS3300new_middle_2b;
	6:	KS3300new_middle_2a;
	KS3300new_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_8, extra_callback_info1) {
	1: KS3300new_8_reverse;
	KS3300new_8_forward;
}

// Keisei Type 3300, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3300_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3300_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3300_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3300_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3300_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3300_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3300_4_can_attach_wagon, vehicle_type_id) {
	item_KS3300_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3300_6_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3300_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3300_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_6_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3300, sound //

switch(FEAT_TRAINS, SELF, sw_KS3300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3300_start_sound, param_sound_effect) {
	1: sw_KS3300_start_sound_1;
	2: sw_KS3300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3300, item //

item(FEAT_TRAINS, item_KS3300_4) {
	property {
		name:							string(STR_KS3300_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1968, 1, 1);
		model_life:						46;
		retire_early:					26;
		vehicle_life:					30;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					39;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3300_4;
		purchase:						KS3300_4_purchase;
		articulated_part:				sw_KS3300_4_articulated_part;
		start_stop:						sw_KS3300_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3300_4_can_attach_wagon;
		additional_text:				return string(STR_KS3300_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3300_4_effect;
		sound_effect:					sw_KS3300_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3300_6) {
	property {
		name:							string(STR_KS3300_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1971, 1, 1);
		model_life:						40;
		retire_early:					20;
		vehicle_life:					24;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					49;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1800 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3300_6;
		purchase:						KS3300_6_purchase;
		articulated_part:				sw_KS3300_6_articulated_part;
		start_stop:						sw_KS3300_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KS3300_6_can_attach_wagon;
		additional_text:				return string(STR_KS3300_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3300_6_effect;
		sound_effect:					sw_KS3300_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3300_8) {
	property {
		name:							string(STR_KS3300_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2007, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				10;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					59;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3300_8;
		purchase:						KS3300new_purchase;
		articulated_part:				sw_KS3300_8_articulated_part;
		start_stop:						sw_KS3300_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3300_8_can_attach_wagon;
		additional_text:				return string(STR_KS3300_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3300_8_effect;
		sound_effect:					sw_KS3300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3500 //

// Keisei Type 3500, graphics //

spriteset (KS3500_1_middle_a, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3500_1_middle_b, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3500_1_front_1_white, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3500_1_front_1_red, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3500_1_front_2_white, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3500_1_front_2_red, "gfx/Keisei/3500/KS3500-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3500_2_middle_a, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3500_2_middle_b, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3500_2_front_1_white, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3500_2_front_1_red, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3500_2_front_2_white, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3500_2_front_2_red, "gfx/Keisei/3500/KS3500-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3500_3_middle_a, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3500_3_middle_b, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3500_3_front_1_white, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3500_3_front_1_red, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3500_3_front_2_white, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3500_3_front_2_red, "gfx/Keisei/3500/KS3500-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3500_4_middle_a, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3500_4_middle_b, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3500_4_front_1_white, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3500_4_front_1_red, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3500_4_front_2_white, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3500_4_front_2_red, "gfx/Keisei/3500/KS3500-4.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3500_1_purchase, "gfx/Keisei/3500/KS3500-1.png") { tmpl_purchase(0, 180) }
spriteset (KS3500_2_purchase, "gfx/Keisei/3500/KS3500-2.png") { tmpl_purchase(0, 180) }
spriteset (KS3500_3_purchase, "gfx/Keisei/3500/KS3500-3.png") { tmpl_purchase(0, 180) }
spriteset (KS3500_4_purchase, "gfx/Keisei/3500/KS3500-4.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, KS3500_1_forward, position_in_consist % 4) {
	0:	KS3500_1_front_1_white;
	1:	KS3500_1_middle_a;
	2:	KS3500_1_middle_b;
	KS3500_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3500_1_reverse, position_in_consist % 4) {
	0:	KS3500_1_front_2_white;
	1:	KS3500_1_middle_b;
	2:	KS3500_1_middle_a;
	KS3500_1_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3500_1, extra_callback_info1) {
	1: KS3500_1_reverse;
	KS3500_1_forward;
}

switch(FEAT_TRAINS, SELF, KS3500_2_forward, position_in_consist % 4) {
	0:	KS3500_2_front_1_white;
	1:	KS3500_2_middle_a;
	2:	KS3500_2_middle_b;
	KS3500_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3500_2_reverse, position_in_consist % 4) {
	0:	KS3500_2_front_2_white;
	1:	KS3500_2_middle_b;
	2:	KS3500_2_middle_a;
	KS3500_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3500_2, extra_callback_info1) {
	1: KS3500_2_reverse;
	KS3500_2_forward;
}

switch(FEAT_TRAINS, SELF, KS3500_3_forward, position_in_consist % 4) {
	0:	KS3500_3_front_1_white;
	1:	KS3500_3_middle_a;
	2:	KS3500_3_middle_b;
	KS3500_3_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3500_3_reverse, position_in_consist % 4) {
	0:	KS3500_3_front_2_white;
	1:	KS3500_3_middle_b;
	2:	KS3500_3_middle_a;
	KS3500_3_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3500_3, extra_callback_info1) {
	1: KS3500_3_reverse;
	KS3500_3_forward;
}

switch(FEAT_TRAINS, SELF, KS3500_4_forward, position_in_consist % 4) {
	0:	KS3500_4_front_1_white;
	1:	KS3500_4_middle_a;
	2:	KS3500_4_middle_b;
	KS3500_4_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3500_4_reverse, position_in_consist % 4) {
	0:	KS3500_4_front_2_white;
	1:	KS3500_4_middle_b;
	2:	KS3500_4_middle_a;
	KS3500_4_front_1_red;
}

switch(FEAT_TRAINS, SELF, KS3500_4, extra_callback_info1) {
	1: KS3500_4_reverse;
	KS3500_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3500, date_of_last_service) {
	0 .. date (1992, 1, 1): KS3500_1;
	date (1992, 1, 2) .. date (1996, 1, 1): KS3500_2;
	date (1992, 1, 2) .. date (2007, 1, 1): KS3500_3;
	KS3500_4;
}

switch(FEAT_TRAINS, PARENT, KS3500_purchase, date_of_last_service) {
	0 .. date (1992, 1, 1): KS3500_1_purchase;
	date (1992, 1, 2) .. date (1996, 1, 1): KS3500_2_purchase;
	date (1992, 1, 2) .. date (2007, 1, 1): KS3500_3_purchase;
	KS3500_4_purchase;
}

// Keisei Type 3500, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3500_articulated_part, extra_callback_info1) {
	0 .. 3: return item_KS3500;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3500_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3500_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3500_can_attach_wagon, vehicle_type_id) {
	item_KS3500: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3500_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3500_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3500, sound //

switch(FEAT_TRAINS, SELF, sw_KS3500_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3500_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3500_start_sound, param_sound_effect) {
	1: sw_KS3500_start_sound_1;
	2: sw_KS3500_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3500, item //

item(FEAT_TRAINS, item_KS3500) {
	property {
		name:							string(STR_KS3500_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1972, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				15;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					38;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							900 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3500;
		purchase:						KS3500_purchase;
		articulated_part:				sw_KS3500_articulated_part;
		start_stop:						sw_KS3500_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_KS3500_can_attach_wagon;
		additional_text:				return string(STR_KS3500_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3500_effect;
		sound_effect:					sw_KS3500_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type AE1 //

// Keisei Type AE1, graphics //

spriteset (KSAE1_1_middle_1a, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KSAE1_1_middle_1b, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KSAE1_1_middle_2a, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KSAE1_1_middle_2b, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KSAE1_1_front_1_white, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KSAE1_1_front_2_red, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KSAE1_1_front_1_red, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KSAE1_1_front_2_white, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KSAE1_1_purchase, "gfx/Keisei/AE1/KSAE1-1.png") { tmpl_purchase(0, 240) }
spriteset (KSAE1_2_middle_1a, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KSAE1_2_middle_1b, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KSAE1_2_middle_2a, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KSAE1_2_middle_2b, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KSAE1_2_front_1_white, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KSAE1_2_front_2_red, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KSAE1_2_front_1_red, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KSAE1_2_front_2_white, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KSAE1_2_purchase, "gfx/Keisei/AE1/KSAE1-2.png") { tmpl_purchase(0, 240) }

switch(FEAT_TRAINS, SELF, KSAE1_6old_forward, position_in_consist % 6) {
	0:	KSAE1_1_front_1_white;
	2:	KSAE1_1_middle_2a;
	4:	KSAE1_1_middle_2a;
	5:	KSAE1_1_front_2_red;
	KSAE1_1_middle_1a;
}

switch(FEAT_TRAINS, SELF, KSAE1_6old_reverse, position_in_consist % 6) {
	0:	KSAE1_1_front_2_white;
	2:	KSAE1_1_middle_2b;
	4:	KSAE1_1_middle_2b;
	5:	KSAE1_1_front_1_red;
	KSAE1_1_middle_1b;
}

switch(FEAT_TRAINS, SELF, KSAE1_6old, extra_callback_info1) {
	1: KSAE1_6old_reverse;
	KSAE1_6old_forward;
}

switch(FEAT_TRAINS, SELF, KSAE1_6new_forward, position_in_consist % 6) {
	0:	KSAE1_2_front_1_white;
	2:	KSAE1_2_middle_2a;
	4:	KSAE1_2_middle_2a;
	5:	KSAE1_2_front_2_red;
	KSAE1_2_middle_1a;
}

switch(FEAT_TRAINS, SELF, KSAE1_6new_reverse, position_in_consist % 6) {
	0:	KSAE1_2_front_2_white;
	2:	KSAE1_2_middle_2b;
	4:	KSAE1_2_middle_2b;
	5:	KSAE1_2_front_1_red;
	KSAE1_2_middle_1b;
}

switch(FEAT_TRAINS, SELF, KSAE1_6new, extra_callback_info1) {
	1: KSAE1_6new_reverse;
	KSAE1_6new_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KSAE1_6, date_of_last_service) {
	0 .. date (1980, 1, 1): KSAE1_6old;
	KSAE1_6new;
}

switch(FEAT_TRAINS, PARENT, KSAE1_6_purchase, date_of_last_service) {
	0 .. date (1980, 1, 1): KSAE1_1_purchase;
	KSAE1_2_purchase;
}

switch(FEAT_TRAINS, SELF, KSAE1_8new_forward, position_in_consist % 8) {
	0:	KSAE1_2_front_1_white;
	2:	KSAE1_2_middle_2a;
	6:	KSAE1_2_middle_2a;
	7:	KSAE1_2_front_2_red;
	KSAE1_2_middle_1a;
}

switch(FEAT_TRAINS, SELF, KSAE1_8new_reverse, position_in_consist % 8) {
	0:	KSAE1_2_front_2_white;
	2:	KSAE1_2_middle_2b;
	6:	KSAE1_2_middle_2b;
	7:	KSAE1_2_front_1_red;
	KSAE1_2_middle_1b;
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_8, extra_callback_info1) {
	1: KSAE1_8new_reverse;
	KSAE1_8new_forward;
}

// Keisei Type AE1, callbacks //

switch (FEAT_TRAINS, SELF, sw_KSAE1_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KSAE1_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KSAE1_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KSAE1_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_6_start_stop, num_vehs_in_consist) {
	1 .. 6: return CB_RESULT_NO_TEXT;
	return string(STR_KSAE1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_8_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KSAE1_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_can_attach_wagon, vehicle_type_id) {
	return string(STR_KSAE1_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_6_effect, position_in_consist & 6) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_8_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type AE1, sound //

switch(FEAT_TRAINS, SELF, sw_KSAE1_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE1_start_sound, param_sound_effect) {
	1: sw_KSAE1_start_sound_1;
	2: sw_KSAE1_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei AE1 Type, item //

item(FEAT_TRAINS, item_KSAE1_6) {
	property {
		name:							string(STR_KSAE1_6_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1972, 1, 1);
		model_life:						19;
		retire_early:					11;
		vehicle_life:					15;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_1D; 
		cost_factor:					90;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2240 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							36 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KSAE1_6;
		purchase:						KSAE1_6_purchase;
		articulated_part:				sw_KSAE1_6_articulated_part;
		start_stop:						sw_KSAE1_6_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_4 * 6)/10));
		can_attach_wagon:				sw_KSAE1_can_attach_wagon;
		additional_text:				return string(STR_KSAE1_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KSAE1_6_effect;
		sound_effect:					sw_KSAE1_start_sound;
	}
}

item(FEAT_TRAINS, item_KSAE1_8) {
	property {
		name:							string(STR_KSAE1_8_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1990, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				180;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_1D; 
		cost_factor:					120;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3360 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_4;
		weight:							36 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KSAE1_8;
		purchase:						KSAE1_2_purchase;
		articulated_part:				sw_KSAE1_8_articulated_part;
		start_stop:						sw_KSAE1_8_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_4 * 8)/10));
		can_attach_wagon:				sw_KSAE1_can_attach_wagon;
		additional_text:				return string(STR_KSAE1_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KSAE1_8_effect;
		sound_effect:					sw_KSAE1_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3600 //

// Keisei Type 3600, graphics //

spriteset (KS3600_1_middle_1, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3600_1_middle_2, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3600_1_middle_3b, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3600_1_middle_3a, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3600_1_front_1_white, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3600_1_front_1_red, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3600_1_front_2_white, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3600_1_front_2_red, "gfx/Keisei/3600/KS3600-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3600_2_middle_1, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3600_2_middle_2, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3600_2_middle_3b, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3600_2_middle_3a, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3600_2_front_1_white, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3600_2_front_1_red, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3600_2_front_2_white, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3600_2_front_2_red, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3600_2_front_3_white, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3600_2_front_3_red, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3600_2_front_4_white, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KS3600_2_front_4_red, "gfx/Keisei/3600/KS3600-2.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KS3600_1_purchase, "gfx/Keisei/3600/KS3600-1.png") { tmpl_purchase(0, 240) }
spriteset (KS3600_2_purchase, "gfx/Keisei/3600/KS3600-2.png") { tmpl_purchase(0, 360) }

switch(FEAT_TRAINS, SELF, KS3600_2_forward, position_in_consist % 2) {
	0:	KS3600_2_front_3_white;
	KS3600_2_front_2_red;
}

switch(FEAT_TRAINS, SELF, KS3600_2_reverse, position_in_consist % 2) {
	0:	KS3600_2_front_4_white;
	KS3600_2_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_2, extra_callback_info1) {
	1: KS3600_2_reverse;
	KS3600_2_forward;
}

switch(FEAT_TRAINS, SELF, KS3600_6old_forward, position_in_consist % 6) {
	0:	KS3600_1_front_1_white;
	2:	KS3600_1_middle_2;
	4:	KS3600_1_middle_2;
	5:	KS3600_1_front_2_red;
	KS3600_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KS3600_6old_reverse, position_in_consist % 6) {
	0:	KS3600_1_front_2_white;
	2:	KS3600_1_middle_2;
	4:	KS3600_1_middle_2;
	5:	KS3600_1_front_1_red;
	KS3600_1_middle_1;
}

switch(FEAT_TRAINS, SELF, KS3600_6old, extra_callback_info1) {
	1: KS3600_6old_reverse;
	KS3600_6old_forward;
}

switch(FEAT_TRAINS, SELF, KS3600_6new_forward, position_in_consist % 6) {
	0:	KS3600_2_front_1_white;
	2:	KS3600_2_middle_2;
	4:	KS3600_2_middle_2;
	5:	KS3600_2_front_2_red;
	KS3600_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KS3600_6new_reverse, position_in_consist % 6) {
	0:	KS3600_2_front_2_white;
	2:	KS3600_2_middle_2;
	4:	KS3600_2_middle_2;
	5:	KS3600_2_front_1_red;
	KS3600_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KS3600_6new, extra_callback_info1) {
	1: KS3600_6new_reverse;
	KS3600_6new_forward;
}

switch(FEAT_TRAINS, PARENT, sw_KS3600_6, date_of_last_service) {
	0 .. date (1993, 1, 1): KS3600_6old;
	KS3600_6new;
}

switch(FEAT_TRAINS, PARENT, KS3600_6_purchase, date_of_last_service) {
	0 .. date (1993, 1, 1): KS3600_1_purchase;
	KS3600_2_purchase;
}

switch(FEAT_TRAINS, SELF, KS3600_8new_forward, position_in_consist % 8) {
	0:	KS3600_2_front_1_white;
	2:	KS3600_2_middle_2;
	4:	KS3600_2_middle_3a;
	6:	KS3600_2_middle_2;
	7:	KS3600_2_front_2_red;
	KS3600_2_middle_1;
}

switch(FEAT_TRAINS, SELF, KS3600_8new_reverse, position_in_consist % 8) {
	0:	KS3600_2_front_2_white;
	1:	KS3600_2_middle_2;
	3:	KS3600_2_middle_3b;
	5:	KS3600_2_middle_2;
	7:	KS3600_2_front_1_red;
	KS3600_2_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_8, extra_callback_info1) {
	1: KS3600_8new_reverse;
	KS3600_8new_forward;
}

// Keisei Type 3600, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3600_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_KS3600_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3600_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3600_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3600_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3600_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_2_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3600_6_start_stop, num_vehs_in_consist) {
	1 .. 6: return CB_RESULT_NO_TEXT;
	return string(STR_KS3600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3600_8_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3600_2_can_attach_wagon, vehicle_type_id) {
	item_KS3600_2: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_KS3600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3600_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3600_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_6_effect, position_in_consist & 6) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_8_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3600, sound //

switch(FEAT_TRAINS, SELF, sw_KS3600_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3600_start_sound, param_sound_effect) {
	1: sw_KS3600_start_sound_1;
	2: sw_KS3600_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3600, item //

item(FEAT_TRAINS, item_KS3600_2) {
	property {
		name:							string(STR_KS3600_2_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1999, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					32;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3600_2;
		purchase:						KS3600_2_purchase;
		articulated_part:				sw_KS3600_2_articulated_part;
		start_stop:						sw_KS3600_2_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_KS3600_2_can_attach_wagon;
		additional_text:				return string(STR_KS3600_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3600_2_effect;
		sound_effect:					sw_KS3600_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3600_6) {
	property {
		name:							string(STR_KS3600_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1984, 1, 1);
		model_life:						15;
		retire_early:					9;
		vehicle_life:					13;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					39;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3360 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3600_6;
		purchase:						KS3600_6_purchase;
		articulated_part:				sw_KS3600_6_articulated_part;
		start_stop:						sw_KS3600_6_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KS3600_can_attach_wagon;
		additional_text:				return string(STR_KS3600_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3600_6_effect;
		sound_effect:					sw_KS3600_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3600_8) {
	property {
		name:							string(STR_KS3600_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1999, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				180;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					49;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							4480 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3600_8;
		purchase:						KS3600_2_purchase;
		articulated_part:				sw_KS3600_8_articulated_part;
		start_stop:						sw_KS3600_8_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3600_can_attach_wagon;
		additional_text:				return string(STR_KS3600_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3600_8_effect;
		sound_effect:					sw_KS3600_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3700 //

// Keisei Type 3700, graphics //

spriteset (KS3700_1_middle_1, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3700_1_middle_2, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3700_1_middle_3a, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3700_1_middle_3b, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3700_1_front_1_white, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3700_1_front_1_red, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3700_1_front_2_white, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3700_1_front_2_red, "gfx/Keisei/3700/KS3700-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3700_2_middle_1, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3700_2_middle_2, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3700_2_middle_3a, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3700_2_middle_3b, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3700_2_front_1_white, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3700_2_front_1_red, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3700_2_front_2_white, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3700_2_front_2_red, "gfx/Keisei/3700/KS3700-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3700_3_middle_1, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3700_3_middle_2, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3700_3_middle_3a, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3700_3_middle_3b, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3700_3_front_1_white, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3700_3_front_1_red, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3700_3_front_2_white, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3700_3_front_2_red, "gfx/Keisei/3700/KS3700-3.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3700_1_purchase, "gfx/Keisei/3700/KS3700-1.png") { tmpl_purchase(0, 240) }
spriteset (KS3700_2_purchase, "gfx/Keisei/3700/KS3700-2.png") { tmpl_purchase(0, 240) }
spriteset (KS3700_3_purchase, "gfx/Keisei/3700/KS3700-3.png") { tmpl_purchase(0, 240) }

switch (FEAT_TRAINS, SELF, KS3700_6_forward, position_in_consist % 6) {
	0:	KS3700_3_front_1_white;
	1:	KS3700_3_middle_2;
	4:	KS3700_3_middle_2;
	5:	KS3700_3_front_2_red;
	KS3700_3_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_6_reverse, position_in_consist % 6) {
	0:	KS3700_3_front_2_white;
	1:	KS3700_3_middle_2;
	4:	KS3700_3_middle_2;
	5:	KS3700_3_front_1_red;
	KS3700_3_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_KS3700_6, extra_callback_info1) {
	1:	KS3700_6_reverse;
	KS3700_6_forward;
}

switch (FEAT_TRAINS, SELF, KS3700_1_forward, position_in_consist % 8) {
	0:	KS3700_1_front_1_white;
	1:	KS3700_1_middle_2;
	3:	KS3700_1_middle_3b;
	6:	KS3700_1_middle_2;
	7:	KS3700_1_front_2_red;
	KS3700_1_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_1_reverse, position_in_consist % 8) {
	0:	KS3700_1_front_2_white;
	1:	KS3700_1_middle_2;
	4:	KS3700_1_middle_3a;
	6:	KS3700_1_middle_2;
	7:	KS3700_1_front_1_red;
	KS3700_1_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_1, extra_callback_info1) {
	1:	KS3700_1_reverse;
	KS3700_1_forward;
}

switch (FEAT_TRAINS, SELF, KS3700_2_forward, position_in_consist % 8) {
	0:	KS3700_2_front_1_white;
	1:	KS3700_2_middle_2;
	3:	KS3700_2_middle_3b;
	6:	KS3700_2_middle_2;
	7:	KS3700_2_front_2_red;
	KS3700_2_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_2_reverse, position_in_consist % 8) {
	0:	KS3700_2_front_2_white;
	1:	KS3700_2_middle_2;
	4:	KS3700_2_middle_3a;
	6:	KS3700_2_middle_2;
	7:	KS3700_2_front_1_red;
	KS3700_2_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_2, extra_callback_info1) {
	1:	KS3700_2_reverse;
	KS3700_2_forward;
}

switch (FEAT_TRAINS, SELF, KS3700_3_forward, position_in_consist % 8) {
	0:	KS3700_3_front_1_white;
	1:	KS3700_3_middle_2;
	3:	KS3700_3_middle_3b;
	6:	KS3700_3_middle_2;
	7:	KS3700_3_front_2_red;
	KS3700_3_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_3_reverse, position_in_consist % 8) {
	0:	KS3700_3_front_2_white;
	1:	KS3700_3_middle_2;
	4:	KS3700_3_middle_3a;
	6:	KS3700_3_middle_2;
	7:	KS3700_3_front_1_red;
	KS3700_3_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3700_3, extra_callback_info1) {
	1:	KS3700_3_reverse;
	KS3700_3_forward;
}

switch (FEAT_TRAINS, PARENT, sw_KS3700_8, date_of_last_service) {
	0 .. date (1995, 1, 1): KS3700_1;
	date (1995, 1, 2) .. date (2009, 1, 1): KS3700_2;
	KS3700_3;
}

switch (FEAT_TRAINS, PARENT, KS3700_8_purchase, date_of_last_service) {
	0 .. date (1995, 1, 1): KS3700_1_purchase;
	date (1995, 1, 2) .. date (2009, 1, 1): KS3700_2_purchase;
	KS3700_3_purchase;
}

// Keisei Type 3700, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3700_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3700_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3700_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3700_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3700_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3700_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3700_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3700_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3700_6_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3700_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei 3700 Type, sound //

switch(FEAT_TRAINS, SELF, sw_KS3700_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3700_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3700_start_sound, param_sound_effect) {
	1: sw_KS3700_start_sound_1;
	2: sw_KS3700_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3700, item //

item(FEAT_TRAINS, item_KS3700_6) {
	property {
		name:							string(STR_KS3700_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2000, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					49;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2340 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3700_6;
		purchase:						KS3700_3_purchase;
		articulated_part:				sw_KS3700_6_articulated_part;
		start_stop:						sw_KS3700_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_KS3700_can_attach_wagon;
		additional_text:				return string(STR_KS3700_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3700_6_effect;
		sound_effect:					sw_KS3700_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3700_8) {
	property {
		name:							string(STR_KS3700_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					59;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3700_8;
		purchase:						KS3700_8_purchase;
		articulated_part:				sw_KS3700_8_articulated_part;
		start_stop:						sw_KS3700_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3700_can_attach_wagon;
		additional_text:				return string(STR_KS3700_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3700_8_effect;
		sound_effect:					sw_KS3700_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type AE100 //

// Keisei Type AE100, graphics //

spriteset (KSAE100_f_1, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KSAE100_f_2, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KSAE100_f_3, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KSAE100_f_4, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KSAE100_f_5, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KSAE100_f_6, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KSAE100_f_7, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KSAE100_f_8, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KSAE100_r_1, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KSAE100_r_2, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KSAE100_r_3, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KSAE100_r_4, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KSAE100_r_5, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 360) }
spriteset (KSAE100_r_6, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 390) }
spriteset (KSAE100_r_7, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 420) }
spriteset (KSAE100_r_8, "gfx/Keisei/AE100/KSAE100.png") { tmpl_vehicle_8_length(0, 450) }
spriteset (KSAE100_purchase, "gfx/Keisei/AE100/KSAE100.png") { tmpl_purchase(0, 480) }

switch(FEAT_TRAINS, SELF, AE100_forward, position_in_consist % 8) {
	0:	KSAE100_f_1;
	1:	KSAE100_f_2;
	2:	KSAE100_f_3;
	3:	KSAE100_f_4;
	4:	KSAE100_f_5;
	5:	KSAE100_f_6;
	6:	KSAE100_f_7;
	KSAE100_f_8;
}

switch(FEAT_TRAINS, SELF, AE100_reverse, position_in_consist % 8) {
	0:	KSAE100_r_1;
	1:	KSAE100_r_2;
	2:	KSAE100_r_3;
	3:	KSAE100_r_4;
	4:	KSAE100_r_5;
	5:	KSAE100_r_6;
	6:	KSAE100_r_7;
	KSAE100_r_8;
}

switch(FEAT_TRAINS, SELF, sw_KSAE100, extra_callback_info1) {
	1: AE100_reverse;
	AE100_forward;
}

// Keisei Type AE100, callbacks //

switch (FEAT_TRAINS, SELF, sw_KSAE100_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KSAE100;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KSAE100_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KSAE100_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KSAE100_can_attach_wagon, vehicle_type_id) {
	return string(STR_KSAE100_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KSAE100_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type AE100, sound //

switch(FEAT_TRAINS, SELF, sw_KSAE100_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE100_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE100_start_sound, param_sound_effect) {
	1: sw_KSAE100_start_sound_1;
	2: sw_KSAE100_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type AE100, item //

item(FEAT_TRAINS, item_KSAE100) {
	property {
		name:							string(STR_KSAE100_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1991, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				10;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_1D; 
		cost_factor:					180;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							4160 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					60;
		weight:							36 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KSAE100;
		purchase:						KSAE100_purchase;
		articulated_part:				sw_KSAE100_articulated_part;
		start_stop:						sw_KSAE100_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_4 * 8)/10));
		can_attach_wagon:				sw_KSAE100_can_attach_wagon;
		additional_text:				return string(STR_KSAE100_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KSAE100_effect;
		sound_effect:					sw_KSAE100_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3400 //

// Keisei Type 3400, graphics //

spriteset (KS3400_1_middle_1, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3400_1_middle_2, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3400_1_middle_3a, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3400_1_middle_3b, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3400_1_front_1_white, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3400_1_front_1_red, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3400_1_front_2_white, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3400_1_front_2_red, "gfx/Keisei/3400/KS3400-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3400_2_middle_1, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3400_2_middle_2, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3400_2_middle_3a, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3400_2_middle_3b, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3400_2_front_1_white, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3400_2_front_1_red, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3400_2_front_2_white, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3400_2_front_2_red, "gfx/Keisei/3400/KS3400-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3400_3_middle_1, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3400_3_middle_2, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3400_3_middle_3a, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3400_3_middle_3b, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3400_3_front_1_white, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3400_3_front_1_red, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3400_3_front_2_white, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3400_3_front_2_red, "gfx/Keisei/3400/KS3400-3.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3400_1_purchase, "gfx/Keisei/3400/KS3400-1.png") { tmpl_purchase(0, 240) }
spriteset (KS3400_2_purchase, "gfx/Keisei/3400/KS3400-2.png") { tmpl_purchase(0, 240) }
spriteset (KS3400_3_purchase, "gfx/Keisei/3400/KS3400-3.png") { tmpl_purchase(0, 240) }

switch (FEAT_TRAINS, SELF, KS3400_1_forward, position_in_consist % 8) {
	0:	KS3400_1_front_1_white;
	1:	KS3400_1_middle_2;
	3:	KS3400_1_middle_3b;
	6:	KS3400_1_middle_2;
	7:	KS3400_1_front_2_red;
	KS3400_1_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_1_reverse, position_in_consist % 8) {
	0:	KS3400_1_front_2_white;
	1:	KS3400_1_middle_2;
	4:	KS3400_1_middle_3a;
	6:	KS3400_1_middle_2;
	7:	KS3400_1_front_1_red;
	KS3400_1_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_1, extra_callback_info1) {
	1:	KS3400_1_reverse;
	KS3400_1_forward;
}

switch (FEAT_TRAINS, SELF, KS3400_2_forward, position_in_consist % 8) {
	0:	KS3400_2_front_1_white;
	1:	KS3400_2_middle_2;
	3:	KS3400_2_middle_3b;
	6:	KS3400_2_middle_2;
	7:	KS3400_2_front_2_red;
	KS3400_2_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_2_reverse, position_in_consist % 8) {
	0:	KS3400_2_front_2_white;
	1:	KS3400_2_middle_2;
	4:	KS3400_2_middle_3a;
	6:	KS3400_2_middle_2;
	7:	KS3400_2_front_1_red;
	KS3400_2_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_2, extra_callback_info1) {
	1:	KS3400_2_reverse;
	KS3400_2_forward;
}

switch (FEAT_TRAINS, SELF, KS3400_3_forward, position_in_consist % 8) {
	0:	KS3400_3_front_1_white;
	1:	KS3400_3_middle_2;
	3:	KS3400_3_middle_3b;
	6:	KS3400_3_middle_2;
	7:	KS3400_3_front_2_red;
	KS3400_3_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_3_reverse, position_in_consist % 8) {
	0:	KS3400_3_front_2_white;
	1:	KS3400_3_middle_2;
	4:	KS3400_3_middle_3a;
	6:	KS3400_3_middle_2;
	7:	KS3400_3_front_1_red;
	KS3400_3_middle_1;
}

switch (FEAT_TRAINS, SELF, KS3400_3, extra_callback_info1) {
	1:	KS3400_3_reverse;
	KS3400_3_forward;
}

switch (FEAT_TRAINS, PARENT, sw_KS3400, date_of_last_service) {
	0 .. date (1996, 1, 1): KS3400_1;
	date (1996, 1, 2) .. date (2006, 1, 1): KS3400_2;
	KS3400_3;
}

switch (FEAT_TRAINS, PARENT, KS3400_purchase, date_of_last_service) {
	0 .. date (1996, 1, 1): KS3400_1_purchase;
	date (1996, 1, 2) .. date (2006, 1, 1): KS3400_2_purchase;
	KS3400_3_purchase;
}

// Keisei Type 3400, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3400_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3400;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3400_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3400_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3400_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3400_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3400_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei 3400 Type, sound //

switch(FEAT_TRAINS, SELF, sw_KS3400_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3400_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3400_start_sound, param_sound_effect) {
	1: sw_KS3400_start_sound_1;
	2: sw_KS3400_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3400, item //

item(FEAT_TRAINS, item_KS3400) {
	property {
		name:							string(STR_KS3400_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1993, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3360 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_KS3400;
		purchase:						KS3400_purchase;
		articulated_part:				sw_KS3400_articulated_part;
		start_stop:						sw_KS3400_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3400_can_attach_wagon;
		additional_text:				return string(STR_KS3400_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3400_effect;
		sound_effect:					sw_KS3400_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3000, 2nd Series //

// Keisei Type 3000, 2nd Series, graphics //

spriteset (KS3000_2_middle_1a, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3000_2_middle_1b, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3000_2_middle_2a, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3000_2_middle_2b, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3000_2_middle_3a, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3000_2_middle_3b, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3000_2_front_1_white, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3000_2_front_1_red, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3000_2_front_2_white, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3000_2_front_2_red, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3000_2_purchase, "gfx/Keisei/3000-3050-2/KS3000-2.png") { tmpl_purchase(0, 300) }

switch(FEAT_TRAINS, SELF, KS3000_2_6_forward, position_in_consist % 6) {
	0:	KS3000_2_front_1_white;
	1:	KS3000_2_middle_2b;
	4:	KS3000_2_middle_2b;
	5:	KS3000_2_front_2_red;
	KS3000_2_middle_1b;
}

switch(FEAT_TRAINS, SELF, KS3000_2_6_reverse, position_in_consist % 6) {
	0:	KS3000_2_front_2_white;
	1:	KS3000_2_middle_2a;
	4:	KS3000_2_middle_2a;
	5:	KS3000_2_front_1_red;
	KS3000_2_middle_1a;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_6, extra_callback_info1) {
	1:	KS3000_2_6_reverse;
	KS3000_2_6_forward;
}

switch(FEAT_TRAINS, SELF, KS3000_2_8_forward, position_in_consist % 8) {
	0:	KS3000_2_front_1_white;
	1:	KS3000_2_middle_2b;
	3:	KS3000_2_middle_3b;
	6:	KS3000_2_middle_2b;
	7:	KS3000_2_front_2_red;
	KS3000_2_middle_1b;
}

switch(FEAT_TRAINS, SELF, KS3000_2_8_reverse, position_in_consist % 8) {
	0:	KS3000_2_front_2_white;
	1:	KS3000_2_middle_2a;
	4:	KS3000_2_middle_3a;
	6:	KS3000_2_middle_2a;
	7:	KS3000_2_front_1_red;
	KS3000_2_middle_1a;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_8, extra_callback_info1) {
	1:	KS3000_2_8_reverse;
	KS3000_2_8_forward;
}

// Keisei Type 3000, 2nd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3000_2_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_KS3000_2_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_KS3000_2_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3000_2_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3000_2_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3000_2_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_6_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3000, 2nd Series, sound //

switch(FEAT_TRAINS, SELF, sw_KS3000_2_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3000_2_start_sound, param_sound_effect) {
	1: sw_KS3000_2_start_sound_1;
	2: sw_KS3000_2_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3000, 2nd Series, item //

item(FEAT_TRAINS, item_KS3000_2_6) {
	property {
		name:							string(STR_KS3000_2_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2003, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					50;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2250 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3000_2_6;
		purchase:						KS3000_2_purchase;
		articulated_part:				sw_KS3000_2_6_articulated_part;
		start_stop:						sw_KS3000_2_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 *6)/10));
		can_attach_wagon:				sw_KS3000_2_can_attach_wagon;
		additional_text:				return string(STR_KS3000_2_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_2_6_effect;
		sound_effect:					sw_KS3000_2_start_sound;
	}
}

item(FEAT_TRAINS, item_KS3000_2_8) {
	property {
		name:							string(STR_KS3000_2_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2003, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					60;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3000_2_8;
		purchase:						KS3000_2_purchase;
		articulated_part:				sw_KS3000_2_8_articulated_part;
		start_stop:						sw_KS3000_2_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3000_2_can_attach_wagon;
		additional_text:				return string(STR_KS3000_2_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3000_2_8_effect;
		sound_effect:					sw_KS3000_2_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type AE2 //

// Keisei Type AE2, graphics //

spriteset (KSAE2_f_1, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KSAE2_f_2, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KSAE2_f_3, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KSAE2_f_4, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KSAE2_f_5, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KSAE2_f_6, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KSAE2_f_7, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KSAE2_f_8, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KSAE2_r_1, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KSAE2_r_2, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KSAE2_r_3, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (KSAE2_r_4, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (KSAE2_r_5, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 360) }
spriteset (KSAE2_r_6, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 390) }
spriteset (KSAE2_r_7, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 420) }
spriteset (KSAE2_r_8, "gfx/Keisei/AE2/KSAE2.png") { tmpl_vehicle_8_length(0, 450) }
spriteset (KSAE2_purchase, "gfx/Keisei/AE2/KSAE2.png") { tmpl_purchase(0, 480) }

switch(FEAT_TRAINS, SELF, AE2_forward, position_in_consist % 8) {
	0:	KSAE2_f_1;
	1:	KSAE2_f_2;
	2:	KSAE2_f_3;
	3:	KSAE2_f_4;
	4:	KSAE2_f_5;
	5:	KSAE2_f_6;
	6:	KSAE2_f_7;
	KSAE2_f_8;
}

switch(FEAT_TRAINS, SELF, AE2_reverse, position_in_consist % 8) {
	0:	KSAE2_r_1;
	1:	KSAE2_r_2;
	2:	KSAE2_r_3;
	3:	KSAE2_r_4;
	4:	KSAE2_r_5;
	5:	KSAE2_r_6;
	6:	KSAE2_r_7;
	KSAE2_r_8;
}

switch(FEAT_TRAINS, SELF, sw_KSAE2, extra_callback_info1) {
	1: AE2_reverse;
	AE2_forward;
}

// Keisei Type AE2, callbacks //

switch (FEAT_TRAINS, SELF, sw_KSAE2_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KSAE2;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KSAE2_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KSAE2_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KSAE2_can_attach_wagon, vehicle_type_id) {
	return string(STR_KSAE2_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KSAE2_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type AE2, sound //

switch(FEAT_TRAINS, SELF, sw_KSAE2_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn04.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE2_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn04.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KSAE2_start_sound, param_sound_effect) {
	1: sw_KSAE2_start_sound_1;
	2: sw_KSAE2_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type AE2, item //

item(FEAT_TRAINS, item_KSAE2) {
	property {
		name:							string(STR_KSAE2_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2009, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				10;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_1D; 
		cost_factor:					230;
		running_cost_factor:			255;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							160 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							4200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					49;
		weight:							38 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KSAE2;
		purchase:						KSAE2_purchase;
		articulated_part:				sw_KSAE2_articulated_part;
		start_stop:						sw_KSAE2_start_stop;
		purchase_running_cost_factor:	return (160 + ((param_capacities_4 * 8)/10));
		can_attach_wagon:				sw_KSAE2_can_attach_wagon;
		additional_text:				return string(STR_KSAE2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KSAE2_effect;
		sound_effect:					sw_KSAE2_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Keisei Type 3050, 2nd Series //

// Keisei Type 3050, 2nd Series, graphics //

spriteset (KS3050_2_middle_1a, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (KS3050_2_middle_1b, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (KS3050_2_middle_2a, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (KS3050_2_middle_2b, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (KS3050_2_middle_3a, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (KS3050_2_middle_3b, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (KS3050_2_front_1_white, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (KS3050_2_front_1_red, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (KS3050_2_front_2_white, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (KS3050_2_front_2_red, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (KS3050_2_purchase, "gfx/Keisei/3000-3050-2/KS3050-2.png") { tmpl_purchase(0, 300) }

switch(FEAT_TRAINS, SELF, KS3050_2_forward, position_in_consist % 8) {
	0:	KS3050_2_front_1_white;
	1:	KS3050_2_middle_2b;
	3:	KS3050_2_middle_3b;
	6:	KS3050_2_middle_2b;
	7:	KS3050_2_front_2_red;
	KS3050_2_middle_1b;
}

switch(FEAT_TRAINS, SELF, KS3050_2_reverse, position_in_consist % 8) {
	0:	KS3050_2_front_2_white;
	1:	KS3050_2_middle_2a;
	4:	KS3050_2_middle_3a;
	6:	KS3050_2_middle_2a;
	7:	KS3050_2_front_1_red;
	KS3050_2_middle_1a;
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2, extra_callback_info1) {
	1:	KS3050_2_reverse;
	KS3050_2_forward;
}

// Keisei Type 3050, 2nd Series, callbacks //

switch (FEAT_TRAINS, SELF, sw_KS3050_2_articulated_part, extra_callback_info1) {
	0 .. 7: return item_KS3050_2;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_KS3050_2_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2_can_attach_wagon, vehicle_type_id) {
	return string(STR_KS3050_2_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Keisei Type 3050, 2nd Series, sound //

switch(FEAT_TRAINS, SELF, sw_KS3050_2_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_KS3050_2_start_sound, param_sound_effect) {
	1: sw_KS3050_2_start_sound_1;
	2: sw_KS3050_2_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Keisei Type 3050, 2nd Series, item //

item(FEAT_TRAINS, item_KS3050_2) {
	property {
		name:							string(STR_KS3050_2_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2010, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					65;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							130 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_KS3050_2;
		purchase:						KS3050_2_purchase;
		articulated_part:				sw_KS3050_2_articulated_part;
		start_stop:						sw_KS3050_2_start_stop;
		purchase_running_cost_factor:	return (130 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_KS3050_2_can_attach_wagon;
		additional_text:				return string(STR_KS3050_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_KS3050_2_effect;
		sound_effect:					sw_KS3050_2_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// HOKUSO //

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Kaihatsu Type 7000 //

// Hokuso Kaihatsu Type 7000, graphics //

spriteset (HKT7000_middle_1, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7000_middle_2, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7000_middle_3b, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7000_middle_3a, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7000_front_1_white, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7000_front_1_red, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7000_front_2_white, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HKT7000_front_2_red, "gfx/Hokuso/HKT7000.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HKT7000_purchase, "gfx/Hokuso/HKT7000.png") { tmpl_purchase(0, 240) }

switch (FEAT_TRAINS, SELF, HKT7000_6_forward, position_in_consist % 6) {
	0:	HKT7000_front_1_white;
	2:	HKT7000_middle_2;
	4:	HKT7000_middle_2;
	5:	HKT7000_front_2_red;
	HKT7000_middle_1;
}

switch (FEAT_TRAINS, SELF, HKT7000_6_reverse, position_in_consist % 6) {
	0:	HKT7000_front_2_white;
	1:	HKT7000_middle_2;
	3:	HKT7000_middle_2;
	5:	HKT7000_front_1_red;
	HKT7000_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_HKT7000_6, extra_callback_info1) {
	1:	HKT7000_6_reverse;
	HKT7000_6_forward;
}

switch (FEAT_TRAINS, SELF, HKT7000_8_forward, position_in_consist % 8) {
	0:	HKT7000_front_1_white;
	2:	HKT7000_middle_2;
	4:	HKT7000_middle_3a;
	6:	HKT7000_middle_2;
	7:	HKT7000_front_2_red;
	HKT7000_middle_1;
}

switch (FEAT_TRAINS, SELF, HKT7000_8_reverse, position_in_consist % 8) {
	0:	HKT7000_front_2_white;
	1:	HKT7000_middle_2;
	3:	HKT7000_middle_3b;
	5:	HKT7000_middle_2;
	7:	HKT7000_front_1_red;
	HKT7000_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_HKT7000_8, extra_callback_info1) {
	1:	HKT7000_8_reverse;
	HKT7000_8_forward;
}

// Hokuso Kaihatsu Type 7000, callbacks //

switch (FEAT_TRAINS, SELF, sw_HKT7000_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_HKT7000_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_HKT7000_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_HKT7000_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HKT7000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_can_attach_wagon, vehicle_type_id) {
	return string(STR_HKT7000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_6_effect, position_in_consist & 6) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_8_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Kaihatsu Type 7000, sound //

switch(FEAT_TRAINS, SELF, sw_HKT7000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn05.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn05.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn05.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7000_start_sound, param_sound_effect) {
	1: sw_HKT7000_start_sound_1;
	2: sw_HKT7000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso Kaihatsu Type 7000, item //

item(FEAT_TRAINS, item_HKT7000_6) {
	property {
		name:							string(STR_HKT7000_6_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1979, 1, 1);
		model_life:						12;
		retire_early:					5;
		vehicle_life:					9;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					48;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							105 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2340 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HKT7000_6;
		purchase:						HKT7000_purchase;
		articulated_part:				sw_HKT7000_6_articulated_part;
		start_stop:						sw_HKT7000_start_stop;
		purchase_running_cost_factor:	return (105 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_HKT7000_can_attach_wagon;
		additional_text:				return string(STR_HKT7000_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7000_6_effect;
		sound_effect:					sw_HKT7000_start_sound;
	}
}

item(FEAT_TRAINS, item_HKT7000_8) {
	property {
		name:							string(STR_HKT7000_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						18;
		retire_early:					9;
		vehicle_life:					13;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					58;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							105 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HKT7000_8;
		purchase:						HKT7000_purchase;
		articulated_part:				sw_HKT7000_8_articulated_part;
		start_stop:						sw_HKT7000_start_stop;
		purchase_running_cost_factor:	return (105 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_HKT7000_can_attach_wagon;
		additional_text:				return string(STR_HKT7000_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7000_8_effect;
		sound_effect:					sw_HKT7000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Kaihatsu Type 7150 //

// Hokuso Kaihatsu Type 7150, graphics //

spriteset (HKT7150_1_middle_1, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7150_1_middle_2a, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7150_1_middle_2b, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7150_1_front_1_white, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7150_1_front_1_red, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7150_1_front_2_white, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7150_1_front_2_red, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HKT7150_1_front_3_white, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HKT7150_1_front_3_red, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (HKT7150_1_front_4_white, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (HKT7150_1_front_4_red, "gfx/Hokuso/HKT7150-1.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (HKT7150_1_purchase, "gfx/Hokuso/HKT7150-1.png") { tmpl_purchase(0, 330) }
spriteset (HKT7150_2_1a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7150_2_2a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7150_2_3a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7150_2_4a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7150_2_5a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7150_2_6a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7150_2_7a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HKT7150_2_8a, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HKT7150_2_1b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (HKT7150_2_2b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (HKT7150_2_3b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (HKT7150_2_4b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (HKT7150_2_5b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 360) }
spriteset (HKT7150_2_6b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 390) }
spriteset (HKT7150_2_7b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 420) }
spriteset (HKT7150_2_8b, "gfx/Hokuso/HKT7150-2.png") { tmpl_vehicle_8_length(0, 450) }
spriteset (HKT7150_2_purchase, "gfx/Hokuso/HKT7150-2.png") { tmpl_purchase(0, 480) }

switch(FEAT_TRAINS, SELF, HKT7150_1_forward, position_in_consist % 8) {
	0:	HKT7150_1_front_1_white;
	1:	HKT7150_1_middle_2a;
	2:	HKT7150_1_middle_1;
	3:	HKT7150_1_front_4_red;
	4:	HKT7150_1_front_1_red;
	5:	HKT7150_1_middle_2a;
	6:	HKT7150_1_middle_2b;
	HKT7150_1_front_2_red;
}

switch(FEAT_TRAINS, SELF, HKT7150_1_reverse, position_in_consist % 8) {
	0:	HKT7150_1_front_2_white;
	1:	HKT7150_1_middle_2b;
	2:	HKT7150_1_middle_2a;
	3:	HKT7150_1_front_1_red;
	4:	HKT7150_1_front_3_red;
	5:	HKT7150_1_middle_1;
	6:	HKT7150_1_middle_2b;
	HKT7150_1_front_1_red;
}

switch (FEAT_TRAINS, SELF, HKT7150_1, extra_callback_info1) {
	1:	HKT7150_1_reverse;
	HKT7150_1_forward;
}

switch(FEAT_TRAINS, SELF, HKT7150_2_forward, position_in_consist % 8) {
	0:	HKT7150_2_1a;
	1:	HKT7150_2_2a;
	2:	HKT7150_2_3a;
	3:	HKT7150_2_4a;
	4:	HKT7150_2_5a;
	5:	HKT7150_2_6a;
	6:	HKT7150_2_7a;
	HKT7150_2_8a;
}

switch(FEAT_TRAINS, SELF, HKT7150_2_reverse, position_in_consist % 8) {
	0:	HKT7150_2_8b;
	1:	HKT7150_2_7b;
	2:	HKT7150_2_6b;
	3:	HKT7150_2_5b;
	4:	HKT7150_2_4b;
	5:	HKT7150_2_3b;
	6:	HKT7150_2_2b;
	HKT7150_2_1b;
}

switch (FEAT_TRAINS, SELF, HKT7150_2, extra_callback_info1) {
	1:	HKT7150_2_reverse;
	HKT7150_2_forward;
}

switch (FEAT_TRAINS, PARENT, sw_HKT7150, date_of_last_service) {
	0 .. date (1995, 1, 1): HKT7150_1;
	HKT7150_2;
}

switch (FEAT_TRAINS, PARENT, HKT7150_purchase, date_of_last_service) {
	0 .. date (1995, 1, 1): HKT7150_1_purchase;
	HKT7150_2_purchase;
}

// Hokuso Kaihatsu Type 7150, callbacks //

switch (FEAT_TRAINS, SELF, sw_HKT7150_articulated_part, extra_callback_info1) {
	0 .. 3: return item_HKT7150;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HKT7150_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HKT7150_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HKT7150_can_attach_wagon, vehicle_type_id) {
	item_HKT7150: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_HKT7150_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HKT7150_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Kaihatsu Type 7150, sound //

switch(FEAT_TRAINS, SELF, sw_HKT7150_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7150_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7150_start_sound, param_sound_effect) {
	1: sw_HKT7150_start_sound_1;
	2: sw_HKT7150_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso Kaihatsu 7150 Type, item //

item(FEAT_TRAINS, item_HKT7150) {
	property {
		name:							string(STR_HKT7150_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					41;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							120 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HKT7150;
		purchase:						HKT7150_purchase;
		articulated_part:				sw_HKT7150_articulated_part;
		start_stop:						sw_HKT7150_start_stop;
		purchase_running_cost_factor:	return (120 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_HKT7150_can_attach_wagon;
		additional_text:				return string(STR_HKT7150_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7150_effect;
		sound_effect:					sw_HKT7150_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Kaihatsu Type 7050 //

// Hokuso Kaihatsu Type 7050, graphics //

spriteset (HKT7050_middle_1, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7050_middle_2a, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7050_middle_2b, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7050_front_1_white, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7050_front_1_red, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7050_front_2_white, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7050_front_2_red, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HKT7050_front_3_white, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HKT7050_front_3_red, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (HKT7050_front_4_white, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (HKT7050_front_4_red, "gfx/Hokuso/HKT7050.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (HKT7050_purchase, "gfx/Hokuso/HKT7050.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, HKT7050_forwards, position_in_consist % 4) {
	0:	HKT7050_front_1_white;
	1:	HKT7050_middle_2a;
	2:	HKT7050_middle_1;
	HKT7050_front_2_red;
}

switch(FEAT_TRAINS, SELF, HKT7050_reverse, position_in_consist % 4) {
	0:	HKT7050_front_3_white;
	1:	HKT7050_middle_2b;
	2:	HKT7050_middle_1;
	HKT7050_front_4_red;
}

switch(FEAT_TRAINS, SELF, sw_HKT7050, extra_callback_info1) {
	1: HKT7050_reverse;
	HKT7050_forwards;
}

// Hokuso Kaihatsu Type 7050, callbacks //

switch (FEAT_TRAINS, SELF, sw_HKT7050_articulated_part, extra_callback_info1) {
	0 .. 3: return item_HKT7050;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HKT7050_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HKT7050_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HKT7050_can_attach_wagon, vehicle_type_id) {
	item_HKT7050: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_HKT7050_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HKT7050_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Kaihatsu Type 7050, sound //

switch(FEAT_TRAINS, SELF, sw_HKT7050_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7050_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7050_start_sound, param_sound_effect) {
	1: sw_HKT7050_start_sound_1;
	2: sw_HKT7050_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso Kaihatsu 7050 Type, item //

item(FEAT_TRAINS, item_HKT7050) {
	property {
		name:							string(STR_HKT7050_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1995, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					39;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HKT7050;
		purchase:						HKT7050_purchase;
		articulated_part:				sw_HKT7050_articulated_part;
		start_stop:						sw_HKT7050_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_HKT7050_can_attach_wagon;
		additional_text:				return string(STR_HKT7050_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7050_effect;
		sound_effect:					sw_HKT7050_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Kaihatsu Type 7300 //

// Hokuso Kaihatsu Type 7300, graphics //

spriteset (HKT7300_middle_1, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7300_middle_2, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7300_middle_3a, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7300_middle_3b, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7300_front_1_white, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7300_front_1_red, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7300_front_2_white, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HKT7300_front_2_red, "gfx/Hokuso/HKT7300.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HKT7300_purchase, "gfx/Hokuso/HKT7300.png") { tmpl_purchase(0, 240) }

switch (FEAT_TRAINS, SELF, HKT7300_forward, position_in_consist % 8) {
	0:	HKT7300_front_1_white;
	1:	HKT7300_middle_2;
	3:	HKT7300_middle_3b;
	6:	HKT7300_middle_2;
	7:	HKT7300_front_2_red;
	HKT7300_middle_1;
}

switch (FEAT_TRAINS, SELF, HKT7300_reverse, position_in_consist % 8) {
	0:	HKT7300_front_2_white;
	1:	HKT7300_middle_2;
	4:	HKT7300_middle_3a;
	6:	HKT7300_middle_2;
	7:	HKT7300_front_1_red;
	HKT7300_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_HKT7300, extra_callback_info1) {
	1:	HKT7300_reverse;
	HKT7300_forward;
}

// Hokuso Kaihatsu Type 7300, callbacks //

switch (FEAT_TRAINS, SELF, sw_HKT7300_articulated_part, extra_callback_info1) {
	0 .. 7: return item_HKT7300;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HKT7300_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HKT7300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HKT7300_can_attach_wagon, vehicle_type_id) {
	return string(STR_HKT7300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HKT7300_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Kaihatsu Type 7300, sound //

switch(FEAT_TRAINS, SELF, sw_HKT7300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7300_start_sound, param_sound_effect) {
	1: sw_HKT7300_start_sound_1;
	2: sw_HKT7300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso Kaihatsu 7300 Type, item //

item(FEAT_TRAINS, item_HKT7300) {
	property {
		name:							string(STR_HKT7300_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_HKT7300;
		purchase:						HKT7300_purchase;
		articulated_part:				sw_HKT7300_articulated_part;
		start_stop:						sw_HKT7300_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_HKT7300_can_attach_wagon;
		additional_text:				return string(STR_HKT7300_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7300_effect;
		sound_effect:					sw_HKT7300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Kaihatsu Type 7250 //

// Hokuso Kaihatsu Type 7250, graphics //

spriteset (HKT7250_middle_1, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HKT7250_middle_2, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HKT7250_front_1_white, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HKT7250_front_1_red, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HKT7250_front_2_white, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HKT7250_front_2_red, "gfx/Hokuso/HKT7250.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HKT7250_purchase, "gfx/Hokuso/HKT7250.png") { tmpl_purchase(0, 180) }

switch (FEAT_TRAINS, SELF, HKT7250_forward, position_in_consist % 8) {
	0:	HKT7250_front_1_white;
	1:	HKT7250_middle_2;
	6:	HKT7250_middle_2;
	7:	HKT7250_front_2_red;
	HKT7250_middle_1;
}

switch (FEAT_TRAINS, SELF, HKT7250_reverse, position_in_consist % 8) {
	0:	HKT7250_front_2_white;
	1:	HKT7250_middle_2;
	6:	HKT7250_middle_2;
	7:	HKT7250_front_1_red;
	HKT7250_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_HKT7250, extra_callback_info1) {
	1: HKT7250_reverse;
	HKT7250_forward;
}

// Hokuso Kaihatsu Type 7250, callbacks //

switch (FEAT_TRAINS, SELF, sw_HKT7250_articulated_part, extra_callback_info1) {
	0 .. 7: return item_HKT7250;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HKT7250_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HKT7250_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HKT7250_can_attach_wagon, vehicle_type_id) {
	return string(STR_HKT7250_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HKT7250_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Kaihatsu Type 7250, sound //

switch(FEAT_TRAINS, SELF, sw_HKT7250_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7250_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HKT7250_start_sound, param_sound_effect) {
	1: sw_HKT7250_start_sound_1;
	2: sw_HKT7250_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso Kaihatsu 7250 Type, item //

item(FEAT_TRAINS, item_HKT7250) {
	property {
		name:							string(STR_HKT7250_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2003, 1, 1);
		model_life:						3;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					60;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1400 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HKT7250;
		purchase:						HKT7250_purchase;
		articulated_part:				sw_HKT7250_articulated_part;
		start_stop:						sw_HKT7250_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_HKT7250_can_attach_wagon;
		additional_text:				return string(STR_HKT7250_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HKT7250_effect;
		sound_effect:					sw_HKT7250_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Type 7260 //

// Hokuso Type 7260, graphics //

spriteset (HT7260_middle_1a, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HT7260_middle_1b, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HT7260_front_1_white, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HT7260_front_1_red, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HT7260_front_2_white, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HT7260_front_2_red, "gfx/Hokuso/HT7260.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HT7260_purchase, "gfx/Hokuso/HT7260.png") { tmpl_purchase(0, 180) }

switch (FEAT_TRAINS, SELF, HT7260_forward, position_in_consist % 4) {
	0:	HT7260_front_1_white;
	1:	HT7260_middle_1a;
	2:	HT7260_middle_1b;
	HT7260_front_2_red;
}

switch (FEAT_TRAINS, SELF, HT7260_reverse, position_in_consist % 4) {
	0:	HT7260_front_2_white;
	1:	HT7260_middle_1b;
	2:	HT7260_middle_1a;
	HT7260_front_1_red;
}

switch (FEAT_TRAINS, SELF, sw_HT7260, extra_callback_info1) {
	1: HT7260_reverse;
	HT7260_forward;
}

// Hokuso Type 7260, callbacks //

switch (FEAT_TRAINS, SELF, sw_HT7260_articulated_part, extra_callback_info1) {
	0 .. 3: return item_HT7260;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HT7260_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HT7260_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HT7260_can_attach_wagon, vehicle_type_id) {
	item_HT7260: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_HT7260_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HT7260_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Type 7260, sound //

switch(FEAT_TRAINS, SELF, sw_HT7260_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HT7260_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HT7260_start_sound, param_sound_effect) {
	1: sw_HT7260_start_sound_1;
	2: sw_HT7260_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso 7260 Type, item //

item(FEAT_TRAINS, item_HT7260) {
	property {
		name:							string(STR_HT7260_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2003, 1, 1);
		model_life:						7;
		retire_early:					-1;
		vehicle_life:					3;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					39;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_HT7260;
		purchase:						HT7260_purchase;
		articulated_part:				sw_HT7260_articulated_part;
		start_stop:						sw_HT7260_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_HT7260_can_attach_wagon;
		additional_text:				return string(STR_HT7260_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HT7260_effect;
		sound_effect:					sw_HT7260_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Hokuso Type 7500 //

// Hokuso Type 7500, graphics //

spriteset (HT7500_middle_1a, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (HT7500_middle_1b, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (HT7500_middle_2a, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (HT7500_middle_2b, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (HT7500_middle_3a, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (HT7500_middle_3b, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (HT7500_front_1_white, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (HT7500_front_1_red, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (HT7500_front_2_white, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (HT7500_front_2_red, "gfx/Hokuso/HT7500.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (HT7500_purchase, "gfx/Hokuso/HT7500.png") { tmpl_purchase(0, 300) }

switch(FEAT_TRAINS, SELF, HT7500_8_forward, position_in_consist % 8) {
	0:	HT7500_front_1_white;
	1:	HT7500_middle_2b;
	3:	HT7500_middle_3b;
	6:	HT7500_middle_2b;
	7:	HT7500_front_2_red;
	HT7500_middle_1b;
}

switch(FEAT_TRAINS, SELF, HT7500_8_reverse, position_in_consist % 8) {
	0:	HT7500_front_2_white;
	1:	HT7500_middle_2a;
	4:	HT7500_middle_3a;
	6:	HT7500_middle_2a;
	7:	HT7500_front_1_red;
	HT7500_middle_1a;
}

switch(FEAT_TRAINS, SELF, sw_HT7500, extra_callback_info1) {
	1:	HT7500_8_reverse;
	HT7500_8_forward;
}

// Hokuso Type 7500, callbacks //

switch (FEAT_TRAINS, SELF, sw_HT7500_articulated_part, extra_callback_info1) {
	0 .. 7: return item_HT7500;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_HT7500_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_HT7500_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_HT7500_can_attach_wagon, vehicle_type_id) {
	return string(STR_HT7500_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_HT7500_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Hokuso Type 7500, sound //

switch(FEAT_TRAINS, SELF, sw_HT7500_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HT7500_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_HT7500_start_sound, param_sound_effect) {
	1: sw_HT7500_start_sound_1;
	2: sw_HT7500_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Hokuso 7500 Type, item //

item(FEAT_TRAINS, item_HT7500) {
	property {
		name:							string(STR_HT7500_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(2003, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					59;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_HT7500;
		purchase:						HT7500_purchase;
		articulated_part:				sw_HT7500_articulated_part;
		start_stop:						sw_HT7500_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_HT7500_can_attach_wagon;
		additional_text:				return string(STR_HT7500_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_HT7500_effect;
		sound_effect:					sw_HT7500_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// CHIBA NEW TOWN //

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba New Town Type 2000/9000 //

// Chiba New Town Type 2000/9000, graphics //

spriteset (CNT9000_1_middle_1, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CNT9000_1_middle_2, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CNT9000_1_middle_3b, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CNT9000_1_middle_3a, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CNT9000_1_front_1_white, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CNT9000_1_front_1_red, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CNT9000_1_front_2_white, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CNT9000_1_front_2_red, "gfx/Chiba-New-Town/9000/CNT9000-1.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CNT9000_2_middle_1, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CNT9000_2_middle_2, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CNT9000_2_middle_3b, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CNT9000_2_middle_3a, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CNT9000_2_front_1_white, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CNT9000_2_front_1_red, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CNT9000_2_front_2_white, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CNT9000_2_front_2_red, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CNT9000_purchase, "gfx/Chiba-New-Town/9000/CNT9000-2.png") { tmpl_purchase(0, 240) }

switch (FEAT_TRAINS, SELF, CNT9000_6_forward, position_in_consist % 6) {
	0:	CNT9000_1_front_1_white;
	2:	CNT9000_1_middle_2;
	4:	CNT9000_1_middle_2;
	5:	CNT9000_1_front_2_red;
	CNT9000_1_middle_1;
}

switch (FEAT_TRAINS, SELF, CNT9000_6_reverse, position_in_consist % 6) {
	0:	CNT9000_1_front_2_white;
	1:	CNT9000_1_middle_2;
	3:	CNT9000_1_middle_2;
	5:	CNT9000_1_front_1_red;
	CNT9000_1_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_CNT9000_6, extra_callback_info1) {
	1:	CNT9000_6_reverse;
	CNT9000_6_forward;
}

switch (FEAT_TRAINS, SELF, CNT9000_1_8_forward, position_in_consist % 8) {
	0:	CNT9000_1_front_1_white;
	2:	CNT9000_1_middle_2;
	4:	CNT9000_1_middle_3a;
	6:	CNT9000_1_middle_2;
	7:	CNT9000_1_front_2_red;
	CNT9000_1_middle_1;
}

switch (FEAT_TRAINS, SELF, CNT9000_1_8_reverse, position_in_consist % 8) {
	0:	CNT9000_1_front_2_white;
	1:	CNT9000_1_middle_2;
	3:	CNT9000_1_middle_3b;
	5:	CNT9000_1_middle_2;
	7:	CNT9000_1_front_1_red;
	CNT9000_1_middle_1;
}

switch (FEAT_TRAINS, SELF, CNT9000_1_8, extra_callback_info1) {
	1:	CNT9000_1_8_reverse;
	CNT9000_1_8_forward;
}

switch (FEAT_TRAINS, SELF, CNT9000_2_8_forward, position_in_consist % 8) {
	0:	CNT9000_2_front_1_white;
	2:	CNT9000_2_middle_2;
	4:	CNT9000_2_middle_3a;
	6:	CNT9000_2_middle_2;
	7:	CNT9000_2_front_2_red;
	CNT9000_2_middle_1;
}

switch (FEAT_TRAINS, SELF, CNT9000_2_8_reverse, position_in_consist % 8) {
	0:	CNT9000_2_front_2_white;
	1:	CNT9000_2_middle_2;
	3:	CNT9000_2_middle_3b;
	5:	CNT9000_2_middle_2;
	7:	CNT9000_2_front_1_red;
	CNT9000_2_middle_1;
}

switch (FEAT_TRAINS, SELF, CNT9000_2_8, extra_callback_info1) {
	1:	CNT9000_2_8_reverse;
	CNT9000_2_8_forward;
}

switch (FEAT_TRAINS, PARENT, sw_CNT9000_8, date_of_last_service) {
	0 .. date (2004, 1, 1): CNT9000_1_8;
	CNT9000_2_8;
}

// Chiba New Town Type 2000/9000, callbacks //

switch (FEAT_TRAINS, SELF, sw_CNT9000_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_CNT9000_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_CNT9000_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_CNT9000_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_CNT9000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_can_attach_wagon, vehicle_type_id) {
	return string(STR_CNT9000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_6_effect, position_in_consist & 6) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_8_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba New Town Type 2000/9000, sound //

switch(FEAT_TRAINS, SELF, sw_CNT9000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CNT9000_start_sound, param_sound_effect) {
	1: sw_CNT9000_start_sound_1;
	2: sw_CNT9000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba New Town Type 2000/9000, item //

item(FEAT_TRAINS, item_CNT9000_6) {
	property {
		name:							string(STR_CNT9000_6_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1983, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					49;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2340 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_CNT9000_6;
		purchase:						CNT9000_purchase;
		articulated_part:				sw_CNT9000_6_articulated_part;
		start_stop:						sw_CNT9000_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_CNT9000_can_attach_wagon;
		additional_text:				return string(STR_CNT9000_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CNT9000_6_effect;
		sound_effect:					sw_CNT9000_start_sound;
	}
}

item(FEAT_TRAINS, item_CNT9000_8) {
	property {
		name:							string(STR_CNT9000_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					15;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					59;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_CNT9000_8;
		purchase:						CNT9000_purchase;
		articulated_part:				sw_CNT9000_8_articulated_part;
		start_stop:						sw_CNT9000_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_CNT9000_can_attach_wagon;
		additional_text:				return string(STR_CNT9000_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CNT9000_8_effect;
		sound_effect:					sw_CNT9000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba New Town Type 9100 //

// Chiba New Town Type 9100, graphics //

spriteset (CNT9100_f_1, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CNT9100_f_2, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CNT9100_f_3, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CNT9100_f_4, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CNT9100_f_5, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CNT9100_f_6, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CNT9100_f_7, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CNT9100_f_8, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CNT9100_r_1, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (CNT9100_r_2, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (CNT9100_r_3, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (CNT9100_r_4, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 330) }
spriteset (CNT9100_r_5, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 360) }
spriteset (CNT9100_r_6, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 390) }
spriteset (CNT9100_r_7, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 420) }
spriteset (CNT9100_r_8, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_vehicle_8_length(0, 450) }
spriteset (CNT9100_purchase, "gfx/Chiba-New-Town/9100/CNT9100.png") { tmpl_purchase(0, 480) }

switch(FEAT_TRAINS, SELF, CNT9100_forward, position_in_consist % 8) {
	0:	CNT9100_f_1;
	1:	CNT9100_f_2;
	2:	CNT9100_f_3;
	3:	CNT9100_f_4;
	4:	CNT9100_f_5;
	5:	CNT9100_f_6;
	6:	CNT9100_f_7;
	CNT9100_f_8;
}

switch(FEAT_TRAINS, SELF, CNT9100_reverse, position_in_consist % 8) {
	0:	CNT9100_r_1;
	1:	CNT9100_r_2;
	2:	CNT9100_r_3;
	3:	CNT9100_r_4;
	4:	CNT9100_r_5;
	5:	CNT9100_r_6;
	6:	CNT9100_r_7;
	CNT9100_r_8;
}

switch(FEAT_TRAINS, SELF, sw_CNT9100, extra_callback_info1) {
	1: CNT9100_reverse;
	CNT9100_forward;
}

// Chiba New Town Type 9100, callbacks //

switch (FEAT_TRAINS, SELF, sw_CNT9100_articulated_part, extra_callback_info1) {
	0 .. 7: return item_CNT9100;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CNT9100_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_CNT9100_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CNT9100_can_attach_wagon, vehicle_type_id) {
	return string(STR_CNT9100_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CNT9100_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba New Town Type 9100, sound //

switch(FEAT_TRAINS, SELF, sw_CNT9100_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CNT9100_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CNT9100_start_sound, param_sound_effect) {
	1: sw_CNT9100_start_sound_1;
	2: sw_CNT9100_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba New Town Type 9100, item //

item(FEAT_TRAINS, item_CNT9100) {
	property {
		name:							string(STR_CNT9100_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1994, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				10;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					61;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3120 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_CNT9100;
		purchase:						CNT9100_purchase;
		articulated_part:				sw_CNT9100_articulated_part;
		start_stop:						sw_CNT9100_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_CNT9100_can_attach_wagon;
		additional_text:				return string(STR_CNT9100_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CNT9100_effect;
		sound_effect:					sw_CNT9100_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// TOEI //

//-----------------------------------------------------------------------------------------------------------------------------


// Toei Type 5000 //

// Toei Type 5000, graphics //

spriteset (TOEI5000old_middle_1, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (TOEI5000old_middle_2a, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (TOEI5000old_middle_2b, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (TOEI5000old_front_1_white, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (TOEI5000old_front_1_red, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (TOEI5000old_front_2_white, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (TOEI5000old_front_2_red, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (TOEI5000old_front_3_white, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (TOEI5000old_front_3_red, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (TOEI5000old_front_4_white, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (TOEI5000old_front_4_red, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (TOEI5000_1_purchase, "gfx/Toei/5000/TOEI5000-old.png") { tmpl_purchase(0, 330) }
spriteset (TOEI5000new_middle_1, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (TOEI5000new_middle_2a, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (TOEI5000new_middle_2b, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (TOEI5000new_front_1_white, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (TOEI5000new_front_1_red, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (TOEI5000new_front_2_white, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (TOEI5000new_front_2_red, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (TOEI5000new_front_3_white, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (TOEI5000new_front_3_red, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (TOEI5000new_front_4_white, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (TOEI5000new_front_4_red, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (TOEI5000_2_purchase, "gfx/Toei/5000/TOEI5000-new.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, TOEI5000_old_2_forward, position_in_consist % 2) {
	0: TOEI5000old_front_1_white;
	TOEI5000old_front_2_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_old_2_reverse, position_in_consist % 2) {
	0: TOEI5000old_front_3_white;
	TOEI5000old_front_4_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_2_old, extra_callback_info1) {
	1: TOEI5000_old_2_reverse;
	TOEI5000_old_2_forward;
}

switch(FEAT_TRAINS, SELF, TOEI5000_new_2_forward, position_in_consist % 2) {
	0: TOEI5000new_front_1_white;
	TOEI5000new_front_2_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_new_2_reverse, position_in_consist % 2) {
	0: TOEI5000new_front_3_white;
	TOEI5000new_front_4_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_2_new, extra_callback_info1) {
	1: TOEI5000_new_2_reverse;
	TOEI5000_new_2_forward;
}

switch(FEAT_TRAINS, PARENT, sw_TOEI5000_2, date_of_last_service) {
	0 .. date (1991, 1, 1): TOEI5000_2_old;
	TOEI5000_2_new;
}

switch(FEAT_TRAINS, SELF, TOEI5000_old_4_forward, position_in_consist % 4) {
	0: TOEI5000old_front_1_white;
	1: TOEI5000old_middle_2a;
	2: TOEI5000old_middle_1;
	TOEI5000old_front_2_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_old_4_reverse, position_in_consist % 4) {
	0: TOEI5000old_front_3_white;
	1: TOEI5000old_middle_2b;
	2: TOEI5000old_middle_1;
	TOEI5000old_front_4_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_4_old, extra_callback_info1) {
	1: TOEI5000_old_4_reverse;
	TOEI5000_old_4_forward;
}

switch(FEAT_TRAINS, SELF, TOEI5000_new_4_forward, position_in_consist % 4) {
	0: TOEI5000new_front_1_white;
	1: TOEI5000new_middle_2a;
	2: TOEI5000new_middle_1;
	TOEI5000new_front_2_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_new_4_reverse, position_in_consist % 4) {
	0: TOEI5000new_front_3_white;
	1: TOEI5000new_middle_2a;
	2: TOEI5000new_middle_1;
	TOEI5000new_front_4_red;
}

switch(FEAT_TRAINS, SELF, TOEI5000_4_new, extra_callback_info1) {
	1: TOEI5000_new_4_reverse;
	TOEI5000_new_4_forward;
}

switch(FEAT_TRAINS, PARENT, sw_TOEI5000_4, date_of_last_service) {
	0 .. date (1991, 1, 1): TOEI5000_4_old;
	TOEI5000_4_new;
}

switch(FEAT_TRAINS, PARENT, TOEI5000_purchase, date_of_last_service) {
	0 .. date (1991, 1, 1): TOEI5000_1_purchase;
	TOEI5000_2_purchase;
}

// Toei Type 5000, callbacks //

switch (FEAT_TRAINS, SELF, sw_TOEI5000_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_TOEI5000_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_TOEI5000_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_TOEI5000_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_TOEI5000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_2_can_attach_wagon, vehicle_type_id) {
	item_TOEI5000_2: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_TOEI5000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_4_can_attach_wagon, vehicle_type_id) {
	item_TOEI5000_2: return CB_RESULT_ATTACH_ALLOW;
	item_TOEI5000_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_TOEI5000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_2_effect, position_in_consist & 2) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Toei Type 5000, sound //

switch(FEAT_TRAINS, SELF, sw_TOEI5000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5000_start_sound, param_sound_effect) {
	1: sw_TOEI5000_start_sound_1;
	2: sw_TOEI5000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Toei Type 5000, item //

item(FEAT_TRAINS, item_TOEI5000_2) {
	property {
		name:							string(STR_TOEI5000_2_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1968, 1, 1);
		model_life:						28;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					27;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							680 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_TOEI5000_2;
		purchase:						TOEI5000_purchase;
		articulated_part:				sw_TOEI5000_2_articulated_part;
		start_stop:						sw_TOEI5000_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_TOEI5000_2_can_attach_wagon;
		additional_text:				return string(STR_TOEI5000_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_TOEI5000_2_effect;
		sound_effect:					sw_TOEI5000_start_sound;
	}
}

item(FEAT_TRAINS, item_TOEI5000_4) {
	property {
		name:							string(STR_TOEI5000_4_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1968, 1, 1);
		model_life:						28;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1360 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_TOEI5000_4;
		purchase:						TOEI5000_purchase;
		articulated_part:				sw_TOEI5000_4_articulated_part;
		start_stop:						sw_TOEI5000_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_TOEI5000_4_can_attach_wagon;
		additional_text:				return string(STR_TOEI5000_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_TOEI5000_4_effect;
		sound_effect:					sw_TOEI5000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Toei Type 5200 //

// Toei Type 5200, graphics //

spriteset (TOEI5200old_middle_1, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (TOEI5200old_middle_2b, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (TOEI5200old_middle_2a, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (TOEI5200old_front_3_white, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (TOEI5200old_front_3_red, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (TOEI5200old_front_4_white, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (TOEI5200old_front_4_red, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (TOEI5200old_front_1_white, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (TOEI5200old_front_1_red, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (TOEI5200old_front_2_white, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (TOEI5200old_front_2_red, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (TOEI5200_1_purchase, "gfx/Toei/5200/TOEI5200-old.png") { tmpl_purchase(0, 330) }
spriteset (TOEI5200new_middle_1, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (TOEI5200new_middle_2b, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (TOEI5200new_middle_2a, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (TOEI5200new_front_3_white, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (TOEI5200new_front_3_red, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (TOEI5200new_front_4_white, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (TOEI5200new_front_4_red, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (TOEI5200new_front_1_white, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (TOEI5200new_front_1_red, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (TOEI5200new_front_2_white, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (TOEI5200new_front_2_red, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (TOEI5200_2_purchase, "gfx/Toei/5200/TOEI5200-new.png") { tmpl_purchase(0, 330) }

switch (FEAT_TRAINS, SELF, TOEI5200old_forward, position_in_consist % 6) {
	0: TOEI5200old_front_1_white;
	2: TOEI5200old_middle_2a;
	4: TOEI5200old_middle_2a;
	5: TOEI5200old_front_4_red;
	TOEI5200old_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5200old_reverse, position_in_consist % 6) {
	0: TOEI5200old_front_2_white;
	1: TOEI5200old_middle_2b;
	3: TOEI5200old_middle_2b;
	5: TOEI5200old_front_3_red;
	TOEI5200old_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5200old, extra_callback_info1) {
	1:	TOEI5200old_reverse;
	TOEI5200old_forward;
}

switch (FEAT_TRAINS, SELF, TOEI5200new_forward, position_in_consist % 6) {
	0: TOEI5200new_front_1_white;
	2: TOEI5200new_middle_2a;
	4: TOEI5200new_middle_2a;
	5: TOEI5200new_front_4_red;
	TOEI5200new_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5200new_reverse, position_in_consist % 6) {
	0: TOEI5200new_front_2_white;
	1: TOEI5200new_middle_2b;
	3: TOEI5200new_middle_2b;
	5: TOEI5200new_front_3_red;
	TOEI5200new_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5200new, extra_callback_info1) {
	1:	TOEI5200new_reverse;
	TOEI5200new_forward;
}

switch (FEAT_TRAINS, PARENT, sw_TOEI5200_6, date_of_last_service) {
	0 .. date (1988, 1, 1): TOEI5200old;
	TOEI5200new;
}

switch (FEAT_TRAINS, PARENT, TOEI5200_purchase, date_of_last_service) {
	0 .. date (1988, 1, 1): TOEI5200_1_purchase;
	TOEI5200_2_purchase;
}

switch (FEAT_TRAINS, SELF, TOEI5200new8_forward, position_in_consist % 8) {
	0: TOEI5200new_front_1_white;
	2: TOEI5200new_middle_2a;
	4: TOEI5200new_middle_2a;
	6: TOEI5200new_middle_2a;
	7: TOEI5200new_front_4_red;
	TOEI5200new_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5200new8_reverse, position_in_consist % 8) {
	0: TOEI5200new_front_2_white;
	1: TOEI5200new_middle_2b;
	3: TOEI5200new_middle_2b;
	5: TOEI5200new_middle_2b;
	7: TOEI5200new_front_3_red;
	TOEI5200new_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_TOEI5200_8, extra_callback_info1) {
	1:	TOEI5200new8_reverse;
	TOEI5200new8_forward;
}

// Toei Type 5200, callbacks //

switch (FEAT_TRAINS, SELF, sw_TOEI5200_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_TOEI5200_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_TOEI5200_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_TOEI5200_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_TOEI5200_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_can_attach_wagon, vehicle_type_id) {
	return string(STR_TOEI5200_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_6_effect, position_in_consist & 6) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_8_effect, position_in_consist & 8) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Toei Type 5200, sound //

switch(FEAT_TRAINS, SELF, sw_TOEI5200_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5200_start_sound, param_sound_effect) {
	1: sw_TOEI5200_start_sound_1;
	2: sw_TOEI5200_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Toei Type 5200, item //

item(FEAT_TRAINS, item_TOEI5200_6) {
	property {
		name:							string(STR_TOEI5200_6_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1976, 1, 1);
		model_life:						20;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					47;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2040 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_TOEI5200_6;
		purchase:						TOEI5200_purchase;
		articulated_part:				sw_TOEI5200_6_articulated_part;
		start_stop:						sw_TOEI5200_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_TOEI5200_can_attach_wagon;
		additional_text:				return string(STR_TOEI5200_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_TOEI5200_6_effect;
		sound_effect:					sw_TOEI5200_start_sound;
	}
}

item(FEAT_TRAINS, item_TOEI5200_8) {
	property {
		name:							string(STR_TOEI5200_8_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1996, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					57;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2720 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_TOEI5200_8;
		purchase:						TOEI5200_purchase;
		articulated_part:				sw_TOEI5200_8_articulated_part;
		start_stop:						sw_TOEI5200_start_stop;
		purchase_running_cost_factor:	return (100 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_TOEI5200_can_attach_wagon;
		additional_text:				return string(STR_TOEI5200_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_TOEI5200_8_effect;
		sound_effect:					sw_TOEI5200_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Toei Type 5300 //

// Toei Type 5300, graphics //

spriteset (TOEI5300_middle_1, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (TOEI5300_middle_2, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (TOEI5300_front_1_white, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (TOEI5300_front_1_red, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (TOEI5300_front_2_white, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (TOEI5300_front_2_red, "gfx/Toei/5300/TOEI5300.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (TOEI5300_purchase, "gfx/Toei/5300/TOEI5300.png") { tmpl_purchase(0, 180) }

switch (FEAT_TRAINS, SELF, TOEI5300_forward, position_in_consist % 8) {
	0:	TOEI5300_front_1_white;
	2:	TOEI5300_middle_2;
	5:	TOEI5300_middle_2;
	7:	TOEI5300_front_2_red;
	TOEI5300_middle_1;
}

switch (FEAT_TRAINS, SELF, TOEI5300_reverse, position_in_consist % 8) {
	0:	TOEI5300_front_2_white;
	2:	TOEI5300_middle_2;
	5:	TOEI5300_middle_2;
	7:	TOEI5300_front_1_red;
	TOEI5300_middle_1;
}

switch (FEAT_TRAINS, SELF, sw_TOEI5300, extra_callback_info1) {
	1:	TOEI5300_reverse;
	TOEI5300_forward;
}

// Toei Type 5300, callbacks //

switch (FEAT_TRAINS, SELF, sw_TOEI5300_articulated_part, extra_callback_info1) {
	0 .. 7: return item_TOEI5300;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5300_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_TOEI5300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5300_can_attach_wagon, vehicle_type_id) {
	return string(STR_TOEI5300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_TOEI5300_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Toei Type 5300, sound //

switch(FEAT_TRAINS, SELF, sw_TOEI5300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn07.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn07.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn07.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_TOEI5300_start_sound, param_sound_effect) {
	1: sw_TOEI5300_start_sound_1;
	2: sw_TOEI5300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Toei Type 5300, item //

item(FEAT_TRAINS, item_TOEI5300) {
	property {
		name:							string(STR_TOEI5300_NAME);
		climates_available:				bitmask(CLIMATE_TEMPERATE);
		introduction_date:				date(1991, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					67;
		running_cost_factor:			24;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2880 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_TOEI5300;
		purchase:						TOEI5300_purchase;
		articulated_part:				sw_TOEI5300_articulated_part;
		start_stop:						sw_TOEI5300_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_TOEI5300_can_attach_wagon;
		additional_text:				return string(STR_TOEI5300_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_TOEI5300_effect;
		sound_effect:					sw_TOEI5300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// SHIN-KEISEI //

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 33 //

// Shin-Keisei Type 33 graphics //

spriteset (SKS33warf, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-war.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (SKS33warr, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-war.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (SKS33war_purchase, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-war.png") { tmpl_purchase(0,60) }
spriteset (SKS33osksf, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-old_SKS.png") { tmpl_vehicle_7_14_length(0,0) }
spriteset (SKS33osksr, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-old_SKS.png") { tmpl_vehicle_14_7_length(0,0) }
spriteset (SKS33osks_purchase, "gfx/Shin-Keisei/33-39-45/SKS33-39-45-old_SKS.png") { tmpl_purchase(0,60) }

switch(FEAT_TRAINS, SELF, SKS33war, vehicle_is_reversed) {
	1: SKS33warr;
	SKS33warf;
}

switch(FEAT_TRAINS, SELF, SKS33osks, vehicle_is_reversed) {
	1: SKS33osksr;
	SKS33osksf;
}

switch(FEAT_TRAINS, PARENT, sw_SKS33, date_of_last_service) {
	0 .. date (1953, 1, 1): SKS33war;
	SKS33osks;
}

switch(FEAT_TRAINS, PARENT, SKS33_purchase, date_of_last_service) {
	0 .. date (1953, 1, 1): SKS33war_purchase;
	SKS33osks_purchase;
}

// Shin-Keisei Type 33 callbacks //

switch(FEAT_TRAINS, SELF, sw_SKS33_start_stop, num_vehs_in_consist) {
	0 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS33_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS33_can_attach_wagon, vehicle_type_id) {
	item_SKS33: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS300: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS20-2000: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS33_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS33_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 33 sound //

switch(FEAT_TRAINS, SELF, sw_SKS33_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS33_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS33_start_sound, param_sound_effect) {
	1: sw_SKS33_start_sound_1;
	2: sw_SKS33_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 33 item //

item(FEAT_TRAINS, item_SKS33) {
	property {
		name:							string(STR_SKS33_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1947, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					15;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							195 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							30 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
		length:							7;
	}
	graphics {
		default:						sw_SKS33;
		purchase:						SKS33_purchase;
		start_stop:						sw_SKS33_start_stop;
		can_attach_wagon:				sw_SKS33_can_attach_wagon;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		additional_text:				return string(STR_SKS33_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS33_effect;
		sound_effect:					sw_SKS33_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 300 //

// Shin-Keisei Type 300 graphics //

spriteset (SKS300osks_forward, "gfx/Shin-Keisei/300/SKS300-old_SKS.png") { tmpl_vehicle_7_14_length(0, 0) }
spriteset (SKS300osks_reverse, "gfx/Shin-Keisei/300/SKS300-old_SKS.png") { tmpl_vehicle_14_7_length(0, 0) }
spriteset (SKS300osks_purchase, "gfx/Shin-Keisei/300/SKS300-old_SKS.png") { tmpl_purchase(0, 60) }
spriteset (SKS300sks_1_white, "gfx/Shin-Keisei/300/SKS300-SKS.png") { tmpl_vehicle_7_length(0, 0) }
spriteset (SKS300sks_1_red, "gfx/Shin-Keisei/300/SKS300-SKS.png") { tmpl_vehicle_7_length(0, 30) }
spriteset (SKS300sks_2_white, "gfx/Shin-Keisei/300/SKS300-SKS.png") { tmpl_vehicle_7_length(0, 60) }
spriteset (SKS300sks_2_red, "gfx/Shin-Keisei/300/SKS300-SKS.png") { tmpl_vehicle_7_length(0, 90) }
spriteset (SKS300sks_purchase, "gfx/Shin-Keisei/300/SKS300-SKS.png") { tmpl_purchase(0, 120) }

switch(FEAT_TRAINS, SELF, SKS300osks, extra_callback_info1) {
	0: SKS300osks_reverse;
	SKS300osks_forward;
}

switch(FEAT_TRAINS, SELF, SKS300sks_foward, position_in_consist % 2) {
	0:	SKS300sks_1_white;
	SKS300sks_2_red;
}

switch(FEAT_TRAINS, SELF, SKS300sks_reverse, position_in_consist % 2) {
	0:	SKS300sks_2_white;
	SKS300sks_1_red;
}

switch(FEAT_TRAINS, SELF, SKS300sks, extra_callback_info1) {
	1: SKS300sks_reverse;
	SKS300sks_foward;
}

switch(FEAT_TRAINS, PARENT, sw_SKS300, date_of_last_service) {
	0 .. date (1966, 1, 1): SKS300osks;
	SKS300sks;
}

switch(FEAT_TRAINS, PARENT, SKS300_purchase, date_of_last_service) {
	0 .. date (1966, 1, 1): SKS300osks_purchase;
	SKS300sks_purchase;
}

// Shin-Keisei Type 300 callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS300_articulated_part, extra_callback_info1) {
	0 .. 1: return item_SKS300;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS300_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS300_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS300_can_attach_wagon, vehicle_type_id) {
	item_SKS33: return CB_RESULT_ATTACH_ALLOW;
	item_SKS300: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS20_2000: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS300_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS300_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 300 sound //

switch(FEAT_TRAINS, SELF, sw_SKS300_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS300_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running01.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS300_start_sound, param_sound_effect) {
	1: sw_SKS300_start_sound_1;
	2: sw_SKS300_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 300 item //

item(FEAT_TRAINS, item_SKS300) {
	property {
		name:							string(STR_SKS300_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1955, 1, 1);
		model_life:						30;
		retire_early:					16;
		vehicle_life:					20;
		reliability_decay:				70;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_2D; 
		cost_factor:					20;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							150 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							32 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
		length:							7;
	}
	graphics {
		default:						sw_SKS300;
		purchase:						SKS300_purchase;
		articulated_part:				sw_SKS300_articulated_part;
		start_stop:						sw_SKS300_start_stop;
		purchase_running_cost_factor:	return (70 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_SKS300_can_attach_wagon;
		additional_text:				return string(STR_SKS300_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS300_effect;
		sound_effect:					sw_SKS300_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei 20~2000 Type //

// Shin-Keisei 20~2000 Type, graphics //

spriteset (SKS20osks_middle, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS20osks_front, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS20osks_rear, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS20osks_front_1_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS20osks_front_1_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS20osks_front_2_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS20osks_front_2_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS20osks_front_3_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (SKS20osks_front_3_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (SKS20osks_front_4_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (SKS20osks_front_4_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (SKS20osks_1_purchase, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_purchase(0, 330) }
spriteset (SKS20osks_2_purchase, "gfx/Shin-Keisei/20_2000/SKS20_2000-old_SKS.png") { tmpl_purchase(0, 360) }
spriteset (SKS20sks_middle, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS20sks_front, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS20sks_rear, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS20sks_front_1_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS20sks_front_1_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS20sks_front_2_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS20sks_front_2_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS20sks_front_3_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (SKS20sks_front_3_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (SKS20sks_front_4_white, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (SKS20sks_front_4_red, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (SKS20sks_1_purchase, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_purchase(0, 330) }
spriteset (SKS20sks_2_purchase, "gfx/Shin-Keisei/20_2000/SKS20_2000-SKS.png") { tmpl_purchase(0, 360) }

switch(FEAT_TRAINS, SELF, SKS20osks_1, extra_callback_info1) {
	1: SKS20osks_rear;
	SKS20osks_front;
}

switch(FEAT_TRAINS, SELF, SKS20sks_1, extra_callback_info1) {
	1: SKS20sks_rear;
	SKS20sks_front;
}

switch(FEAT_TRAINS, PARENT, sw_SKS20_1, date_of_last_service) {
	0 .. date (1968, 1, 1): SKS20osks_1;
	SKS20sks_1;
}

switch(FEAT_TRAINS, PARENT, SKS20_1_purchase, date_of_last_service) {
	0 .. date (1968, 1, 1): SKS20osks_1_purchase;
	SKS20sks_1_purchase;
}

switch(FEAT_TRAINS, SELF, SKS20f_2, position_in_consist % 2) {
	0: SKS20sks_front_1_white;
	SKS20sks_front_3_red;
}

switch(FEAT_TRAINS, SELF, SKS20r_2, position_in_consist % 2) {
	0: SKS20sks_front_3_white;
	SKS20sks_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_2, extra_callback_info1) {
	1:	SKS20r_2;
	SKS20f_2;
}

switch(FEAT_TRAINS, SELF, SKS20f_4, position_in_consist % 8) {
	0: SKS20sks_front_1_white;
	3: SKS20sks_front_3_red;
	4: SKS20sks_front_4_red;
	7: SKS20sks_front_3_red;
	SKS20sks_middle;
}

switch(FEAT_TRAINS, SELF, SKS20r_4, position_in_consist % 8) {
	0: SKS20sks_front_3_white;
	3: SKS20sks_front_1_red;
	4: SKS20sks_front_2_red;
	7: SKS20sks_front_1_red;
	SKS20sks_middle;
}

switch(FEAT_TRAINS, PARENT, sw_SKS20_4, extra_callback_info1) {
	1: SKS20r_4;
	SKS20f_4;
}

// Shin-Keisei Type 20 callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS20_2_articulated_part, extra_callback_info1) {
	0 .. 1: return item_SKS20_2;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_SKS20_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_SKS20_4;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_start_stop, num_vehs_in_consist) {
	0 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS20_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS20_1_can_attach_wagon, vehicle_type_id) {
	item_SKS33: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS300: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_1: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS20_2: return CB_RESULT_ATTACH_ALLOW;
	//item_SKS20_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS20_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS20_2_can_attach_wagon, vehicle_type_id) {
	item_SKS33: return CB_RESULT_ATTACH_ALLOW;
	item_SKS300: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_1: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_2: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS20_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS20_4_can_attach_wagon, vehicle_type_id) {
	item_SKS33: return CB_RESULT_ATTACH_ALLOW;
	item_SKS300: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_1: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_2: return CB_RESULT_ATTACH_ALLOW;
	item_SKS20_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS20_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS20_1_effect, position_in_consist & 1) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_2_effect, position_in_consist & 2) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	1:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_4_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 20 sound //

switch(FEAT_TRAINS, SELF, sw_SKS20_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running01a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS20_start_sound, param_sound_effect) {
	1: sw_SKS20_start_sound_1;
	2: sw_SKS20_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei 20~2000 Type, item //

item(FEAT_TRAINS, item_SKS20_1) {
	property {
		name:							string(STR_SKS20_1_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1961, 1, 1);
		model_life:						24;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				200;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					21;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							224 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_2;
		weight:							32 * 1 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS20_1;
		purchase:						SKS20_1_purchase;
		start_stop:						sw_SKS20_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_2 * 1)/10));
		can_attach_wagon:				sw_SKS20_1_can_attach_wagon;
		additional_text:				return string(STR_SKS20_1_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS20_1_effect;
		sound_effect:					sw_SKS20_start_sound;
	}
}

item(FEAT_TRAINS, item_SKS20_2) {
	property {
		name:							string(STR_SKS20_2_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1969, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				120;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					26;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							448 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 2 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS20_2;
		purchase:						SKS20sks_2_purchase;
		articulated_part:				sw_SKS20_2_articulated_part;
		start_stop:						sw_SKS20_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 2)/10));
		can_attach_wagon:				sw_SKS20_2_can_attach_wagon;
		additional_text:				return string(STR_SKS20_2_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS20_2_effect;
		sound_effect:					sw_SKS20_start_sound;
	}
}

item(FEAT_TRAINS, item_SKS20_4) {
	property {
		name:							string(STR_SKS20_4_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1978, 1, 1);
		model_life:						20;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					36;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							896 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							32 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS20_4;
		purchase:						SKS20sks_2_purchase;
		articulated_part:				sw_SKS20_4_articulated_part;
		start_stop:						sw_SKS20_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_SKS20_4_can_attach_wagon;
		additional_text:				return string(STR_SKS20_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS20_4_effect;
		sound_effect:					sw_SKS20_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 800 //

// Shin-Keisei Type 800, graphics //

spriteset (SKS800original_middle, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS800original_end_1, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS800original_end_2, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS800original_front_1_white, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS800original_front_1_red, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS800original_front_2_white, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS800original_front_2_red, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS800renewal_middle, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS800renewal_end_1, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS800renewal_end_2, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS800renewal_front_1_white, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS800renewal_front_1_red, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS800renewal_front_2_white, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS800renewal_front_2_red, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS800aircon_middle, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS800aircon_end_1, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS800aircon_end_2, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS800aircon_front_1_white, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS800aircon_front_1_red, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS800aircon_front_2_white, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS800aircon_front_2_red, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS800refurbish_middle, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS800refurbish_end_1, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS800refurbish_end_2, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS800refurbish_front_1_white, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS800refurbish_front_1_red, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS800refurbish_front_2_white, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS800refurbish_front_2_red, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKS800original_purchase, "gfx/Shin-Keisei/800/SKS800-original.png") { tmpl_purchase(0, 210) }
spriteset (SKS800renewal_purchase, "gfx/Shin-Keisei/800/SKS800-renewal.png") { tmpl_purchase(0, 210) }
spriteset (SKS800aircon_purchase, "gfx/Shin-Keisei/800/SKS800-aircon.png") { tmpl_purchase(0, 210) }
spriteset (SKS800refurbish_purchase, "gfx/Shin-Keisei/800/SKS800-refurbish.png") { tmpl_purchase(0, 210) }

switch(FEAT_TRAINS, SELF, SKS800original_4_forward, position_in_consist % 4) {
	0:	SKS800original_front_1_white;
	1:	SKS800original_middle;
	2:	SKS800original_middle;
	SKS800original_front_2_red;
}

switch(FEAT_TRAINS, SELF, SKS800original_4_reverse, position_in_consist % 4) {
	0:	SKS800original_front_2_white;
	1:	SKS800original_middle;
	2:	SKS800original_middle;
	SKS800original_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_4, extra_callback_info1) {
	1: SKS800original_4_reverse;
	SKS800original_4_forward;
}

switch(FEAT_TRAINS, SELF, SKS800renewal_6_forward, position_in_consist % 6) {
	0:	SKS800renewal_front_1_white;
	1:	SKS800renewal_middle;
	2:	SKS800renewal_middle;
	3:	SKS800renewal_end_2;
	4:	SKS800renewal_middle;
	SKS800renewal_front_2_red;
}

switch(FEAT_TRAINS, SELF, SKS800renewal_6_reverse, position_in_consist % 6) {
	0:	SKS800renewal_front_2_white;
	1:	SKS800renewal_middle;
	2:	SKS800renewal_end_2;
	3:	SKS800renewal_middle;
	4:	SKS800renewal_middle;
	SKS800renewal_front_1_red;
}

switch(FEAT_TRAINS, SELF, SKS800renewal_6, extra_callback_info1) {
	1: SKS800renewal_6_reverse;
	SKS800renewal_6_forward;
}

switch(FEAT_TRAINS, SELF, SKS800aircon_6_forward, position_in_consist % 6) {
	0:	SKS800aircon_front_1_white;
	1:	SKS800aircon_middle;
	2:	SKS800aircon_middle;
	3:	SKS800aircon_end_2;
	4:	SKS800aircon_middle;
	SKS800aircon_front_2_red;
}

switch(FEAT_TRAINS, SELF, SKS800aircon_6_reverse, position_in_consist % 6) {
	0:	SKS800aircon_front_2_white;
	1:	SKS800aircon_middle;
	2:	SKS800aircon_end_2;
	3:	SKS800aircon_middle;
	4:	SKS800aircon_middle;
	SKS800aircon_front_1_red;
}

switch(FEAT_TRAINS, SELF, SKS800aircon_6, extra_callback_info1) {
	1: SKS800aircon_6_reverse;
	SKS800aircon_6_forward;
}

switch(FEAT_TRAINS, PARENT, sw_SKS800_6, date_of_last_service) {
	0 .. date (1985, 1, 1): SKS800renewal_6;
	SKS800aircon_6;
}

switch(FEAT_TRAINS, PARENT, SKS800_6_purchase, date_of_last_service) {
	0 .. date (1985, 1, 1): SKS800renewal_purchase;
	SKS800aircon_purchase;
}

switch(FEAT_TRAINS, SELF, SKS800refurbish_8_forward, position_in_consist % 8) {
	0:	SKS800refurbish_front_1_white;
	1:	SKS800refurbish_middle;
	2:	SKS800refurbish_middle;
	3:	SKS800refurbish_end_2;
	4:	SKS800refurbish_end_1;
	5:	SKS800refurbish_middle;
	6:	SKS800refurbish_middle;
	SKS800refurbish_front_2_red;
}

switch(FEAT_TRAINS, SELF, SKS800refurbish_8_reverse, position_in_consist % 8) {
	0:	SKS800refurbish_front_2_white;
	1:	SKS800refurbish_middle;
	2:	SKS800refurbish_middle;
	3:	SKS800refurbish_end_1;
	4:	SKS800refurbish_end_2;
	5:	SKS800refurbish_middle;
	6:	SKS800refurbish_middle;
	SKS800refurbish_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_8, extra_callback_info1) {
	1: SKS800refurbish_8_reverse;
	SKS800refurbish_8_forward;
}

// Shin-Keisei Type 800, callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS800_4_articulated_part, extra_callback_info1) {
	0 .. 3: return item_SKS800_4;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_SKS800_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_SKS800_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_SKS800_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_SKS800_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS800_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS800_4_can_attach_wagon, vehicle_type_id) {
	item_SKS800_4: return CB_RESULT_ATTACH_ALLOW;
	return string(STR_SKS800_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS800_6_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKS800_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS800_8_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKS800_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS800_4_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_6_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_8_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 800, sound //

switch(FEAT_TRAINS, SELF, sw_SKS800_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS800_start_sound, param_sound_effect) {
	1: sw_SKS800_start_sound_1;
	2: sw_SKS800_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 800, item //

item(FEAT_TRAINS, item_SKS800_4) {
	property {
		name:							string(STR_SKS800_4_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1971, 1, 1);
		model_life:						14;
		retire_early:					4;
		vehicle_life:					8;
		reliability_decay:				50;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							720 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS800_4;
		purchase:						SKS800original_purchase;
		articulated_part:				sw_SKS800_4_articulated_part;
		start_stop:						sw_SKS800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_SKS800_4_can_attach_wagon;
		additional_text:				return string(STR_SKS800_4_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS800_4_effect;
		sound_effect:					sw_SKS800_start_sound;
	}
}

item(FEAT_TRAINS, item_SKS800_6) {
	property {
		name:							string(STR_SKS800_6_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1981, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					47;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1080 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS800_6;
		purchase:						SKS800_6_purchase;
		articulated_part:				sw_SKS800_6_articulated_part;
		start_stop:						sw_SKS800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_SKS800_6_can_attach_wagon;
		additional_text:				return string(STR_SKS800_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS800_6_effect;
		sound_effect:					sw_SKS800_start_sound;
	}
}

item(FEAT_TRAINS, item_SKS800_8) {
	property {
		name:							string(STR_SKS800_8_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1989, 1, 1);
		model_life:						24;
		retire_early:					6;
		vehicle_life:					10;
		reliability_decay:				70;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					57;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1420 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS800_8;
		purchase:						SKS800refurbish_purchase;
		articulated_part:				sw_SKS800_8_articulated_part;
		start_stop:						sw_SKS800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_SKS800_8_can_attach_wagon;
		additional_text:				return string(STR_SKS800_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS800_8_effect;
		sound_effect:					sw_SKS800_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 8000 //

// Shin-Keisei Type 8000, graphics //

spriteset (SKS8000_1_middle_1, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8000_1_middle_2, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8000_1_front_1_white, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8000_1_front_1_red, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8000_1_front_2_white, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8000_1_front_2_red, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8000_2_middle_1, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8000_2_middle_2, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8000_2_front_1_white, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8000_2_front_1_red, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8000_2_front_2_white, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8000_2_front_2_red, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8000_3_middle_1, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8000_3_middle_2, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8000_3_front_1_white, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8000_3_front_1_red, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8000_3_front_2_white, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8000_3_front_2_red, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8000_1_purchase, "gfx/Shin-Keisei/8000/SKS8000-1.png") { tmpl_purchase(0, 180) }
spriteset (SKS8000_2_purchase, "gfx/Shin-Keisei/8000/SKS8000-2.png") { tmpl_purchase(0, 180) }
spriteset (SKS8000_3_purchase, "gfx/Shin-Keisei/8000/SKS8000-3.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, SKS8000_1_forward, position_in_consist % 6) {
	0:	SKS8000_1_front_1_white;
	2:	SKS8000_1_middle_2;
	4:	SKS8000_1_middle_2;
	5:	SKS8000_1_front_2_red;
	SKS8000_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_1_reverse, position_in_consist % 6) {
	0:	SKS8000_1_front_1_white;
	1:	SKS8000_1_middle_2;
	3:	SKS8000_1_middle_2;
	5:	SKS8000_1_front_2_red;
	SKS8000_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_1, extra_callback_info1) {
	1: SKS8000_1_reverse;
	SKS8000_1_forward;
}

switch(FEAT_TRAINS, SELF, SKS8000_2_forward, position_in_consist % 6) {
	0:	SKS8000_2_front_1_white;
	1:	SKS8000_2_middle_2;
	3:	SKS8000_2_middle_2;
	5:	SKS8000_2_front_2_red;
	SKS8000_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_2_reverse, position_in_consist % 6) {
	0:	SKS8000_2_front_1_white;
	1:	SKS8000_2_middle_2;
	3:	SKS8000_2_middle_2;
	5:	SKS8000_2_front_2_red;
	SKS8000_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_2, extra_callback_info1) {
	1: SKS8000_2_reverse;
	SKS8000_2_forward;
}

switch(FEAT_TRAINS, SELF, SKS8000_3_forward, position_in_consist % 6) {
	0:	SKS8000_3_front_1_white;
	1:	SKS8000_3_middle_2;
	3:	SKS8000_3_middle_2;
	5:	SKS8000_3_front_2_red;
	SKS8000_3_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_3_reverse, position_in_consist % 6) {
	0:	SKS8000_3_front_1_white;
	1:	SKS8000_3_middle_2;
	3:	SKS8000_3_middle_2;
	5:	SKS8000_3_front_2_red;
	SKS8000_3_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8000_3, extra_callback_info1) {
	1: SKS8000_3_reverse;
	SKS8000_3_forward;
}

random_switch(FEAT_TRAINS, PARENT, SKS8000_2_3) {
	2:	SKS8000_2;
	1:	SKS8000_3;
}

switch(FEAT_TRAINS, PARENT, sw_SKS8000, date_of_last_service) {
	0 .. date (2001, 1, 1): SKS8000_1;
	SKS8000_2_3;
}

switch(FEAT_TRAINS, PARENT, SKS8000_purchase, date_of_last_service) {
	0 .. date (2001, 1, 1): SKS8000_1_purchase;
	SKS8000_2_purchase;
}


// Shin-Keisei Type 8000, callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS8000_articulated_part, extra_callback_info1) {
	0 .. 5: return item_SKS8000;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS8000_start_stop, num_vehs_in_consist) {
	1 .. 6: return CB_RESULT_NO_TEXT;
	return string(STR_SKS8000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS8000_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKS8000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS8000_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	3:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 8000, sound //

switch(FEAT_TRAINS, SELF, sw_SKS8000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8000_start_sound, param_sound_effect) {
	1: sw_SKS8000_start_sound_1;
	2: sw_SKS8000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 8000, item //

item(FEAT_TRAINS, item_SKS8000) {
	property {
		name:							string(STR_SKS8000_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1978, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					46;
		running_cost_factor:			22;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1980 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_SKS8000;
		purchase:						SKS8000_purchase;
		articulated_part:				sw_SKS8000_articulated_part;
		start_stop:						sw_SKS8000_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_SKS8000_can_attach_wagon;
		additional_text:				return string(STR_SKS8000_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS8000_effect;
		sound_effect:					sw_SKS8000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 8800 //

// Shin-Keisei Type 8800, graphics //

spriteset (SKS8800_1_middle_1, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8800_1_middle_2, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8800_1_front_1_white, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8800_1_front_1_red, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8800_1_front_2_white, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8800_1_front_2_red, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8800_2_middle_1, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8800_2_middle_2, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8800_2_front_1_white, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8800_2_front_1_red, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8800_2_front_2_white, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8800_2_front_2_red, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8800_3_middle_1, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8800_3_middle_2, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8800_3_front_1_white, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8800_3_front_1_red, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8800_3_front_2_white, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8800_3_front_2_red, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8800_4_middle_1, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8800_4_middle_2, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8800_4_front_1_white, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8800_4_front_1_red, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8800_4_front_2_white, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8800_4_front_2_red, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8800_1_purchase, "gfx/Shin-Keisei/8800/SKS8800-1.png") { tmpl_purchase(0, 180) }
spriteset (SKS8800_2_purchase, "gfx/Shin-Keisei/8800/SKS8800-2.png") { tmpl_purchase(0, 180) }
spriteset (SKS8800_3_purchase, "gfx/Shin-Keisei/8800/SKS8800-3.png") { tmpl_purchase(0, 180) }
spriteset (SKS8800_4_purchase, "gfx/Shin-Keisei/8800/SKS8800-4.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, SKS8800_6_1_forward, position_in_consist % 6) {
	0:	SKS8800_1_front_1_white;
	2:	SKS8800_1_middle_2;
	4:	SKS8800_1_middle_2;
	5:	SKS8800_1_front_2_red;
	SKS8800_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_1_reverse, position_in_consist % 6) {
	0:	SKS8800_1_front_2_white;
	2:	SKS8800_1_middle_2;
	4:	SKS8800_1_middle_2;
	5:	SKS8800_1_front_1_red;
	SKS8800_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_1, extra_callback_info1) {
	1: SKS8800_6_1_reverse;
	SKS8800_6_1_forward;
}

switch(FEAT_TRAINS, PARENT, SKS8800_6_2_forward, position_in_consist % 6) {
	0:	SKS8800_2_front_1_white;
	1:	SKS8800_2_middle_2;
	3:	SKS8800_2_middle_2;
	5:	SKS8800_2_front_2_red;
	SKS8800_2_middle_1;
}

switch(FEAT_TRAINS, PARENT, SKS8800_6_2_reverse, position_in_consist % 6) {
	0:	SKS8800_2_front_2_white;
	2:	SKS8800_2_middle_2;
	4:	SKS8800_2_middle_2;
	5:	SKS8800_2_front_1_red;
	SKS8800_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_2, extra_callback_info1) {
	1: SKS8800_6_2_reverse;
	SKS8800_6_2_forward;
}

switch(FEAT_TRAINS, PARENT, SKS8800_6_3_forward, position_in_consist % 6) {
	0:	SKS8800_3_front_1_white;
	1:	SKS8800_3_middle_2;
	3:	SKS8800_3_middle_2;
	5:	SKS8800_3_front_2_red;
	SKS8800_3_middle_1;
}

switch(FEAT_TRAINS, PARENT, SKS8800_6_3_reverse, position_in_consist % 6) {
	0:	SKS8800_3_front_2_white;
	2:	SKS8800_3_middle_2;
	4:	SKS8800_3_middle_2;
	5:	SKS8800_3_front_1_red;
	SKS8800_3_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_3, extra_callback_info1) {
	1: SKS8800_6_3_reverse;
	SKS8800_6_3_forward;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_4_forward, position_in_consist % 6) {
	0:	SKS8800_4_front_1_white;
	1:	SKS8800_4_middle_2;
	3:	SKS8800_4_middle_2;
	5:	SKS8800_4_front_2_red;
	SKS8800_4_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_4_reverse, position_in_consist % 6) {
	0:	SKS8800_4_front_2_white;
	2:	SKS8800_4_middle_2;
	4:	SKS8800_4_middle_2;
	5:	SKS8800_4_front_1_red;
	SKS8800_4_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_6_4, extra_callback_info1) {
	1: SKS8800_6_4_reverse;
	SKS8800_6_4_forward;
}

random_switch(FEAT_TRAINS, PARENT, SKS8800_6_2_3) {
	1:	SKS8800_6_3;
	2:	SKS8800_6_2;
}

switch(FEAT_TRAINS, PARENT, sw_SKS8800_6, date_of_last_service) {
	0 .. date (2006, 1, 1): SKS8800_6_1;
	date (2006, 1, 2) .. date (2011, 1, 1): SKS8800_6_2_3;
	SKS8800_6_4;
}

switch(FEAT_TRAINS, PARENT, SKS8800_6_purchase, date_of_last_service) {
	0 .. date (2006, 1, 1): SKS8800_1_purchase;
	date (2006, 1, 2) .. date (2011, 1, 1): SKS8800_2_purchase;
	SKS8800_4_purchase;
}

switch(FEAT_TRAINS, SELF, SKS8800_8_forward, position_in_consist % 8) {
	0:	SKS8800_2_front_1_white;
	1:	SKS8800_2_middle_2;
	5:	SKS8800_2_middle_2;
	7:	SKS8800_2_front_2_red;
	SKS8800_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8800_8_reverse, position_in_consist % 8) {
	0:	SKS8800_2_front_2_white;
	2:	SKS8800_2_middle_2;
	6:	SKS8800_2_middle_2;
	7:	SKS8800_2_front_1_red;
	SKS8800_2_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_8, extra_callback_info1) {
	1: SKS8800_8_reverse;
	SKS8800_8_forward;
}

// Shin-Keisei Type 8800_6, callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS8800_6_articulated_part, extra_callback_info1) {
	0 .. 5: return item_SKS8800_6;
	return CB_RESULT_NO_TEXT;
}

switch (FEAT_TRAINS, SELF, sw_SKS8800_8_articulated_part, extra_callback_info1) {
	0 .. 7: return item_SKS8800_8;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS8800_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKS8800_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_6_effect, position_in_consist & 6) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_8_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	7:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 8800, sound //

switch(FEAT_TRAINS, SELF, sw_SKS8800_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn02.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn02.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8800_start_sound, param_sound_effect) {
	1: sw_SKS8800_start_sound_1;
	2: sw_SKS8800_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 8800, item //

item(FEAT_TRAINS, item_SKS8800_6) {
	property {
		name:							string(STR_SKS8800_6_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1986, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					49;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1620 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_SKS8800_6;
		purchase:						SKS8800_6_purchase;
		articulated_part:				sw_SKS8800_6_articulated_part;
		start_stop:						sw_SKS8800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_SKS8800_can_attach_wagon;
		additional_text:				return string(STR_SKS8800_6_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS8800_6_effect;
		sound_effect:					sw_SKS8800_start_sound;
	}
}

item(FEAT_TRAINS, item_SKS8800_8) {
	property {
		name:							string(STR_SKS8800_8_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2006, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				20;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					59;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2160 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_SKS8800_8;
		purchase:						SKS8800_2_purchase;
		articulated_part:				sw_SKS8800_8_articulated_part;
		start_stop:						sw_SKS8800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_SKS8800_can_attach_wagon;
		additional_text:				return string(STR_SKS8800_8_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS8800_8_effect;
		sound_effect:					sw_SKS8800_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type 8900 //

// Shin-Keisei Type 8900, graphics //

spriteset (SKS8900_1_middle_1, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8900_1_middle_2, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8900_1_front_1_white, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8900_1_front_1_red, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8900_1_front_2_white, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8900_1_front_2_red, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8900_2_middle_1, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKS8900_2_middle_2, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKS8900_2_front_1_white, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKS8900_2_front_1_red, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKS8900_2_front_2_white, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKS8900_2_front_2_red, "gfx/Shin-Keisei/8900/SKS8900-2.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKS8900_purchase, "gfx/Shin-Keisei/8900/SKS8900-1.png") { tmpl_purchase(0, 180) }

switch(FEAT_TRAINS, SELF, SKS8900_1_forward, position_in_consist % 8) {
	0:	SKS8900_1_front_1_white;
	1:	SKS8900_1_middle_2;
	5:	SKS8900_1_middle_2;
	7:	SKS8900_1_front_2_red;
	SKS8900_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8900_1_reverse, position_in_consist % 8) {
	0:	SKS8900_1_front_2_white;
	2:	SKS8900_1_middle_2;
	6:	SKS8900_1_middle_2;
	7:	SKS8900_1_front_1_red;
	SKS8900_1_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8900_1, extra_callback_info1) {
	1:	SKS8900_1_reverse;
	SKS8900_1_forward;
}

switch(FEAT_TRAINS, SELF, SKS8900_2_forward, position_in_consist % 8) {
	0:	SKS8900_2_front_1_white;
	1:	SKS8900_2_middle_2;
	5:	SKS8900_2_middle_2;
	7:	SKS8900_2_front_2_red;
	SKS8900_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8900_2_reverse, position_in_consist % 8) {
	0:	SKS8900_2_front_2_white;
	2:	SKS8900_2_middle_2;
	6:	SKS8900_2_middle_2;
	7:	SKS8900_2_front_1_red;
	SKS8900_2_middle_1;
}

switch(FEAT_TRAINS, SELF, SKS8900_2, extra_callback_info1) {
	1:	SKS8900_2_reverse;
	SKS8900_2_forward;
}

random_switch(FEAT_TRAINS, PARENT, sw_SKS8900) {
	1:	SKS8900_1;
	1:	SKS8900_2;
}

// Shin-Keisei Type 8900, callbacks //

switch (FEAT_TRAINS, SELF, sw_SKS8900_articulated_part, extra_callback_info1) {
	0 .. 7: return item_SKS8900;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKS8900_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SKS8900_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKS8900_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKS8900_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKS8900_effect, position_in_consist & 8) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	5:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type 8900, sound //

switch(FEAT_TRAINS, SELF, sw_SKS8900_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn07.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8900_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn07.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn07.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKS8900_start_sound, param_sound_effect) {
	1: sw_SKS8900_start_sound_1;
	2: sw_SKS8900_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type 8900, item //

item(FEAT_TRAINS, item_SKS8900) {
	property {
		name:							string(STR_SKS8900_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1993, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					57;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							2160 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							28 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SKS8900;
		purchase:						SKS8900_purchase;
		articulated_part:				sw_SKS8900_articulated_part;
		start_stop:						sw_SKS8900_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_SKS8900_can_attach_wagon;
		additional_text:				return string(STR_SKS8900_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKS8900_effect;
		sound_effect:					sw_SKS8900_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Shin-Keisei Type N800 //

// Shin-Keisei Type N800, graphics //

spriteset (SKSN800_middle_1a, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SKSN800_middle_1b, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SKSN800_middle_2a, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SKSN800_middle_2b, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SKSN800_middle_3a, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SKSN800_middle_3b, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SKSN800_front_1_white, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SKSN800_front_1_red, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (SKSN800_front_2_white, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (SKSN800_front_2_red, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (SKSN800_purchase, "gfx/Shin-Keisei/N800/SKSN800.png") { tmpl_purchase(0, 300) }

switch(FEAT_TRAINS, SELF, SKSN800_forward, position_in_consist % 6) {
	0:	SKSN800_front_1_white;
	1:	SKSN800_middle_2b;
	4:	SKSN800_middle_2b;
	5:	SKSN800_front_2_red;
	SKSN800_middle_1b;
}

switch(FEAT_TRAINS, SELF, SKSN800_reverse, position_in_consist % 6) {
	0:	SKSN800_front_2_white;
	1:	SKSN800_middle_2a;
	4:	SKSN800_middle_2a;
	5:	SKSN800_front_1_red;
	SKSN800_middle_1a;
}

switch(FEAT_TRAINS, SELF, sw_SKSN800, extra_callback_info1) {
	1:	SKSN800_reverse;
	SKSN800_forward;
}

// Shin-Keisei Type N800, callbacks //

switch (FEAT_TRAINS, SELF, sw_SKSN800_articulated_part, extra_callback_info1) {
	0 .. 5: return item_SKSN800;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SKSN800_start_stop, num_vehs_in_consist) {
	1 .. 6: return CB_RESULT_NO_TEXT;
	return string(STR_SKSN800_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SKSN800_can_attach_wagon, vehicle_type_id) {
	return string(STR_SKSN800_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SKSN800_effect, position_in_consist & 6) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Shin-Keisei Type N800, sound //

switch(FEAT_TRAINS, SELF, sw_SKSN800_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKSN800_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SKSN800_start_sound, param_sound_effect) {
	1: sw_SKSN800_start_sound_1;
	2: sw_SKSN800_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Shin-Keisei Type N800, item //

item(FEAT_TRAINS, item_SKSN800) {
	property {
		name:							string(STR_SKSN800_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2003, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					30;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					45;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							3000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							30 * 6 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;

	}

	graphics {
		default:						sw_SKSN800;
		purchase:						SKSN800_purchase;
		articulated_part:				sw_SKSN800_articulated_part;
		start_stop:						sw_SKSN800_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 6)/10));
		can_attach_wagon:				sw_SKSN800_can_attach_wagon;
		additional_text:				return string(STR_SKSN800_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SKSN800_effect;
		sound_effect:					sw_SKSN800_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// CHIBA EXPRESS //

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba Express Type 1000 //

// Chiba Express Type 1000, graphics //

spriteset (CE1000_middle_1a, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CE1000_middle_1b, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CE1000_front_1_white, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CE1000_front_1_red, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CE1000_front_2_white, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CE1000_front_2_red, "gfx/Chiba-Express/CE1000.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CE1000_purchase, "gfx/Chiba-Express/CE1000.png") { tmpl_purchase(0, 180) }


switch(FEAT_TRAINS, SELF, CE1000_forward, position_in_consist % 4) {
	0:	CE1000_front_1_white;
	1:	CE1000_middle_1a;
	2:	CE1000_middle_1b;
	CE1000_front_2_red;
}

switch(FEAT_TRAINS, SELF, CE1000_reverse, position_in_consist % 4) {
	0:	CE1000_front_2_white;
	1:	CE1000_middle_1b;
	2:	CE1000_middle_1a;
	CE1000_front_1_red;
}

switch(FEAT_TRAINS, SELF, sw_CE1000, extra_callback_info1) {
	1: CE1000_reverse;
	CE1000_forward;
}

// Chiba Express Type 1000, callbacks //

switch (FEAT_TRAINS, SELF, sw_CE1000_articulated_part, extra_callback_info1) {
	0 .. 3: return item_CE1000;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CE1000_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_CE1000_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CE1000_can_attach_wagon, vehicle_type_id) {
	return string(STR_CE1000_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CE1000_effect, position_in_consist & 4) {
	1:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba Express 1000 Type, sound //

switch(FEAT_TRAINS, SELF, sw_CE1000_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE1000_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn06.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn06.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running03.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running03a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE1000_start_sound, param_sound_effect) {
	1: sw_CE1000_start_sound_1;
	2: sw_CE1000_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba Express Type 1000, item //

item(FEAT_TRAINS, item_CE1000) {
	property {
		name:							string(STR_CE1000_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1988, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				130;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					37;
		running_cost_factor:			18;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1520 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							35 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_CE1000;
		purchase:						CE1000_purchase;
		articulated_part:				sw_CE1000_articulated_part;
		start_stop:						sw_CE1000_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_CE1000_can_attach_wagon;
		additional_text:				return string(STR_CE1000_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CE1000_effect;
		sound_effect:					sw_CE1000_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba Express Type 3050 //

// Chiba Express Type 3050, graphics //

spriteset (CE3050_middle_1, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CE3050_middle_2a, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CE3050_middle_2b, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CE3050_front_1_white, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CE3050_front_1_red, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CE3050_front_2_white, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CE3050_front_2_red, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CE3050_front_3_white, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CE3050_front_3_red, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (CE3050_front_4_white, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (CE3050_front_4_red, "gfx/Chiba-Express/CE3050.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (CE3050_purchase, "gfx/Chiba-Express/CE3050.png") { tmpl_purchase(0, 330) }

switch(FEAT_TRAINS, SELF, CE3050_forwards, position_in_consist % 4) {
	0:	CE3050_front_1_white;
	1:	CE3050_middle_2a;
	2:	CE3050_middle_1;
	CE3050_front_2_red;
}

switch(FEAT_TRAINS, SELF, CE3050_reverse, position_in_consist % 4) {
	0:	CE3050_front_3_white;
	1:	CE3050_middle_2b;
	2:	CE3050_middle_1;
	CE3050_front_4_red;
}

switch(FEAT_TRAINS, SELF, sw_CE3050, extra_callback_info1) {
	1: CE3050_reverse;
	CE3050_forwards;
}

// Chiba Express Type 3050, callbacks //

switch (FEAT_TRAINS, SELF, sw_CE3050_articulated_part, extra_callback_info1) {
	0 .. 3: return item_CE3050;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CE3050_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_CE3050_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CE3050_can_attach_wagon, vehicle_type_id) {
	return string(STR_CE3050_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CE3050_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba Express Type 3050, sound //

switch(FEAT_TRAINS, SELF, sw_CE3050_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3050_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3050_start_sound, param_sound_effect) {
	1: sw_CE3050_start_sound_1;
	2: sw_CE3050_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba Express 3050 Type, item //

item(FEAT_TRAINS, item_CE3050) {
	property {
		name:							string(STR_CE3050_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1994, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					38;
		running_cost_factor:			23;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_CE3050;
		purchase:						CE3050_purchase;
		articulated_part:				sw_CE3050_articulated_part;
		start_stop:						sw_CE3050_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_CE3050_can_attach_wagon;
		additional_text:				return string(STR_CE3050_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CE3050_effect;
		sound_effect:					sw_CE3050_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba Express Type 3100 //

// Chiba Express Type 3100, graphics //

spriteset (CE3100_middle_1, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CE3100_middle_2a, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CE3100_middle_2b, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CE3100_front_1_white, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CE3100_front_1_red, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CE3100_front_2_white, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CE3100_front_2_red, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CE3100_front_3_white, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CE3100_front_3_red, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (CE3100_front_4_white, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (CE3100_front_4_red, "gfx/Chiba-Express/CE3100.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (CE3100_purchase, "gfx/Chiba-Express/CE3100.png") { tmpl_purchase(0, 330) }


switch(FEAT_TRAINS, SELF, CE3100_forwards, position_in_consist % 4) {
	0:	CE3100_front_1_white;
	1:	CE3100_middle_2a;
	2:	CE3100_middle_1;
	CE3100_front_2_red;
}

switch(FEAT_TRAINS, SELF, CE3100_reverse, position_in_consist % 4) {
	0:	CE3100_front_3_white;
	1:	CE3100_middle_2b;
	2:	CE3100_middle_1;
	CE3100_front_4_red;
}

switch(FEAT_TRAINS, SELF, sw_CE3100, extra_callback_info1) {
	1: CE3100_reverse;
	CE3100_forwards;
}

// Chiba Express Type 3100, callbacks //

switch (FEAT_TRAINS, SELF, sw_CE3100_articulated_part, extra_callback_info1) {
	0 .. 3: return item_CE3100;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CE3100_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_CE3100_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CE3100_can_attach_wagon, vehicle_type_id) {
	return string(STR_CE3100_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CE3100_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba Express Type 3100, sound //

switch(FEAT_TRAINS, SELF, sw_CE3100_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3100_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3100_start_sound, param_sound_effect) {
	1: sw_CE3100_start_sound_1;
	2: sw_CE3100_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba Express 3100 Type, item //

item(FEAT_TRAINS, item_CE3100) {
	property {
		name:							string(STR_CE3100_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1996, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					36;
		running_cost_factor:			19;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_CE3100;
		purchase:						CE3100_purchase;
		articulated_part:				sw_CE3100_articulated_part;
		start_stop:						sw_CE3100_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_CE3100_can_attach_wagon;
		additional_text:				return string(STR_CE3100_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CE3100_effect;
		sound_effect:					sw_CE3100_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------


// Chiba Express Type 3150 //

// Chiba Express Type 3150, graphics //

spriteset (CE3150_middle_1, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (CE3150_middle_2a, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (CE3150_middle_2b, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (CE3150_front_1_white, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (CE3150_front_1_red, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (CE3150_front_2_white, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (CE3150_front_2_red, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (CE3150_front_3_white, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (CE3150_front_3_red, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 240) }
spriteset (CE3150_front_4_white, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 270) }
spriteset (CE3150_front_4_red, "gfx/Chiba-Express/CE3150.png") { tmpl_vehicle_8_length(0, 300) }
spriteset (CE3150_purchase, "gfx/Chiba-Express/CE3150.png") { tmpl_purchase(0, 330) }


switch(FEAT_TRAINS, SELF, CE3150_forwards, position_in_consist % 4) {
	0:	CE3150_front_1_white;
	1:	CE3150_middle_2a;
	2:	CE3150_middle_1;
	CE3150_front_2_red;
}

switch(FEAT_TRAINS, SELF, CE3150_reverse, position_in_consist % 4) {
	0:	CE3150_front_3_white;
	1:	CE3150_middle_2b;
	2:	CE3150_middle_1;
	CE3150_front_4_red;
}

switch(FEAT_TRAINS, SELF, sw_CE3150, extra_callback_info1) {
	1: CE3150_reverse;
	CE3150_forwards;
}

// Chiba Express Type 3150, callbacks //

switch (FEAT_TRAINS, SELF, sw_CE3150_articulated_part, extra_callback_info1) {
	0 .. 3: return item_CE3150;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_CE3150_start_stop, num_vehs_in_consist) {
	1 .. 4: return CB_RESULT_NO_TEXT;
	return string(STR_CE3150_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_CE3150_can_attach_wagon, vehicle_type_id) {
	return string(STR_CE3150_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_CE3150_effect, position_in_consist & 4) {
	0:	SOUND_EVENT_VISUAL_EFFECT;
	2:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

// Chiba Express Type 3150, sound //

switch(FEAT_TRAINS, SELF, sw_CE3150_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3150_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn01.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn01.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_CE3150_start_sound, param_sound_effect) {
	1: sw_CE3150_start_sound_1;
	2: sw_CE3150_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

// Chiba Express 3150 Type, item //

item(FEAT_TRAINS, item_CE3150) {
	property {
		name:							string(STR_CE3150_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(1996, 1, 1);
		model_life:						8;
		retire_early:					2;
		vehicle_life:					6;
		reliability_decay:				80;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					38;
		running_cost_factor:			20;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							95 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							1200 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							34 * 4 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_CE3150;
		purchase:						CE3150_purchase;
		articulated_part:				sw_CE3150_articulated_part;
		start_stop:						sw_CE3150_start_stop;
		purchase_running_cost_factor:	return (95 + ((param_capacities_3 * 4)/10));
		can_attach_wagon:				sw_CE3150_can_attach_wagon;
		additional_text:				return string(STR_CE3150_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_CE3150_effect;
		sound_effect:					sw_CE3150_start_sound;
	}
}

//-----------------------------------------------------------------------------------------------------------------------------

// SHIBAYAMA //

//-----------------------------------------------------------------------------------------------------------------------------


// Shibayama Type 3600 //

// Shibayama Type 3600, graphics //

spriteset (SY3600_middle_1, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 0) }
spriteset (SY3600_middle_2, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 30) }
spriteset (SY3600_middle_3b, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 60) }
spriteset (SY3600_middle_3a, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 90) }
spriteset (SY3600_front_1_white, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 120) }
spriteset (SY3600_front_1_red, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 150) }
spriteset (SY3600_front_2_white, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 180) }
spriteset (SY3600_front_2_red, "gfx/Shibayama/SY3600.png") { tmpl_vehicle_8_length(0, 210) }
spriteset (SY3600_purchase, "gfx/Shibayama/SY3600.png") { tmpl_purchase(0, 240) }

switch(FEAT_TRAINS, SELF, SY3600_forward, position_in_consist % 8) {
	0:	SY3600_front_1_white;
	2:	SY3600_middle_2;
	4:	SY3600_middle_3a;
	6:	SY3600_middle_2;
	7:	SY3600_front_2_red;
	SY3600_middle_1;
}

switch(FEAT_TRAINS, SELF, SY3600_reverse, position_in_consist % 8) {
	0:	SY3600_front_2_white;
	1:	SY3600_middle_2;
	3:	SY3600_middle_3b;
	5:	SY3600_middle_2;
	7:	SY3600_front_1_red;
	SY3600_middle_1;
}

switch(FEAT_TRAINS, SELF, sw_SY3600, extra_callback_info1) {
	1: SY3600_reverse;
	SY3600_forward;
}

// Shibayama Type 3600, callbacks //

switch (FEAT_TRAINS, SELF, sw_SY3600_articulated_part, extra_callback_info1) {
	0 .. 7: return item_SY3600;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_SY3600_start_stop, num_vehs_in_consist) {
	1 .. 8: return CB_RESULT_NO_TEXT;
	return string(STR_SY3600_CANNOT_START);
}

switch(FEAT_TRAINS, SELF, sw_SY3600_can_attach_wagon, vehicle_type_id) {
	return string(STR_SY3600_CANNOT_ATTACH_OTHER);
}

switch(FEAT_TRAINS, SELF, sw_SY3600_effect, position_in_consist & 8) {
	2:	SOUND_EVENT_VISUAL_EFFECT;
	4:	SOUND_EVENT_VISUAL_EFFECT;
	6:	SOUND_EVENT_VISUAL_EFFECT;
	return CB_FAILED;
}

//  Shibayama Type 3600, sound //

switch(FEAT_TRAINS, SELF, sw_SY3600_start_sound_1, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SY3600_start_sound_2, extra_callback_info1) {
	SOUND_EVENT_START:			return sound("sounds/Horn03.wav");	
	SOUND_EVENT_TUNNEL:			return sound("sounds/Horn03.wav");
	SOUND_EVENT_RUNNING_16:		return sound("sounds/Running02.wav");
	SOUND_EVENT_RUNNING:		return sound("sounds/Running02a.wav");
	SOUND_EVENT_LOAD_UNLOAD:	return sound("sounds/Load02.wav");
	return CB_RESULT_NO_SOUND;
}

switch(FEAT_TRAINS, SELF, sw_SY3600_start_sound, param_sound_effect) {
	1: sw_SY3600_start_sound_1;
	2: sw_SY3600_start_sound_2;
	return CB_RESULT_NO_SOUND;
}

item(FEAT_TRAINS, item_SY3600) {
	property {
		name:							string(STR_SY3600_NAME);
		climates_available:				param_company == 0 || param_company == 2 ? bitmask(CLIMATE_TEMPERATE) : NO_CLIMATE;
		introduction_date:				date(2002, 10, 27);
		model_life:						VEHICLE_NEVER_EXPIRES;
		vehicle_life:					20;
		reliability_decay:				180;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		loading_speed:					param_loading_3D; 
		cost_factor:					51;
		running_cost_factor:			21;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 km/h;
		misc_flags:						bitmask();
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_PASSENGER;
		power:							4480 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					0;
		cargo_capacity:					param_capacities_3;
		weight:							33 * 8 ton;
		ai_engine_rank:					0;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.225 / 1;
		air_drag_coefficient:			0.07;
	}
	graphics {
		default:						sw_SY3600;
		purchase:						SY3600_purchase;
		articulated_part:				sw_SY3600_articulated_part;
		start_stop:						sw_SY3600_start_stop;
		purchase_running_cost_factor:	return (110 + ((param_capacities_3 * 8)/10));
		can_attach_wagon:				sw_SY3600_can_attach_wagon;
		additional_text:				return string(STR_SY3600_ADDITIONAL_TEXT);
		visual_effect_and_powered:		sw_SY3600_effect;
		sound_effect:					sw_SY3600_start_sound;
	}
}